import{ab as t,C as e,w as n,am as r,L as i,b as o,j as a,e as l,c as s,A as u,a7 as c,H as f,i as d,_ as p,a as h,k as g,B as v,P as y,ak as m,O as x,an as b,y as w,ao as F,a5 as k,ap as S,a0 as A,f as M,al as D,m as E,J as O,v as $,$ as z,q as C,aq as P,G as I,p as T,N as R,W as _,g as L,h as B,a9 as W,ar as N,E as j,ac as q,S as G,as as V}from"./data-set.e4c8b0d5.js";import{m as H,a as Y,s as X,b as Z,d as U,c as K,C as J,E as Q,U as tt,g as et,A as nt,r as rt,e as it,V as ot,f as at,h as lt,i as st,T as ut,j as ct,k as ft,p as dt,l as pt,G as ht,n as gt}from"./g2.9fd2893c.js";function vt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return t.reduce((function(t,e){return e(t)}),e)}}function yt(t,e){var n={};return null!==t&&"object"==typeof t&&e.forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}function mt(e,n){return n?t(n,(function(t,e,n){return t.replace(new RegExp("{\\s*"+n+"\\s*}","g"),e)}),e):e}var xt,bt;(bt=xt||(xt={})).ERROR="error",bt.WARN="warn",bt.INFO="log";function wt(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i]}function Ft(t){if(!t)return{width:0,height:0};var e=getComputedStyle(t);return{width:(t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10),height:(t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)}}function kt(t,e){return t.geometries.find((function(t){return t.type===e}))}function St(e){return t(e.geometries,(function(t,e){return t.concat(e.elements)}),[])}function At(e){return n(e,["views","length"],0)<=0?St(e):t(e.views,(function(t,e){return t.concat(At(e))}),St(e))}function Mt(t,e){return t.views.find((function(t){return t.id===e}))}function Dt(t){var e=t.parent;return e?e.views:[]}function Et(t){return Dt(t).filter((function(e){return e!==t}))}function Ot(t){if(!r(t,"Object"))return t;var e=i({},t);return e.formatter&&!e.content&&(e.content=e.formatter),e}function $t(t,e,n){for(var r=!!e,i=[],o=0,a=t.length;o<a;o+=2)i.push([t[o],t[o+1]]);var l,s,u,c=function(t,e,n,r){var i,o,a,l,s=[],u=!!r;if(u){a=[1/0,1/0],l=[-1/0,-1/0];for(var c=0,f=t.length;c<f;c++){var d=t[c];a=H([0,0],a,d),l=Y([0,0],l,d)}a=H([0,0],a,r[0]),l=Y([0,0],l,r[1])}c=0;for(var p=t.length;c<p;c++){if(d=t[c],n)i=t[c?c-1:p-1],o=t[(c+1)%p];else{if(0===c||c===p-1){s.push(d);continue}i=t[c-1],o=t[c+1]}var h=[0,0];h=X(h,o,i),h=Z(h,h,e);var g=U(d,i),v=U(d,o),y=g+v;0!==y&&(g/=y,v/=y);var m=Z([0,0],h,-g),x=Z([0,0],h,v),b=K([0,0],d,m),w=K([0,0],d,x);u&&(b=Y([0,0],b,a),b=H([0,0],b,l),w=Y([0,0],w,a),w=H([0,0],w,l)),s.push(b),s.push(w)}return n&&s.push(s.shift()),s}(i,.4,r,n),f=i.length,d=[];for(o=0;o<f-1;o++)l=c[2*o],s=c[2*o+1],u=i[o+1],d.push(["C",l[0],l[1],s[0],s[1],u[0],u[1]]);return r&&(l=c[f],s=c[f+1],u=i[0],d.push(["C",l[0],l[1],s[0],s[1],u[0],u[1]])),d}var zt={}.toString,Ct=function(t,e){return zt.call(t)==="[object "+e+"]"},Pt=function(t){return Ct(t,"Array")},It=function(t){if(!function(t){return"object"==typeof t&&null!==t}(t)||!Ct(t,"Object"))return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Tt=function(t,e,n,r){for(var i in n=n||0,r=r||5,e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=e[i];o?It(o)?(It(t[i])||(t[i]={}),n<r?Tt(t[i],o,n+1,r):t[i]=e[i]):Pt(o)?(t[i]=[],t[i]=t[i].concat(o)):t[i]=o:t[i]=o}},Rt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)Tt(t,e[r]);return t};function _t(t){return t?t.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g).map((function(t){return t.toLowerCase()})).join("-"):t}function Lt(t){var e={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},r=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];n(t,"fill")&&(e.color=t.fill);var i=yt(t,r),o=i.shadowColor,a=i.shadowBlur,u=void 0===a?0:a,c=i.shadowOffsetX,f=void 0===c?0:c,d=i.shadowOffsetY,p=void 0===d?0:d;e["text-shadow"]=""+[o,f+"px",p+"px",u+"px"].join(" ");var h=yt(t,r),g=h.stroke,v=h.lineWidth,y=void 0===v?0:v;return e["-webkit-text-stroke"]=""+[y+"px",g].join(" "),l(t,(function(t,n){["fontSize"].includes(n)&&s(t)?e[_t(n)]=t+"px":n&&!r.includes(n)&&(e[_t(n)]=""+t)})),e}function Bt(t,e){t.style["pointer-events"]="none",l(e,(function(e,n){n&&e&&(t.style[n]=e)}))}var Wt,Nt=function(t,e,r){var l=e.statistic,s=e.plotType,u=l.title,c=l.content;[u,c].forEach((function(e,l){if(e){var f="";f=0===l?c?"translate(-50%, -100%)":"translate(-50%, -50%)":u?"translate(-50%, 0)":"translate(-50%, -50%)";var d=o(e.style)?e.style(r):e.style;t.annotation().html(i({position:["50%","50%"],html:function(t,o){var l=o.getCoordinate(),u=0;if("pie"===s||"ring-progress"===s)u=l.getRadius()*l.innerRadius*2;else if("liquid"===s){var c=n(o.geometries,[0,"elements",0,"shape"]);if(c)u=c.find((function(t){return"wrap"===t.get("name")})).getCanvasBBox().width}else u||(u=l.getWidth());Bt(t,i({width:u+"px",transform:f},Lt(d)));var p=o.getData();if(e.customHtml)return e.customHtml(t,o,r,p);var h=e.content;return e.formatter&&(h=e.formatter(r,p)),h?a(h)?h:""+h:"<div></div>"},key:(0===l?"top":"bottom")+"-statistic"},yt(e,["offsetX","offsetY","rotate","style","formatter"])))}}))};var jt=u((function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=void 0===r?"sans-serif":r,o=e.fontWeight,l=e.fontStyle,s=e.fontVariant,u=(Wt||(Wt=document.createElement("canvas").getContext("2d")),Wt);return u.font=[l,o,s,n+"px",i].join(" "),u.measureText(a(t)?t:"").width}),(function(t,n){return void 0===n&&(n={}),e([t],c(n)).join("")}));function qt(t){return"number"==typeof t&&!isNaN(t)}function Gt(t,e){if(!t)return{};var r=t.filter((function(t){var r=n(t,[e]);return s(r)&&!isNaN(r)})),i=r.every((function(t){return n(t,[e])>=0})),o=r.every((function(t){return n(t,[e])<=0}));return i?{min:0}:o?{max:0}:{}}function Vt(t,e,n,r,o){if(void 0===o&&(o=[]),!Array.isArray(t))return{nodes:[],links:[]};var a=[],l={},s=-1;return t.forEach((function(t){var u=t[e],c=t[n],f=t[r],d=yt(t,o);l[u]||(l[u]=i({id:++s,name:u},d)),l[c]||(l[c]=i({id:++s,name:c},d)),a.push(i({source:l[u].id,target:l[c].id,value:f},d))})),{nodes:Object.values(l).sort((function(t,e){return t.id-e.id})),links:a}}function Ht(t,e){var n=f(t,(function(t){var n=t[e];return null===n||"number"==typeof n&&!isNaN(n)}));return wt(xt.WARN,n.length===t.length,"illegal data existed in chart data."),n}function Yt(t){if(s(t))return[t,t,t,t];if(d(t)){var e=t.length;if(1===e)return[t[0],t[0],t[0],t[0]];if(2===e)return[t[0],t[1],t[0],t[1]];if(3===e)return[t[0],t[1],t[2],t[1]];if(4===e)return t}return[0,0,0,0]}function Xt(t,e,n){void 0===e&&(e="bottom"),void 0===n&&(n=25);var r=Yt(t),i=[e.startsWith("top")?n:0,e.startsWith("right")?n:0,e.startsWith("bottom")?n:0,e.startsWith("left")?n:0];return[r[0]+i[0],r[1]+i[1],r[2]+i[2],r[3]+i[3]]}function Zt(t){var e=t.map((function(t){return Yt(t)})),n=[0,0,0,0];return e.length>0&&(n=n.map((function(t,n){return e.forEach((function(r,i){t+=e[i][n]})),t}))),n}var Ut="en-US",Kt={};function Jt(t,e){Kt[t]=e}function Qt(t){return{get:function(e,r){return mt(n(Kt[t],e)||n(Kt[Ut],e)||n(Kt["en-US"],e)||e,r)}}}var te={},ee={},ne={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=1;t.default=function(){return"".concat(e++)}}(ne);var re={},ie={},oe={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=null;return function(){for(var r=this,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];clearTimeout(n),n=setTimeout((function(){t.apply(r,o)}),e)}}}(oe);var ae={};Object.defineProperty(ae,"__esModule",{value:!0}),ae.SensorTabIndex=ae.SensorClassName=ae.SizeSensorId=void 0;ae.SizeSensorId="size-sensor-id";ae.SensorClassName="size-sensor-object";ae.SensorTabIndex="-1",Object.defineProperty(ie,"__esModule",{value:!0}),ie.createSensor=void 0;var le,se=(le=oe)&&le.__esModule?le:{default:le},ue=ae;ie.createSensor=function(t){var e=void 0,n=[],r=(0,se.default)((function(){n.forEach((function(e){e(t)}))})),i=function(){e&&e.parentNode&&(e.contentDocument&&e.contentDocument.defaultView.removeEventListener("resize",r),e.parentNode.removeChild(e),e=void 0,n=[])};return{element:t,bind:function(i){e||(e=function(){"static"===getComputedStyle(t).position&&(t.style.position="relative");var e=document.createElement("object");return e.onload=function(){e.contentDocument.defaultView.addEventListener("resize",r),r()},e.style.display="block",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.height="100%",e.style.width="100%",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.zIndex="-1",e.style.opacity="0",e.setAttribute("class",ue.SensorClassName),e.setAttribute("tabindex",ue.SensorTabIndex),e.type="text/html",t.appendChild(e),e.data="about:blank",e}()),-1===n.indexOf(i)&&n.push(i)},destroy:i,unbind:function(t){var r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&e&&i()}}};var ce={};Object.defineProperty(ce,"__esModule",{value:!0}),ce.createSensor=void 0;var fe=function(t){return t&&t.__esModule?t:{default:t}}(oe);ce.createSensor=function(t){var e=void 0,n=[],r=(0,fe.default)((function(){n.forEach((function(e){e(t)}))})),i=function(){e.disconnect(),n=[],e=void 0};return{element:t,bind:function(i){var o;e||((o=new ResizeObserver(r)).observe(t),r(),e=o),-1===n.indexOf(i)&&n.push(i)},destroy:i,unbind:function(t){var r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&e&&i()}}},Object.defineProperty(re,"__esModule",{value:!0}),re.createSensor=void 0;var de=ie,pe="undefined"!=typeof ResizeObserver?ce.createSensor:de.createSensor;re.createSensor=pe,Object.defineProperty(ee,"__esModule",{value:!0}),ee.removeSensor=ee.getSensor=void 0;var he=function(t){return t&&t.__esModule?t:{default:t}}(ne),ge=re,ve=ae;var ye={};ee.getSensor=function(t){var e=t.getAttribute(ve.SizeSensorId);if(e&&ye[e])return ye[e];var n=(0,he.default)();t.setAttribute(ve.SizeSensorId,n);var r=(0,ge.createSensor)(t);return ye[n]=r,r};ee.removeSensor=function(t){var e=t.element.getAttribute(ve.SizeSensorId);t.element.removeAttribute(ve.SizeSensorId),t.destroy(),e&&ye[e]&&delete ye[e]},Object.defineProperty(te,"__esModule",{value:!0}),te.ver=te.clear=xe=te.bind=void 0;var me=ee,xe=te.bind=function(t,e){var n=(0,me.getSensor)(t);return n.bind(e),function(){n.unbind(e)}};te.clear=function(t){var e=(0,me.getSensor)(t);(0,me.removeSensor)(e)};te.ver="1.0.1";var be=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],we=function(t){function n(e,n){var r=t.call(this)||this;return r.container="string"==typeof e?document.getElementById(e):e,r.options=Rt({},r.getDefaultOptions(),n),r.createG2(),r.bindEvents(),r}return p(n,t),n.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},n.prototype.createG2=function(){var t=this.options,e=t.width,n=t.height,r=t.defaultInteractions;this.chart=new J(i(i(i(i({container:this.container,autoFit:!1},this.getChartSize(e,n)),{localRefresh:!1}),yt(this.options,be)),{defaultInteractions:r})),this.container.setAttribute("data-chart-source-type","G2Plot")},n.prototype.getChartSize=function(t,e){var n=Ft(this.container);return{width:t||n.width||400,height:e||n.height||400}},n.prototype.bindEvents=function(){var t=this;this.chart&&this.chart.on("*",(function(e){(null==e?void 0:e.type)&&t.emit(e.type,e)}))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},n.prototype.update=function(t){this.updateOption(t),this.render()},n.prototype.updateOption=function(t){this.options=Rt({},this.options,t)},n.prototype.setState=function(t,e,n){void 0===n&&(n=!0);var r=At(this.chart);l(r,(function(r){e(r.getData())&&r.setState(t,n)}))},n.prototype.getStates=function(){var t=At(this.chart),e=[];return l(t,(function(t){var n=t.getData(),r=t.getStates();l(r,(function(r){e.push({data:n,state:r,geometry:t.geometry,element:t})}))})),e},n.prototype.changeData=function(t){this.update({data:t})},n.prototype.changeSize=function(t,e){this.chart.changeSize(t,e)},n.prototype.addAnnotations=function(t,n){n=n||this.chart;var r=e(t),i=n.getController("annotation"),o=i.getComponents().map((function(t){return t.extra}));i.clear(!0);for(var a=function(t){var e=o[t],n=r.findIndex((function(t){return t.id&&t.id===e.id}));-1!==n&&(e=Rt({},e,r[n]),r.splice(n,1)),i.annotation(e)},l=0;l<o.length;l++)a(l);r.forEach((function(t){return i.annotation(t)})),n.render(!0)},n.prototype.removeAnnotations=function(t){var e=this.chart.getController("annotation"),n=e.getComponents().map((function(t){return t.extra}));e.clear(!0);for(var r=function(r){var i=n[r];t.find((function(t){return t.id&&t.id===i.id}))||e.annotation(i)},i=0;i<n.length;i++)r(i);this.chart.render(!0)},n.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute("data-chart-source-type")},n.prototype.execAdaptor=function(){var t=this.getSchemaAdaptor(),e=this.options,n=e.padding,r=e.appendPadding;this.chart.padding=n,this.chart.appendPadding=r,t({chart:this.chart,options:this.options})},n.prototype.triggerResize=function(){this.chart.forceFit()},n.prototype.bindSizeSensor=function(){var t=this;if(!this.unbind){var e=this.options.autoFit;(void 0===e||e)&&(this.unbind=xe(this.container,(function(){var e=Ft(t.container),n=e.width,r=e.height;n===t.chart.width&&r===t.chart.height||t.triggerResize()})))}},n.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},n}(Q),Fe=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"];function ke(){return"object"==typeof window?null===window||void 0===window?void 0:window.devicePixelRatio:2}function Se(t,e){void 0===e&&(e=t);var n=document.createElement("canvas"),r=ke();return n.width=t*r,n.height=e*r,n.style.width=t+"px",n.style.height=e+"px",n.getContext("2d").scale(r,r),n}function Ae(t,e,n,r){void 0===r&&(r=n);var i=e.backgroundColor,o=e.opacity;t.globalAlpha=o,t.fillStyle=i,t.beginPath(),t.fillRect(0,0,n,r),t.closePath()}function Me(t,e,n){var r=t+e;return n?2*r:r}function De(t,e){return e?[[t*(1/4),t*(1/4)],[t*(3/4),t*(3/4)]]:[[.5*t,.5*t]]}function Ee(t,e){var n=e*Math.PI/180;return{a:Math.cos(n)*(1/t),b:Math.sin(n)*(1/t),c:-Math.sin(n)*(1/t),d:Math.cos(n)*(1/t),e:0,f:0}}var Oe={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function $e(t,e,n,r){var i=e.size,o=e.fill,a=e.lineWidth,l=e.stroke,s=e.fillOpacity;t.beginPath(),t.globalAlpha=s,t.fillStyle=o,t.strokeStyle=l,t.lineWidth=a,t.arc(n,r,i/2,0,2*Math.PI,!1),t.fill(),a&&t.stroke(),t.closePath()}var ze={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function Ce(t){var e=Rt({},ze,t),n=e.spacing,r=e.rotation,i=e.lineWidth,o=n+i||1,a=n+i||1,l="\n            M 0 0 L "+o+" 0\n            M 0 "+a+" L "+o+" "+a+"\n            ",s=Se(o,a),u=s.getContext("2d");Ae(u,e,o,a),function(t,e,n){var r=e.stroke,i=e.lineWidth,o=e.strokeOpacity,a=new Path2D(n);t.globalAlpha=o,t.lineCap="square",t.strokeStyle=i?r:"transparent",t.lineWidth=i,t.stroke(a)}(u,e,l);var c=u.createPattern(s,"repeat");if(c){var f=Ee(ke(),r);c.setTransform(f)}return c}var Pe={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function Ie(t,e,n,r){var i=e.stroke,o=e.size,a=e.fill,l=e.lineWidth,s=e.fillOpacity;t.globalAlpha=s,t.strokeStyle=i,t.lineWidth=l,t.fillStyle=a,t.strokeRect(n-o/2,r-o/2,o,o),t.fillRect(n-o/2,r-o/2,o,o)}function Te(t){var e,n=t.type,r=t.cfg;switch(n){case"dot":e=function(t){var e=Rt({},Oe,t),n=e.size,r=e.padding,i=e.isStagger,o=e.rotation,a=Me(n,r,i),l=De(a,i),s=Se(a,a),u=s.getContext("2d");Ae(u,e,a);for(var c=0,f=l;c<f.length;c++){var d=f[c];$e(u,e,d[0],d[1])}var p=u.createPattern(s,"repeat");if(p){var h=Ee(ke(),o);p.setTransform(h)}return p}(r);break;case"line":e=Ce(r);break;case"square":e=function(t){var e=Rt({},Pe,t),n=e.size,r=e.padding,i=e.isStagger,o=e.rotation,a=Me(n,r,i),l=De(a,i),s=Se(a,a),u=s.getContext("2d");Ae(u,e,a);for(var c=0,f=l;c<f.length;c++){var d=f[c];Ie(u,e,d[0],d[1])}var p=u.createPattern(s,"repeat");if(p){var h=Ee(ke(),o);p.setTransform(h)}return p}(r)}return e}function Re(t){var r=this;return function(o){var a,l=o.options,s=o.chart,u=l.pattern;if(!u)return o;return Rt({},o,{options:(a={},a[t]=function(o){for(var a,c,f,d=[],p=1;p<arguments.length;p++)d[p-1]=arguments[p];var h=s.getTheme().defaultColor,g=h,v=null===(c=null===(a=s.geometries)||void 0===a?void 0:a[0])||void 0===c?void 0:c.getAttribute("color");if(v){var y=v.getFields()[0],m=n(o,y);g=tt.getMappingValue(v,m,(null===(f=v.values)||void 0===f?void 0:f[0])||h)}var x=u;"function"==typeof u&&(x=u.call(r,o,g)),x instanceof CanvasPattern==!1&&(x=Te(Rt({},{cfg:{backgroundColor:g}},x)));var b=l[t];return i(i({},"function"==typeof b?b.call.apply(b,e([r,o],d)):b||{}),{fill:x||g})},a)})}}function _e(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,o=n.seriesField;return!1===r?e.legend(!1):(i||o)&&e.legend(i||o,r),t}function Le(t){var e=t.chart,n=t.options.tooltip;return void 0!==n&&e.tooltip(n),t}function Be(t){var e=t.chart,n=t.options.interactions;return l(n,(function(t){!1===t.enable?e.removeInteraction(t.type):e.interaction(t.type,t.cfg||{})})),t}function We(t){var e=t.chart,n=t.options.animation;return"boolean"==typeof n?e.animate(n):e.animate(!0),l(e.geometries,(function(t){t.animate(n)})),t}function Ne(t){var e=t.chart,n=t.options.theme;return n&&e.theme(n),t}function je(t){var e=t.chart,n=t.options.state;return n&&l(e.geometries,(function(t){t.state(n)})),t}function qe(t){var e=t.chart,n=t.options.slider;return e.option("slider",n),t}function Ge(t){var e=t.chart,n=t.options.scrollbar;return e.option("scrollbar",n),t}function Ve(t,e){return function(n){var r=n.chart,i=n.options,o={};return l(t,(function(t,e){o[e]=yt(t,Fe)})),o=Rt({},e,i.meta,o),r.scale(o),n}}function He(t){return function(n){var r=n.chart,i=n.options,o=r.getController("annotation");return l(e(i.annotations||[],t||[]),(function(t){o.annotation(t)})),n}}function Ye(t){var e=t.chart,n=t.options,r=n.yAxis,i=n.limitInPlot,o=i;return h(r)&&g(i)&&(o=!!Object.values(yt(r,["min","max","minLimit","maxLimit"])).some((function(t){return!g(t)}))),e.limitInPlot=o,t}function Xe(t){return void 0===t&&(t="rect"),function(e){var n=e.chart,r=e.options.coordinate,i=Array.from(r||[]).map((function(t){return"reflectX"===t.type?["reflect","x"]:"reflectY"===t.type?["reflect","y"]:"transpose"===t.type?["transpose"]:null})).filter((function(t){return!!t}));return 0!==i.length&&n.coordinate({type:t,actions:i}),e}}function Ze(t,e){if(!1===t)return{fields:!1};var r=n(t,"fields"),i=n(t,"formatter");return i&&!r&&(r=e),{fields:r,formatter:i}}function Ue(t,n){var r=t.type,i=t.xField,o=t.yField,a=t.colorField,l=t.shapeField,s=t.sizeField,u=t.styleField,c=t.rawFields,f=void 0===c?[]:c,d=[];if("color"===n)d=e([a||i],f);else if("shape"===n)d=e([l||i],f);else if("size"===n)d=e([s||i],f);else{d=e([i,o,a,l,s,u],f);var p=["x","y","color","shape","size","style"].indexOf(n),h=d[p];d.splice(p,1),d.unshift(h)}var g=m(d.filter((function(t){return!!t}))),v="line"===r&&[i,o].includes(g.join("*"))?"":g.join("*");return{mappingFields:g,tileMappingField:v}}function Ke(t,e){if(e)return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i={};return t.forEach((function(t,e){i[t]=n[e]})),delete i[void 0],e(i)}}function Je(t){var e=t.chart,n=t.options,r=n.type,l=n.args,u=n.mapping,c=n.xField,f=n.yField,d=n.colorField,p=n.shapeField,g=n.sizeField,m=n.tooltipFields,x=n.label,b=n.state,w=n.customInfo;if(!u)return t;var F=u.color,k=u.shape,S=u.size,A=u.style,M=u.tooltip,D=e[r](l).position(c+"*"+f);if(a(F))d?D.color(d,F):D.color(F);else if(o(F)){var E=Ue(n,"color"),O=E.mappingFields,$=E.tileMappingField;D.color($,Ke(O,F))}else d&&D.color(d,F);if(a(k))p?D.shape(p,[k]):D.shape(k);else if(o(k)){var z=Ue(n,"shape");O=z.mappingFields,$=z.tileMappingField;D.shape($,Ke(O,k))}else p&&D.shape(p,k);if(s(S))g?D.size(g,S):D.size(S);else if(o(S)){var C=Ue(n,"size");O=C.mappingFields,$=C.tileMappingField;D.size($,Ke(O,S))}else g&&D.size(g,S);if(o(A)){var P=Ue(n,"style");O=P.mappingFields,$=P.tileMappingField;D.style($,Ke(O,A))}else h(A)&&D.style(A);if(!1===m?D.tooltip(!1):v(m)||D.tooltip(m.join("*"),Ke(m,M)),!1===x)D.label(!1);else if(x){var I=x.callback,T=x.fields,R=y(x,["callback","fields"]);D.label({fields:T||[f],callback:I,cfg:Ot(R)})}return b&&D.state(b),w&&D.customInfo(w),[c,f].filter((function(t){return t!==d})).forEach((function(t){e.legend(t,!1)})),i(i({},t),{ext:{geometry:D}})}function Qe(t){var e=t.options,n=e.area,r=e.xField,o=e.yField,a=e.seriesField,l=e.smooth,s=e.tooltip,u=e.useDeferredLabel,c=Ze(s,[r,o,a]),f=c.fields,d=c.formatter;return n?Je(Rt({},t,{options:{type:"area",colorField:a,tooltipFields:f,mapping:i({shape:l?"smooth":"area",tooltip:d},n),args:{useDeferredLabel:u}}})):t}function tn(t){var e=t.options,n=e.line,r=e.stepType,i=e.xField,o=e.yField,a=e.seriesField,l=e.smooth,s=e.connectNulls,u=e.tooltip,c=e.useDeferredLabel,f=Ze(u,[i,o,a]),d=f.fields,p=f.formatter;return n?Je(Rt({},t,{options:{type:"line",colorField:a,tooltipFields:d,mapping:x({shape:r||(l?"smooth":"line"),tooltip:p},n),args:{connectNulls:s,useDeferredLabel:c}}})):t}function en(t){var e=t.options,n=e.point,r=e.xField,o=e.yField,a=e.seriesField,l=e.sizeField,s=e.shapeField,u=e.tooltip,c=e.useDeferredLabel,f=Ze(u,[r,o,a,l,s]),d=f.fields,p=f.formatter;return n?Je(Rt({},t,{options:{type:"point",colorField:a,shapeField:s,tooltipFields:d,mapping:i({tooltip:p},n),args:{useDeferredLabel:c}}})):t}function nn(t){var e=t.options,n=e.xField,r=e.yField,o=e.interval,a=e.seriesField,l=e.tooltip,s=e.minColumnWidth,u=e.maxColumnWidth,c=e.columnBackground,f=e.dodgePadding,d=e.intervalPadding,p=e.useDeferredLabel,v=Ze(l,[n,r,a]),y=v.fields,m=v.formatter,x=(o?Je(Rt({},t,{options:{type:"interval",colorField:a,tooltipFields:y,mapping:i({tooltip:m},o),args:{dodgePadding:f,intervalPadding:d,minColumnWidth:s,maxColumnWidth:u,background:c,useDeferredLabel:p}}})):t).ext;return function(t){var e=t.chart,n=t.options,r=t.ext,i=n.seriesField,o=n.isGroup,a=n.isStack,l=n.marginRatio,s=n.widthRatio,u=n.groupField,c=n.theme,f=[];return i&&(o&&f.push({type:"dodge",dodgeBy:u||i,marginRatio:l}),a&&f.push({type:"stack",marginRatio:l})),f.length&&(null==r?void 0:r.geometry)&&(null==r?void 0:r.geometry).adjust(f),g(s)||e.theme(Rt({},h(c)?c:et(c),{columnWidthRatio:s})),t}(i(i({},t),{ext:x}))}function rn(t){var e=t.options,n=e.polygon,r=e.xField,o=e.yField,a=e.seriesField,l=e.tooltip,s=e.useDeferredLabel,u=Ze(l,[r,o,a]),c=u.fields,f=u.formatter;return n?Je(Rt({},t,{options:{type:"polygon",colorField:a,tooltipFields:c,mapping:i({tooltip:f},n),args:{useDeferredLabel:s}}})):t}function on(t){var e=t.options,n=e.edge,r=e.xField,o=e.yField,a=e.seriesField,l=e.tooltip,s=e.useDeferredLabel,u=Ze(l,[r,o,a]),c=u.fields,f=u.formatter;return n?Je(Rt({},t,{options:{type:"edge",colorField:a,tooltipFields:c,mapping:i({tooltip:f},n),args:{useDeferredLabel:s}}})):t}function an(t){var e=t.options,n=e.schema,r=e.xField,o=e.yField,a=e.seriesField,l=e.tooltip,s=e.useDeferredLabel,u=Ze(l,[r,o,a]),c=u.fields,f=u.formatter;return n?Je(Rt({},t,{options:{type:"schema",colorField:a,tooltipFields:c,mapping:i({tooltip:f},n),args:{useDeferredLabel:s}}})):t}function ln(t){var e=t.chart,n=t.options,r=n.data,o=n.color,a=n.lineStyle,l=n.lineShape,s=n.point,u=n.area,c=n.seriesField,f=null==s?void 0:s.state,d=null==u?void 0:u.state;e.data(r);var p=Rt({},t,{options:{shapeField:c,line:{color:o,style:a,shape:l},point:s&&i({color:o,shape:"circle"},s),area:u&&i({color:o},u),label:void 0}}),h=Rt({},p,{options:{tooltip:!1,state:f}}),g=Rt({},p,{options:{tooltip:!1,state:d}});return tn(p),en(h),Qe(g),t}function sn(t){var e,n,r=t.options,i=r.xAxis,o=r.yAxis,a=r.xField,l=r.yField,s=r.data;return vt(Ve(((e={})[a]=i,e[l]=o,e),((n={})[a]={type:"cat"},n[l]=Gt(s,l),n)))(t)}function un(t){var e=t.chart,n=t.options.reflect;if(n){var r=n;d(r)||(r=[r]);var i=r.map((function(t){return["reflect",t]}));e.coordinate({type:"rect",actions:i})}return t}function cn(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return!1===r?e.axis(o,!1):e.axis(o,r),!1===i?e.axis(a,!1):e.axis(a,i),t}function fn(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return r&&i?e.legend(i,r):!1===r&&e.legend(!1),t}function dn(t){var e=t.chart,n=t.options,r=n.label,o=n.yField,a=kt(e,"line");if(r){var l=r.callback,s=y(r,["callback"]);a.label({fields:[o],callback:l,cfg:i({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Ot(s))})}else a.label(!1);return t}function pn(t){var e=t.chart;return t.options.isStack&&l(e.geometries,(function(t){t.adjust("stack")})),t}function hn(t){return vt(ln,sn,pn,Ne,un,cn,fn,Le,dn,qe,Ge,Be,We,He(),Ye)(t)}var gn=Rt({},we.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left",radio:{}},isStack:!1});it("marker-active",function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.active=function(){var t=this.getView(),e=this.context.event;if(e.data){var n=e.data.items,r=t.geometries.filter((function(t){return"point"===t.type}));l(r,(function(t){l(t.elements,(function(t){var e=-1!==b(n,(function(e){return e.data===t.data}));t.setState("active",e)}))}))}},e.prototype.reset=function(){var t=this.getView().geometries.filter((function(t){return"point"===t.type}));l(t,(function(t){l(t.elements,(function(t){t.setState("active",!1)}))}))},e.prototype.getView=function(){return this.context.view},e}(nt)),rt("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var vn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="line",e}return p(e,t),e.getDefaultOptions=function(){return gn},e.prototype.changeData=function(t){this.updateOption({data:t});sn({chart:this.chart,options:this.options}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return hn},e}(we);function yn(e,n,r,o){var a=t(e,(function(t,e){var i=e[r],o=t.has(i)?t.get(i):0,a=e[n];return o=qt(a)?o+a:o,t.set(i,o),t}),new Map);return w(e,(function(t){var e,l=t[n],s=t[r],u=qt(l)&&0!==a.get(s)?l/a.get(s):0;return i(i({},t),((e={})[o]=u,e))}))}function mn(t,e,n,r,i){return i?yn(t,e,n,r):t}function xn(t){var e=t.chart,n=t.options,r=n.data,o=n.areaStyle,a=n.color,l=n.point,s=n.line,u=n.isPercent,c=n.xField,f=n.yField,d=n.tooltip,p=n.seriesField,h=n.startOnZero,g=null==l?void 0:l.state,v=mn(r,f,c,f,u);e.data(v);var y=u?i({formatter:function(t){return{name:t[p]||t[c],value:(100*Number(t[f])).toFixed(2)+"%"}}},d):d,m=Rt({},t,{options:{area:{color:a,style:o},point:l&&i({color:a},l),tooltip:y,label:void 0,args:{startOnZero:h}}}),x={chart:e,options:Rt({line:{size:2}},F(n,["state"]),{line:s&&i({color:a},s),sizeField:p,state:null==s?void 0:s.state,tooltip:!1,label:void 0,args:{startOnZero:h}})},b=Rt({},m,{options:{tooltip:!1,state:g}});return Qe(m),tn(x),en(b),t}function bn(t){var e=t.chart,n=t.options,r=n.label,o=n.yField,a=kt(e,"area");if(r){var l=r.callback,s=y(r,["callback"]);a.label({fields:[o],callback:l,cfg:i({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Ot(s))})}else a.label(!1);return t}function wn(t){var e=t.chart,n=t.options,r=n.isStack,i=n.isPercent,o=n.seriesField;return(i||r)&&o&&l(e.geometries,(function(t){t.adjust("stack")})),t}function Fn(t){return vt(Ne,Re("areaStyle"),Xe("rect"),xn,sn,wn,cn,fn,Le,bn,qe,He(),Be,We,Ye)(t)}var kn=Rt({},we.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left",radio:{}}}),Sn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="area",e}return p(e,t),e.getDefaultOptions=function(){return kn},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options,n=e.isPercent,r=e.xField,i=e.yField;sn({chart:this.chart,options:this.options}),this.chart.changeData(mn(t,i,r,i,n))},e.prototype.getSchemaAdaptor=function(){return Fn},e}(we);function An(t,e){return s(t)&&s(e)?t===e?"100%":0===t?"∞":0===e?"-∞":(100*e/t).toFixed(2)+"%":"-"}function Mn(t,e){return Rt({size:e?32:80,spacing:e?8:12,offset:e?32:0,arrow:!1!==t.arrow&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:!1!==t.text&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:An}},t)}function Dn(t,e){return w(e.getModel().points,(function(e){return t.convertPoint(e)}))}function En(t,e,n){!function(t,e,n){var r=t.view,o=t.geometry,a=t.group,l=t.options,s=t.horizontal,u=l.offset,c=l.size,f=l.arrow,d=r.getCoordinate(),p=Dn(d,e)[3],h=Dn(d,n)[0],g=h.y-p.y,v=h.x-p.x;if("boolean"!=typeof f){var y,m=f.headSize,x=l.spacing;s?(v-m)/2<x?(x=Math.max(1,(v-m)/2),y=[[p.x+x,p.y-u],[p.x+x,p.y-u-c],[h.x-x,h.y-u-c/2]]):y=[[p.x+x,p.y-u],[p.x+x,p.y-u-c],[h.x-x-m,h.y-u-c],[h.x-x,h.y-u-c/2],[h.x-x-m,h.y-u]]:(g-m)/2<x?(x=Math.max(1,(g-m)/2),y=[[p.x+u,p.y+x],[p.x+u+c,p.y+x],[h.x+u+c/2,h.y-x]]):y=[[p.x+u,p.y+x],[p.x+u+c,p.y+x],[h.x+u+c,h.y-x-m],[h.x+u+c/2,h.y-x],[h.x+u,h.y-x-m]],a.addShape("polygon",{id:r.id+"-conversion-tag-arrow-"+o.getElementId(e.getModel().mappingData),name:"conversion-tag-arrow",origin:{element:e,nextElement:n},attrs:i(i({},f.style||{}),{points:y})})}}(t,e,n),function(t,e,n){var r,o,a,l=t.view,s=t.geometry,u=t.group,c=t.options,f=t.field,d=t.horizontal,p=c.offset,h=c.size;if("boolean"!=typeof c.text){var g=l.getCoordinate(),v=(null===(r=c.text)||void 0===r?void 0:r.formatter)&&(null===(o=c.text)||void 0===o?void 0:o.formatter(e.getData()[f],n.getData()[f])),y=Dn(g,e)[d?3:0],m=Dn(g,n)[d?0:3],x=u.addShape("text",{id:l.id+"-conversion-tag-text-"+s.getElementId(e.getModel().mappingData),name:"conversion-tag-text",origin:{element:e,nextElement:n},attrs:i(i({},(null===(a=c.text)||void 0===a?void 0:a.style)||{}),{text:v,x:d?(y.x+m.x)/2:y.x+p+h/2,y:d?y.y-p-h/2:(y.y+m.y)/2})});if(d){var b=m.x-y.x,w=x.getBBox().width;if(w>b){var F=w/v.length,k=Math.max(1,Math.ceil(b/F)-1),S=v.slice(0,k)+"...";x.attr("text",S)}}}}(t,e,n)}var On={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},$n=function(t,e){return"hover"===t?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:e}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:e}]}]};rt(On.hover,{start:$n(On.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),rt(On.click,{start:$n(On.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});var zn={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}};function Cn(t){return t.isInPlot()}function Pn(t,e,n){var r=n||{},i=r.mask,o=r.isStartEnable,a=e||"rect";switch(t){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:o||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:o||Cn,action:["brush:start",a+"-mask:start",a+"-mask:show"],arg:[null,{maskStyle:null==i?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:Cn,action:[a+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Cn,action:["brush:filter","brush:end",a+"-mask:end",a+"-mask:hide","brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:o||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:crosshair",isEnable:o||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:default",isEnable:function(t){return!!o&&!o(t)}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:o||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:o||function(t){return!t.isInShape("mask")},action:[a+"-mask:start",a+"-mask:show"],arg:[{maskStyle:null==i?void 0:i.style}]},{trigger:"mask:dragstart",action:[a+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[a+"-mask:resize"]},{trigger:"mask:drag",action:[a+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[a+"-mask:end"]},{trigger:"mask:dragend",action:[a+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(t){return!t.isInPlot()},action:["element-range-highlight:clear",a+"-mask:end",a+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",a+"-mask:hide"]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:o||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:o||Cn,action:["brush-x:start",a+"-mask:start",a+"-mask:show"],arg:[null,{maskStyle:null==i?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:Cn,action:[a+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Cn,action:["brush-x:filter","brush-x:end",a+"-mask:end",a+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:o||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:o||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:o||function(t){return!t.isInShape("mask")},action:[a+"-mask:start",a+"-mask:show"],arg:[{maskStyle:null==i?void 0:i.style}]},{trigger:"mask:dragstart",action:[a+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[a+"-mask:resize"]},{trigger:"mask:drag",action:[a+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[a+"-mask:end"]},{trigger:"mask:dragend",action:[a+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(t){return!t.isInPlot()},action:["element-range-highlight:clear",a+"-mask:end",a+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",a+"-mask:hide"]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:o||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:o||Cn,action:["brush-y:start",a+"-mask:start",a+"-mask:show"],arg:[null,{maskStyle:null==i?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:Cn,action:[a+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Cn,action:["brush-y:filter","brush-y:end",a+"-mask:end",a+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};default:return{}}}it("brush-reset-button",function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttonGroup=null,e.buttonCfg=i({name:"button"},zn),e}return p(e,t),e.prototype.getButtonCfg=function(){var t=this.context.view,e=n(t,["interactions","filter-action","cfg","buttonConfig"]);return Rt(this.buttonCfg,e,this.cfg)},e.prototype.drawButton=function(){var t=this.getButtonCfg(),e=this.context.view.foregroundGroup.addGroup({name:t.name}),n=this.drawText(e);this.drawBackground(e,n.getBBox()),this.buttonGroup=e},e.prototype.drawText=function(t){var e,n=this.getButtonCfg();return t.addShape({type:"text",name:"button-text",attrs:i({text:n.text},null===(e=n.textStyle)||void 0===e?void 0:e.default)})},e.prototype.drawBackground=function(t,e){var n,r=this.getButtonCfg(),o=Yt(r.padding),a=t.addShape({type:"rect",name:"button-rect",attrs:i({x:e.x-o[3],y:e.y-o[0],width:e.width+o[1]+o[3],height:e.height+o[0]+o[2]},null===(n=r.buttonStyle)||void 0===n?void 0:n.default)});return a.toBack(),t.on("mouseenter",(function(){var t;a.attr(null===(t=r.buttonStyle)||void 0===t?void 0:t.active)})),t.on("mouseleave",(function(){var t;a.attr(null===(t=r.buttonStyle)||void 0===t?void 0:t.default)})),a},e.prototype.resetPosition=function(){var t=this.context.view.getCoordinate().convert({x:1,y:1}),e=this.buttonGroup,n=e.getBBox(),r=tt.transform(null,[["t",t.x-n.width-10,t.y+n.height+5]]);e.setMatrix(r)},e.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},e.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},e.prototype.destroy=function(){var e=this.buttonGroup;e&&e.remove(),t.prototype.destroy.call(this)},e}(nt),{name:"brush-reset-button"}),rt("filter-action",{}),rt("brush",Pn("brush")),rt("brush-highlight",Pn("brush-highlight")),rt("brush-x",Pn("brush-x","x-rect")),rt("brush-y",Pn("brush-y","y-rect")),rt("brush-x-highlight",Pn("brush-x-highlight","x-rect")),rt("brush-y-highlight",Pn("brush-y-highlight","y-rect"));var In=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function Tn(t){var e=t.options,n=e.brush,r=f(e.interactions||[],(function(t){return-1===In.indexOf(t.type)}));return(null==n?void 0:n.enabled)&&(In.forEach((function(t){var e=!1;switch(n.type){case"x-rect":e=t===("highlight"===n.action?"brush-x-highlight":"brush-x");break;case"y-rect":e=t===("highlight"===n.action?"brush-y-highlight":"brush-y");break;default:e=t===("highlight"===n.action?"brush-highlight":"brush")}var i={type:t,enable:e};n&&(i.cfg=Pn(t,n.type,n)),r.push(i)})),"highlight"!==(null==n?void 0:n.action)&&r.push({type:"filter-action",cfg:{buttonConfig:n.button}})),Rt({},t,{options:{interactions:r}})}function Rn(t){var e=t.options,n=e.legend,r=e.seriesField,o=e.isStack;return r?!1!==n&&(n=i({position:o?"right-top":"top-left"},n)):n=!1,t.options.legend=n,t}function _n(e){var n=e.chart,r=e.options,o=r.data,a=r.columnStyle,l=r.color,s=r.columnWidthRatio,u=r.isPercent,c=r.isGroup,f=r.isStack,d=r.xField,p=r.yField,h=r.seriesField,g=r.groupField,v=r.tooltip,y=r.shape,m=u&&c&&f?function(e,n,r,o){var a=t(e,(function(e,i){var o=t(r,(function(t,e){return""+t+i[e]}),""),a=e.has(o)?e.get(o):0,l=i[n];return a=qt(l)?a+l:a,e.set(o,a),e}),new Map);return w(e,(function(e){var l,s=e[n],u=t(r,(function(t,n){return""+t+e[n]}),""),c=qt(s)&&0!==a.get(u)?s/a.get(u):0;return i(i({},e),((l={})[o]=c,l))}))}(o,p,[d,g],p):mn(o,p,d,p,u),x=[];f&&h&&!c?m.forEach((function(t){var e=x.find((function(e){return e[d]===t[d]&&e[h]===t[h]}));e?e[p]+=t[p]||0:x.push(i({},t))})):x=m,n.data(x);var b=u?i({formatter:function(t){return{name:c&&f?t[h]+" - "+t[g]:t[h]||t[d],value:(100*Number(t[p])).toFixed(2)+"%"}}},v):v,F=Rt({},e,{options:{data:x,widthRatio:s,tooltip:b,interval:{shape:y,style:a,color:l}}});return nn(F),F}function Ln(t){var e,n,r=t.options,o=r.xAxis,a=r.yAxis,l=r.xField,s=r.yField,u=r.data,c=r.isPercent?{max:1,min:0,minLimit:0,maxLimit:1}:{};return vt(Ve(((e={})[l]=o,e[s]=a,e),((n={})[l]={type:"cat"},n[s]=i(i({},Gt(u,s)),c),n)))(t)}function Bn(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return!1===r?e.axis(o,!1):e.axis(o,r),!1===i?e.axis(a,!1):e.axis(a,i),t}function Wn(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return r&&i?e.legend(i,r):!1===r&&e.legend(!1),t}function Nn(t){var e=t.chart,n=t.options,r=n.label,o=n.yField,a=n.isRange,l=kt(e,"interval");if(r){var s=r.callback,u=y(r,["callback"]);l.label({fields:[o],callback:s,cfg:i({layout:(null==u?void 0:u.position)?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Ot(a?i({content:function(t){var e;return null===(e=t[o])||void 0===e?void 0:e.join("-")}},u):u))})}else l.label(!1);return t}function jn(t){var e=t.chart,n=t.options,r=n.tooltip,o=n.isGroup,a=n.isStack,s=n.groupField,u=n.data,c=n.xField,d=n.yField,p=n.seriesField;if(!1===r)e.tooltip(!1);else{var h=r;if(o&&a){var g=(null==h?void 0:h.formatter)||function(t){return{name:t[p]+" - "+t[s],value:t[d]}};h=i(i({},h),{customItems:function(t){var e=[];return l(t,(function(t){f(u,(function(e){return S(e,yt(t.data,[c,p]))})).forEach((function(n){e.push(i(i(i({},t),{value:n[d],data:n,mappingData:{_origin:n}}),g(n)))}))})),e}})}e.tooltip(h)}return t}function qn(t,e){void 0===e&&(e=!1);var n,r,i,o,a=t.options,s=a.seriesField;return vt(Rn,Ne,Re("columnStyle"),je,Xe("rect"),_n,Ln,Bn,Wn,jn,qe,Ge,Nn,Tn,Be,We,He(),(r=a.yField,void 0===(i=!e)&&(i=!0),void 0===(o=!!s)&&(o=!1),function(t){var e=t.options,n=t.chart,a=e.conversionTag,s=e.theme;return a&&!o&&(n.theme(Rt({},h(s)?s:et(s),{columnWidthRatio:1/3})),n.annotation().shape({render:function(t,e){var o=t.addGroup({id:n.id+"-conversion-tag-group",name:"conversion-tag-group"}),s=k(n.geometries,(function(t){return"interval"===t.type})),u={view:e,geometry:s,group:o,field:r,horizontal:i,options:Mn(a,i)},c=s.elements;l(c,(function(t,e){e>0&&En(u,c[e-1],t)}))}})),t}),(void 0===(n=!a.isStack)&&(n=!1),function(t){var e=t.chart,r=t.options.connectedArea,i=function(){e.removeInteraction(On.hover),e.removeInteraction(On.click)};if(!n&&r){var o=r.trigger||"hover";i(),e.interaction(On[o],{start:$n(o,r.style)})}else i();return t}),Ye)(t)}var Gn=Rt({},we.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),Vn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="column",e}return p(e,t),e.getDefaultOptions=function(){return Gn},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options,n=e.yField,r=e.xField,i=e.isPercent;Ln({chart:this.chart,options:this.options}),this.chart.changeData(mn(t,n,r,n,i))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return qn},e}(we);function Hn(t){var e=t.options,n=e.xField,r=e.yField,o=e.xAxis,a=e.yAxis,l={left:"bottom",right:"top",top:"left",bottom:"right"},s=!1!==a&&i({position:l[(null==a?void 0:a.position)||"left"]},a),u=!1!==o&&i({position:l[(null==o?void 0:o.position)||"bottom"]},o);return i(i({},t),{options:i(i({},e),{xField:r,yField:n,xAxis:s,yAxis:u})})}function Yn(t){var e=t.options.label;return e&&!e.position&&(e.position="left",e.layout||(e.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}])),Rt({},t,{options:{label:e}})}function Xn(t){var e=t.options,n=e.seriesField,r=e.isStack,o=e.legend;return n?!1!==o&&(o=i({position:r?"top-left":"right-top"},o||{})):o=!1,Rt({},t,{options:{legend:o}})}function Zn(t){var e=t.options,n=[{type:"transpose"},{type:"reflectY"}].concat(e.coordinate||[]);return Rt({},t,{options:{coordinate:n}})}function Un(t){var e=t.chart,n=t.options,r=n.barStyle,o=n.barWidthRatio,a=n.minBarWidth,l=n.maxBarWidth,s=n.barBackground;return qn({chart:e,options:i(i({},n),{columnStyle:r,columnWidthRatio:o,minColumnWidth:a,maxColumnWidth:l,columnBackground:s})},!0)}function Kn(t){return vt(Hn,Yn,Xn,Le,Zn,Un)(t)}var Jn=Rt({},we.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),Qn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="bar",e}return p(e,t),e.getDefaultOptions=function(){return Jn},e.prototype.changeData=function(t){var e,n;this.updateOption({data:t});var r=this.chart,o=this.options,a=o.isPercent,l=o.xField,s=o.yField,u=o.xAxis,c=o.yAxis;l=(e=[s,l])[0],s=e[1],u=(n=[c,u])[0],c=n[1],Ln({chart:r,options:i(i({},o),{xField:l,yField:s,yAxis:c,xAxis:u})}),r.changeData(mn(t,l,s,l,a))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Kn},e}(we),tr=Rt({},we.getDefaultOptions(),{legend:{position:"right",radio:{}},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}});function er(t,e){var n;switch(t){case"inner":return n="-30%",a(e)&&e.endsWith("%")?.01*parseFloat(e)>0?n:e:e<0?e:n;case"outer":return n=12,a(e)&&e.endsWith("%")?.01*parseFloat(e)<0?n:e:e>0?e:n;default:return e}}function nr(t,e){return A(Ht(t,e),(function(t){return 0===t[e]}))}var rr=[1,0,0,0,1,0,0,0,1];function ir(t,n){var r=e(n||rr);return tt.transform(r,t)}var or=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.getActiveElements=function(){var t=tt.getDelegationObject(this.context);if(t){var e=this.context.view,n=t.component,r=t.item,i=n.get("field");if(i)return e.geometries[0].elements.filter((function(t){return t.getModel().data[i]===r.value}))}return[]},e.prototype.getActiveElementLabels=function(){var t=this.context.view,e=this.getActiveElements();return t.geometries[0].labelsContainer.getChildren().filter((function(t){return e.find((function(e){return M(e.getData(),t.get("data"))}))}))},e.prototype.transfrom=function(t){void 0===t&&(t=7.5);var e=this.getActiveElements(),n=this.getActiveElementLabels();e.forEach((function(e,r){var i=n[r],o=e.geometry.coordinate;if(o.isPolar&&o.isTransposed){var a=tt.getAngle(e.getModel(),o),l=(a.startAngle+a.endAngle)/2,s=t,u=s*Math.cos(l),c=s*Math.sin(l);e.shape.setMatrix(ir([["t",u,c]])),i.setMatrix(ir([["t",u,c]]))}}))},e.prototype.active=function(){this.transfrom()},e.prototype.reset=function(){this.transfrom(0)},e}(nt);var ar=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.getAnnotations=function(t){return(t||this.context.view).getController("annotation").option},e.prototype.getInitialAnnotation=function(){return this.initialAnnotation},e.prototype.init=function(){var t=this,e=this.context.view;e.removeInteraction("tooltip"),e.on("afterchangesize",(function(){var n=t.getAnnotations(e);t.initialAnnotation=n}))},e.prototype.change=function(t){var e=this.context,r=e.view,i=e.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var o=n(i,["data","data"]);if(i.type.match("legend-item")){var a=tt.getDelegationObject(this.context),s=r.getGroupedFields()[0];if(a&&s){var u=a.item;o=r.getData().find((function(t){return t[s]===u.value}))}}if(o){var c=n(t,"annotations",[]),f=n(t,"statistic",{});r.getController("annotation").clear(!0),l(c,(function(t){"object"==typeof t&&r.annotation()[t.type](t)})),Nt(r,{statistic:f,plotType:"pie"},o),r.render(!0)}var d,p,h,g=(d=this.context,(h=d.event.target)&&(p=h.get("element")),p);g&&g.shape.toFront()},e.prototype.reset=function(){var t=this.context.view;t.getController("annotation").clear(!0);var e=this.getInitialAnnotation();l(e,(function(e){t.annotation()[e.type](e)})),t.render(!0)},e}(nt);function lr(t){var e=t.chart,n=t.options,r=n.data,o=n.angleField,a=n.colorField,l=n.color,s=n.pieStyle,u=Ht(r,o);if(nr(u,o)){var c="$$percentage$$";u=u.map((function(t){var e;return i(i({},t),((e={}).$$percentage$$=1/u.length,e))})),e.data(u),nn(Rt({},t,{options:{xField:"1",yField:c,seriesField:a,isStack:!0,interval:{color:l,style:s},args:{zIndexReversed:!0,sortZIndex:!0}}}))}else{e.data(u),nn(Rt({},t,{options:{xField:"1",yField:o,seriesField:a,isStack:!0,interval:{color:l,style:s},args:{zIndexReversed:!0,sortZIndex:!0}}}))}return t}function sr(t){var e,n=t.chart,r=t.options,i=r.meta,o=r.colorField,a=Rt({},i);return n.scale(a,((e={})[o]={type:"cat"},e)),t}function ur(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,o=n.startAngle,a=n.endAngle;return e.coordinate({type:"theta",cfg:{radius:r,innerRadius:i,startAngle:o,endAngle:a}}),t}function cr(t){var e=t.chart,n=t.options,r=n.label,l=n.colorField,u=n.angleField,c=e.geometries[0];if(r){var f=r.callback,p=Ot(y(r,["callback"]));if(p.content){var h=p.content;p.content=function(t,n,r){var c=t[l],f=t[u],d=e.getScaleByField(u),p=null==d?void 0:d.scale(f);return o(h)?h(i(i({},t),{percent:p}),n,r):a(h)?mt(h,{value:f,name:c,percentage:s(p)&&!g(f)?(100*p).toFixed(2)+"%":null}):h}}var v=p.type?{inner:"",outer:"pie-outer",spider:"pie-spider"}[p.type]:"pie-outer",m=p.layout?d(p.layout)?p.layout:[p.layout]:[];p.layout=(v?[{type:v}]:[]).concat(m),c.label({fields:l?[u,l]:[u],callback:f,cfg:i(i({},p),{offset:er(p.type,p.offset),type:"pie"})})}else c.label(!1);return t}function fr(t){var e=t.innerRadius,r=t.statistic,i=t.angleField,o=t.colorField,a=t.meta,s=Qt(t.locale);if(e&&r){var u=Rt({},tr.statistic,r),c=u.title,f=u.content;return!1!==c&&(c=Rt({},{formatter:function(t){var e=t?t[o]:g(c.content)?s.get(["statistic","total"]):c.content;return(n(a,[o,"formatter"])||function(t){return t})(e)}},c)),!1!==f&&(f=Rt({},{formatter:function(t,e){var r=t?t[i]:function(t,e){var n=null;return l(t,(function(t){"number"==typeof t[e]&&(n+=t[e])})),n}(e,i),o=n(a,[i,"formatter"])||function(t){return t};return t||g(f.content)?o(r):f.content}},f)),Rt({},{statistic:{title:c,content:f}},t)}return t}function dr(t){var e=t.chart,n=fr(t.options),r=n.innerRadius,i=n.statistic;return e.getController("annotation").clear(!0),vt(He())(t),r&&i&&Nt(e,{statistic:i,plotType:"pie"}),t}function pr(t){var e=t.chart,r=t.options,i=r.tooltip,o=r.colorField,a=r.angleField,l=r.data;if(!1===i)e.tooltip(i);else if(e.tooltip(Rt({},i,{shared:!1})),nr(l,a)){var s=n(i,"fields"),u=n(i,"formatter");v(n(i,"fields"))&&(s=[o,a],u=u||function(t){return{name:t[o],value:D(t[a])}}),e.geometries[0].tooltip(s.join("*"),Ke(s,u))}return t}function hr(t){var e=t.chart,n=fr(t.options),r=n.interactions,o=n.statistic,a=n.annotations;return l(r,(function(t){var n,r;if(!1===t.enable)e.removeInteraction(t.type);else if("pie-statistic-active"===t.type){var s=[];(null===(n=t.cfg)||void 0===n?void 0:n.start)||(s=[{trigger:"element:mouseenter",action:"pie-statistic:change",arg:{statistic:o,annotations:a}}]),l(null===(r=t.cfg)||void 0===r?void 0:r.start,(function(t){s.push(i(i({},t),{arg:{statistic:o,annotations:a}}))})),e.interaction(t.type,Rt({},t.cfg,{start:s}))}else e.interaction(t.type,t.cfg||{})})),t}function gr(t){return vt(Re("pieStyle"),lr,sr,Ne,ur,_e,pr,cr,je,dr,hr,We)(t)}it("pie-statistic",ar),rt("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),it("pie-legend",or),rt("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});var vr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="pie",e}return p(e,t),e.getDefaultOptions=function(){return tr},e.prototype.changeData=function(t){this.chart.emit(ot.BEFORE_CHANGE_DATA,at.fromData(this.chart,ot.BEFORE_CHANGE_DATA,null));var e=this.options,n=this.options.angleField,r=Ht(e.data,n),i=Ht(t,n);nr(r,n)||nr(i,n)?this.update({data:t}):(this.updateOption({data:t}),this.chart.data(i),dr({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(ot.AFTER_CHANGE_DATA,at.fromData(this.chart,ot.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return gr},e}(we);function yr(t){var e=t.chart,n=t.options,r=n.data,i=n.sectorStyle,o=n.color;return e.data(r),vt(nn)(Rt({},t,{options:{marginRatio:1,interval:{style:i,color:o}}})),t}function mr(t){var e=t.chart,n=t.options,r=n.label,i=n.xField,o=kt(e,"interval");if(!1===r)o.label(!1);else if(h(r)){var a=r.callback,l=r.fields,s=y(r,["callback","fields"]),u=s.offset,c=s.layout;(void 0===u||u>=0)&&(c=c?d(c)?c:[c]:[],s.layout=f(c,(function(t){return"limit-in-shape"!==t.type})),s.layout.length||delete s.layout),o.label({fields:l||[i],callback:a,cfg:Ot(s)})}else wt(xt.WARN,null===r,"the label option must be an Object."),o.label({fields:[i]});return t}function xr(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return!1===r?e.legend(!1):i&&e.legend(i,r),t}function br(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,o=n.startAngle,a=n.endAngle;return e.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:o,endAngle:a}}),t}function wr(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return vt(Ve(((e={})[o]=r,e[a]=i,e)))(t)}function Fr(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return r?e.axis(o,r):e.axis(o,!1),i?e.axis(a,i):e.axis(a,!1),t}function kr(t){vt(Re("sectorStyle"),yr,wr,mr,br,Fr,xr,Le,Be,We,Ne,He(),je)(t)}var Sr=Rt({},we.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right",radio:{}},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="rose",e}p(e,t),e.getDefaultOptions=function(){return Sr},e.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return kr}}(we);var Ar={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function Mr(t,e){return function(t,e){var n=function(){var t=[256,256],e=$r,n=Cr,r=zr,i=Pr,o=Ir,a=Br,l=Math.random,s=[],u=1/0,c=Or,f=zr,d=Nr,p={};function h(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=2048/e,t.height=Er/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}function g(e,n,r){for(var i,o,s,u=n.x,c=n.y,f=Math.sqrt(t[0]*t[0]+t[1]*t[1]),d=a(t),p=l()<.5?1:-1,h=-p;(i=d(h+=p))&&(o=~~i[0],s=~~i[1],!(Math.min(Math.abs(o),Math.abs(s))>=f));)if(n.x=u+o,n.y=c+s,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>t[0]||n.y+n.y1>t[1])&&(!r||!Rr(n,e,t[0]))&&(!r||Lr(n,r))){for(var g=n.sprite,v=n.width>>5,y=t[0]>>5,m=n.x-(v<<4),x=127&m,b=32-x,w=n.y1-n.y0,F=void 0,k=(n.y+n.y0)*y+(m>>5),S=0;S<w;S++){F=0;for(var A=0;A<=v;A++)e[k+A]|=F<<b|(A<v?(F=g[S*v+A])>>>x:0);k+=y}return delete n.sprite,!0}return!1}return p.start=function(){var a=t[0],v=t[1],y=h(d()),m=p.board?p.board:Wr((t[0]>>5)*t[1]),x=s.length,b=[],w=s.map((function(t,a,l){return t.text=c.call(this,t,a,l),t.font=e.call(this,t,a,l),t.style=f.call(this,t,a,l),t.weight=r.call(this,t,a,l),t.rotate=i.call(this,t,a,l),t.size=~~n.call(this,t,a,l),t.padding=o.call(this,t,a,l),t})).sort((function(t,e){return e.size-t.size})),F=-1,k=p.board?[{x:0,y:0},{x:a,y:v}]:null;function S(){for(var e=Date.now();Date.now()-e<u&&++F<x;){var n=w[F];n.x=a*(l()+.5)>>1,n.y=v*(l()+.5)>>1,Tr(y,n,w,F),n.hasText&&g(m,n,k)&&(b.push(n),k?p.hasImage||_r(k,n):k=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=t[0]>>1,n.y-=t[1]>>1)}p._tags=b,p._bounds=k}return S(),p},p.createMask=function(e){var n=document.createElement("canvas"),r=t[0],i=t[1];if(r&&i){var o=r>>5,a=Wr((r>>5)*i);n.width=r,n.height=i;var l=n.getContext("2d");l.drawImage(e,0,0,e.width,e.height,0,0,r,i);for(var s=l.getImageData(0,0,r,i).data,u=0;u<i;u++)for(var c=0;c<r;c++){var f=o*u+(c>>5),d=u*r+c<<2,h=s[d]>=250&&s[d+1]>=250&&s[d+2]>=250?1<<31-c%32:0;a[f]|=h}p.board=a,p.hasImage=!0}},p.timeInterval=function(t){u=null==t?1/0:t},p.words=function(t){s=t},p.size=function(e){t=[+e[0],+e[1]]},p.font=function(t){e=jr(t)},p.fontWeight=function(t){r=jr(t)},p.rotate=function(t){i=jr(t)},p.spiral=function(t){a=qr[t]||t},p.fontSize=function(t){n=jr(t)},p.padding=function(t){o=jr(t)},p.random=function(t){l=jr(t)},p}();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach((function(t){g(e[t])||n[t](e[t])})),n.words(t),e.imageMask&&n.createMask(e.imageMask);var r=n.start()._tags;r.forEach((function(t){t.x+=e.size[0]/2,t.y+=e.size[1]/2}));var i=e.size,o=i[0],a=i[1];return r.push({text:"",value:0,x:0,y:0,opacity:0}),r.push({text:"",value:0,x:o,y:a,opacity:0}),r}(t,e=E({},Ar,e))}var Dr=Math.PI/180,Er=2048;function Or(t){return t.text}function $r(){return"serif"}function zr(){return"normal"}function Cr(t){return t.value}function Pr(){return 90*~~(2*Math.random())}function Ir(){return 1}function Tr(t,e,n,r){if(!e.sprite){var i=t.context,o=t.ratio;i.clearRect(0,0,2048/o,Er/o);var a=0,l=0,s=0,u=n.length;for(--r;++r<u;){e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/o)+"px "+e.font;var c=i.measureText(e.text+"m").width*o,f=e.size<<1;if(e.rotate){var d=Math.sin(e.rotate*Dr),p=Math.cos(e.rotate*Dr),h=c*p,g=c*d,v=f*p,y=f*d;c=Math.max(Math.abs(h+y),Math.abs(h-y))+31>>5<<5,f=~~Math.max(Math.abs(g+v),Math.abs(g-v))}else c=c+31>>5<<5;if(f>s&&(s=f),a+c>=2048&&(a=0,l+=s,s=0),l+f>=Er)break;i.translate((a+(c>>1))/o,(l+(f>>1))/o),e.rotate&&i.rotate(e.rotate*Dr),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=c,e.height=f,e.xoff=a,e.yoff=l,e.x1=c>>1,e.y1=f>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,a+=c}for(var m=i.getImageData(0,0,2048/o,Er/o).data,x=[];--r>=0;)if((e=n[r]).hasText){for(var b=(c=e.width)>>5,w=(f=e.y1-e.y0,0);w<f*b;w++)x[w]=0;if(null==(a=e.xoff))return;l=e.yoff;for(var F=0,k=-1,S=0;S<f;S++){for(w=0;w<c;w++){var A=b*S+(w>>5),M=m[2048*(l+S)+(a+w)<<2]?1<<31-w%32:0;x[A]|=M,F|=M}F?k=S:(e.y0++,f--,S--,l++)}e.y1=e.y0+k,e.sprite=x.slice(0,(e.y1-e.y0)*b)}}}function Rr(t,e,n){n>>=5;for(var r,i=t.sprite,o=t.width>>5,a=t.x-(o<<4),l=127&a,s=32-l,u=t.y1-t.y0,c=(t.y+t.y0)*n+(a>>5),f=0;f<u;f++){r=0;for(var d=0;d<=o;d++)if((r<<s|(d<o?(r=i[f*o+d])>>>l:0))&e[c+d])return!0;c+=n}return!1}function _r(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function Lr(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function Br(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function Wr(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function Nr(){return document.createElement("canvas")}function jr(t){return o(t)?t:function(){return t}}var qr={archimedean:Br,rectangular:function(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}};function Gr(t){var e=t.options,n=t.chart,r=n,a=r.width,l=r.height,s=r.padding,u=r.appendPadding,c=r.ele,f=e.data,d=e.imageMask,p=e.wordField,h=e.weightField,g=e.colorField,v=e.wordStyle,y=e.timeInterval,m=e.random,x=e.spiral,b=e.autoFit,w=void 0===b||b,F=e.placementStrategy;if(!f||!f.length)return[];var k,S=v.fontFamily,A=v.fontWeight,M=v.padding,D=v.fontSize,E=function(t,e){return t.map((function(t){return t[e]})).filter((function(t){return"number"==typeof t&&!isNaN(t)}))}(f,h),O=[(k=E,Math.min.apply(Math,k)),Xr(E)],$=f.map((function(t){return{text:t[p],value:t[h],color:t[g],datum:t}})),z={imageMask:d,font:S,fontSize:Hr(D,O),fontWeight:A,size:Vr({width:a,height:l,padding:s,appendPadding:u,autoFit:w,container:c}),padding:M,timeInterval:y,random:m,spiral:x,rotate:Yr(e)};if(o(F)){var C=$.map((function(t,e,r){return i(i(i({},t),{hasText:!!t.text,font:jr(z.font)(t,e,r),weight:jr(z.fontWeight)(t,e,r),rotate:jr(z.rotate)(t,e,r),size:jr(z.fontSize)(t,e,r),style:"normal"}),F.call(n,t,e,r))}));return C.push({text:"",value:0,x:0,y:0,opacity:0}),C.push({text:"",value:0,x:z.size[0],y:z.size[1],opacity:0}),C}return Mr($,z)}function Vr(t){var e=t.width,n=t.height,r=t.container,i=t.autoFit,o=t.padding,a=t.appendPadding;if(i){var l=Ft(r);e=l.width,n=l.height}e=e||400,n=n||400;var s=function(t){var e=Yt(t.padding),n=Yt(t.appendPadding),r=e[0]+n[0],i=e[1]+n[1],o=e[2]+n[2],a=e[3]+n[3];return[r,i,o,a]}({padding:o,appendPadding:a}),u=s[0],c=s[1],f=s[2];return[e-(s[3]+c),n-(u+f)]}function Hr(t,e){if(o(t))return t;if(d(t)){var n=t[0],r=t[1];if(!e)return function(){return(r+n)/2};var i=e[0],a=e[1];return a===i?function(){return(r+n)/2}:function(t){var e=t.value;return(r-n)/(a-i)*(e-i)+n}}return function(){return t}}function Yr(t){var e=function(t){var e=t.wordStyle.rotationSteps;e<1&&(wt(xt.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),e=1);return{rotation:t.wordStyle.rotation,rotationSteps:e}}(t),n=e.rotation,r=e.rotationSteps;if(!d(n))return n;var i=n[0],o=n[1],a=1===r?0:(o-i)/(r-1);return function(){return o===i?o:Math.floor(Math.random()*r)*a}}function Xr(t){return Math.max.apply(Math,t)}var Zr=Rt({},we.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value","color"],formatter:function(t){return{name:t.text,value:t.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}});function Ur(t){var r=t.chart,i=t.options,a=i.colorField,l=i.color,s=Gr(t);return r.data(s),en(Rt({},t,{options:{xField:"x",yField:"y",seriesField:a&&"color",rawFields:o(l)&&e(n(i,"rawFields",[]),["datum"]),point:{color:l,shape:"word-cloud"}}})).ext.geometry.label(!1),r.coordinate().reflect("y"),r.axis(!1),t}function Kr(t){return vt(Ve({x:{nice:!1},y:{nice:!1}}))(t)}function Jr(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField;return!1===r?e.legend(!1):i&&e.legend("color",r),t}function Qr(t){vt(Ur,Kr,Le,Jr,Be,We,Ne,je)(t)}function ti(t){return{fontSize:t.data.size,text:t.data.text,textAlign:"center",fontFamily:t.data.font,fontWeight:t.data.weight,fill:t.color||t.defaultStyle.stroke,textBaseline:"alphabetic"}}function ei(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(s){i=!0,o=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ni(t,e,n,r){t=t.filter((function(t,r){var i=e(t,r),o=n(t,r);return null!=i&&isFinite(i)&&null!=o&&isFinite(o)})),r&&t.sort((function(t,n){return e(t)-e(n)}));for(var i,o,a,l=t.length,s=new Float64Array(l),u=new Float64Array(l),c=0,f=0,d=0;d<l;)a=t[d],s[d]=i=+e(a,d,t),u[d]=o=+n(a,d,t),c+=(i-c)/++d,f+=(o-f)/d;for(var p=0;p<l;++p)s[p]-=c,u[p]-=f;return[s,u,c,f]}function ri(t,e,n,r){for(var i=0,o=0,a=t.length;o<a;o++){var l=t[o],s=+e(l,o,t),u=+n(l,o,t);null!=s&&isFinite(s)&&null!=u&&isFinite(u)&&r(s,u,i++)}}function ii(t,e,n,r,i){var o=0,a=0;return ri(t,e,n,(function(t,e){var n=e-i(t),l=e-r;o+=n*n,a+=l*l})),1-o/a}function oi(t){return 180*Math.atan2(t[1][1]-t[0][1],t[1][0]-t[0][0])/Math.PI}function ai(t,e,n){for(var r=Math.log(e-t)*Math.LOG10E+1|0,i=1*Math.pow(10,-r/2-1),o=[l(t),l(e)],a=0;s(o)&&a<1e4;);return o;function l(t){return[t,n(t)]}function s(t){a++;for(var e,n=t.length,r=!1,o=0;o<n-1;o++){var s=t[o],u=t[o+1],c=[((e=[s,u])[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2],f=l(c[0]),d=oi([s,c]),p=oi([s,f]);Math.abs(d-p)>i&&(t.splice(o+1,0,f),r=!0)}return r}}function li(t,e,n,r){var i=r-t*t,o=Math.abs(i)<1e-24?0:(n-t*e)/i;return[e-o*t,o]}function si(){var t,e=function(t){return t[0]},n=function(t){return t[1]};function r(r){var i=0,o=0,a=0,l=0,s=0,u=t?+t[0]:1/0,c=t?+t[1]:-1/0;ri(r,e,n,(function(e,n){++i,o+=(e-o)/i,a+=(n-a)/i,l+=(e*n-l)/i,s+=(e*e-s)/i,t||(e<u&&(u=e),e>c&&(c=e))}));var f=ei(li(o,a,l,s),2),d=f[0],p=f[1],h=function(t){return p*t+d},g=[[u,h(u)],[c,h(c)]];return g.a=p,g.b=d,g.predict=h,g.rSquared=ii(r,e,n,a,h),g}return r.domain=function(e){return arguments.length?(t=e,r):t},r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r}function ui(t){t.sort((function(t,e){return t-e}));var e=t.length/2;return e%1==0?(t[e-1]+t[e])/2:t[Math.floor(e)]}lt("point","word-cloud",{draw:function(t,e){var n=t.x,r=t.y,o=e.addShape("text",{attrs:i(i({},ti(t)),{x:n,y:r})}),a=t.data.rotate;return"number"==typeof a&&tt.rotate(o,a*Math.PI/180),o}}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="word-cloud",e}p(e,t),e.getDefaultOptions=function(){return Zr},e.prototype.changeData=function(t){this.updateOption({data:t}),this.options.imageMask?this.render():this.chart.changeData(Gr({chart:this.chart,options:this.options}))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.render=function(){var e=this;return new Promise((function(n){var r=e.options.imageMask;if(!r)return t.prototype.render.call(e),void n();var o,l=function(r){e.options=i(i({},e.options),{imageMask:r||null}),t.prototype.render.call(e),n()};(o=r,new Promise((function(t,e){if(o instanceof HTMLImageElement)t(o);else{if(a(o)){var n=new Image;return n.crossOrigin="anonymous",n.src=o,n.onload=function(){t(n)},void(n.onerror=function(){wt(xt.ERROR,!1,"image %s load failed !!!",o),e()})}wt(xt.WARN,void 0===o,"The type of imageMask option must be String or HTMLImageElement."),e()}}))).then(l).catch(l)}))},e.prototype.getSchemaAdaptor=function(){return Qr},e.prototype.triggerResize=function(){var e=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout((function(){t.prototype.triggerResize.call(e)})))}}(we);function ci(t){return(t=1-t*t*t)*t*t}function fi(t,e,n){var r=t[e],i=n[0],o=n[1]+1;if(!(o>=t.length))for(;e>i&&t[o]-r<=r-t[i];)n[0]=++i,n[1]=o,++o}function di(){var t,e=function(t){return t[0]},n=function(t){return t[1]};function r(r){var i,o,a,l,s=ei(ni(r,e,n),4),u=s[0],c=s[1],f=s[2],d=s[3],p=u.length,h=0,g=0,v=0,y=0,m=0;for(i=0;i<p;)o=u[i],a=c[i++],h+=((l=o*o)-h)/i,g+=(l*o-g)/i,v+=(l*l-v)/i,y+=(o*a-y)/i,m+=(l*a-m)/i;var x=0,b=0,w=t?+t[0]:1/0,F=t?+t[1]:-1/0;ri(r,e,n,(function(e,n){b++,x+=(n-x)/b,t||(e<w&&(w=e),e>F&&(F=e))}));var k=v-h*h,S=h*k-g*g,A=(m*h-y*g)/S,M=(y*k-m*g)/S,D=-A*h,E=function(t){return A*(t-=f)*t+M*t+D+d},O=ai(w,F,E);return O.a=A,O.b=M-2*A*f,O.c=D-M*f+A*f*f+d,O.predict=E,O.rSquared=ii(r,e,n,x,E),O}return r.domain=function(e){return arguments.length?(t=e,r):t},r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r}var pi={exp:function(){var t,e=function(t){return t[0]},n=function(t){return t[1]};function r(r){var i=0,o=0,a=0,l=0,s=0,u=0,c=t?+t[0]:1/0,f=t?+t[1]:-1/0;ri(r,e,n,(function(e,n){var r=Math.log(n),d=e*n;++i,o+=(n-o)/i,l+=(d-l)/i,u+=(e*d-u)/i,a+=(n*r-a)/i,s+=(d*r-s)/i,t||(e<c&&(c=e),e>f&&(f=e))}));var d=ei(li(l/o,a/o,s/o,u/o),2),p=d[0],h=d[1];p=Math.exp(p);var g=function(t){return p*Math.exp(h*t)},v=ai(c,f,g);return v.a=p,v.b=h,v.predict=g,v.rSquared=ii(r,e,n,o,g),v}return r.domain=function(e){return arguments.length?(t=e,r):t},r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r},linear:si,loess:function(){var t=function(t){return t[0]},e=function(t){return t[1]},n=.3;function r(r){for(var i=ei(ni(r,t,e,!0),4),o=i[0],a=i[1],l=i[2],s=i[3],u=o.length,c=Math.max(2,~~(n*u)),f=new Float64Array(u),d=new Float64Array(u),p=new Float64Array(u).fill(1),h=-1;++h<=2;){for(var g=[0,c-1],v=0;v<u;++v){for(var y=o[v],m=g[0],x=g[1],b=y-o[m]>o[x]-y?m:x,w=0,F=0,k=0,S=0,A=0,M=1/Math.abs(o[b]-y||1),D=m;D<=x;++D){var E=o[D],O=a[D],$=ci(Math.abs(y-E)*M)*p[D],z=E*$;w+=$,F+=z,k+=O*$,S+=O*z,A+=E*z}var C=ei(li(F/w,k/w,S/w,A/w),2),P=C[0],I=C[1];f[v]=P+I*y,d[v]=Math.abs(a[v]-f[v]),fi(o,v+1,g)}if(2===h)break;var T=ui(d);if(Math.abs(T)<1e-12)break;for(var R,_,L=0;L<u;++L)R=d[L]/(6*T),p[L]=R>=1?1e-12:(_=1-R*R)*_}return function(t,e,n,r){for(var i,o=t.length,a=[],l=0,s=0,u=[];l<o;++l)i=t[l]+n,u[0]===i?u[1]+=(e[l]-u[1])/++s:(s=0,u[1]+=r,u=[i,e[l]],a.push(u));return u[1]+=r,a}(o,f,l,s)}return r.bandwidth=function(t){return arguments.length?(n=t,r):n},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(t){return arguments.length?(e=t,r):e},r},log:function(){var t,e=function(t){return t[0]},n=function(t){return t[1]},r=Math.E;function i(i){var o=0,a=0,l=0,s=0,u=0,c=t?+t[0]:1/0,f=t?+t[1]:-1/0,d=Math.log(r);ri(i,e,n,(function(e,n){var r=Math.log(e)/d;++o,a+=(r-a)/o,l+=(n-l)/o,s+=(r*n-s)/o,u+=(r*r-u)/o,t||(e<c&&(c=e),e>f&&(f=e))}));var p=ei(li(a,l,s,u),2),h=p[0],g=p[1],v=function(t){return g*Math.log(t)/d+h},y=ai(c,f,v);return y.a=g,y.b=h,y.predict=v,y.rSquared=ii(i,e,n,l,v),y}return i.domain=function(e){return arguments.length?(t=e,i):t},i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(t){return arguments.length?(n=t,i):n},i.base=function(t){return arguments.length?(r=t,i):r},i},poly:function(){var t,e=function(t){return t[0]},n=function(t){return t[1]},r=3;function i(i){if(1===r){var o=si().x(e).y(n).domain(t)(i);return o.coefficients=[o.b,o.a],delete o.a,delete o.b,o}if(2===r){var a=di().x(e).y(n).domain(t)(i);return a.coefficients=[a.c,a.b,a.a],delete a.a,delete a.b,delete a.c,a}var l,s,u,c,f,d=ei(ni(i,e,n),4),p=d[0],h=d[1],g=d[2],v=d[3],y=p.length,m=[],x=[],b=r+1,w=0,F=0,k=t?+t[0]:1/0,S=t?+t[1]:-1/0;for(ri(i,e,n,(function(e,n){++F,w+=(n-w)/F,t||(e<k&&(k=e),e>S&&(S=e))})),l=0;l<b;++l){for(u=0,c=0;u<y;++u)c+=Math.pow(p[u],l)*h[u];for(m.push(c),f=new Float64Array(b),s=0;s<b;++s){for(u=0,c=0;u<y;++u)c+=Math.pow(p[u],l+s);f[s]=c}x.push(f)}x.push(m);var A=function(t){var e,n,r,i,o,a=t.length-1,l=[];for(e=0;e<a;++e){for(i=e,n=e+1;n<a;++n)Math.abs(t[e][n])>Math.abs(t[e][i])&&(i=n);for(r=e;r<a+1;++r)o=t[r][e],t[r][e]=t[r][i],t[r][i]=o;for(n=e+1;n<a;++n)for(r=a;r>=e;r--)t[r][n]-=t[r][e]*t[e][n]/t[e][e]}for(n=a-1;n>=0;--n){for(o=0,r=n+1;r<a;++r)o+=t[r][n]*l[r];l[n]=(t[a][n]-o)/t[n][n]}return l}(x),M=function(t){t-=g;var e=v+A[0]+A[1]*t+A[2]*t*t;for(l=3;l<b;++l)e+=A[l]*Math.pow(t,l);return e},D=ai(k,S,M);return D.coefficients=function(t,e,n,r){var i,o,a,l,s=Array(t);for(i=0;i<t;++i)s[i]=0;for(i=t-1;i>=0;--i)for(a=e[i],l=1,s[i]+=a,o=1;o<=i;++o)l*=(i+1-o)/o,s[i-o]+=a*Math.pow(n,o)*l;return s[0]+=r,s}(b,A,-g,v),D.predict=M,D.rSquared=ii(i,e,n,w,M),D}return i.domain=function(e){return arguments.length?(t=e,i):t},i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(t){return arguments.length?(n=t,i):n},i.order=function(t){return arguments.length?(r=t,i):r},i},pow:function(){var t,e=function(t){return t[0]},n=function(t){return t[1]};function r(r){var i=0,o=0,a=0,l=0,s=0,u=0,c=t?+t[0]:1/0,f=t?+t[1]:-1/0;ri(r,e,n,(function(e,n){var r=Math.log(e),d=Math.log(n);++i,o+=(r-o)/i,a+=(d-a)/i,l+=(r*d-l)/i,s+=(r*r-s)/i,u+=(n-u)/i,t||(e<c&&(c=e),e>f&&(f=e))}));var d=ei(li(o,a,l,s),2),p=d[0],h=d[1];p=Math.exp(p);var g=function(t){return p*Math.pow(t,h)},v=ai(c,f,g);return v.a=p,v.b=h,v.predict=g,v.rSquared=ii(r,e,n,u,g),v}return r.domain=function(e){return arguments.length?(t=e,r):t},r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r},quad:di};var hi=function(t,e){var n=e.view,r=e.options,i=r.xField,o=r.yField,a=n.getScaleByField(i),l=n.getScaleByField(o);return function(t,e,n){var r=[],i=t[0],o=null;if(t.length<=2)return function(t,e){var n=[];if(t.length){n.push(["M",t[0].x,t[0].y]);for(var r=1,i=t.length;r<i;r+=1){var o=t[r];n.push(["L",o.x,o.y])}e&&n.push(["Z"])}return n}(t,e);for(var a=0,l=t.length;a<l;a++){var s=t[a];o&&o.x===s.x&&o.y===s.y||(r.push(s.x),r.push(s.y),o=s)}var u=$t(r,e,n||[[0,0],[1,1]]);return u.unshift(["M",i.x,i.y]),u}(t.map((function(t){return n.getCoordinate().convert({x:a.scale(t[0]),y:l.scale(t[1])})})),!1)};function gi(t){var e=t.data,r=void 0===e?[]:e,o=t.xField,a=t.yField;if(r.length){for(var l=!0,u=!0,c=r[0],f=void 0,d=1;d<r.length&&(f=r[d],c[o]!==f[o]&&(l=!1),c[a]!==f[a]&&(u=!1),l||u);d++)c=f;var p=[];l&&p.push(o),u&&p.push(a);var h=yt(function(t){var e,r=t.meta,o=void 0===r?{}:r,a=t.xField,l=t.yField,u=t.data,c=u[0][a],f=u[0][l],d=c>0,p=f>0;function h(t,e){var r=n(o,[t]);function i(t){return n(r,t)}var a={};return"x"===e?(s(c)&&(s(i("min"))||(a.min=d?0:2*c),s(i("max"))||(a.max=d?2*c:0)),a):(s(f)&&(s(i("min"))||(a.min=p?0:2*f),s(i("max"))||(a.max=p?2*f:0)),a)}return i(i({},o),((e={})[a]=i(i({},o[a]),h(a,"x")),e[l]=i(i({},o[l]),h(l,"y")),e))}(t),p);return Rt({},t,{meta:h})}return t}function vi(t){var e=t.chart,n=t.options,r=n.data,o=n.type,a=n.color,l=n.shape,u=n.pointStyle,c=n.shapeField,f=n.colorField,d=n.xField,p=n.yField,h=n.sizeField,g=n.size,v=n.tooltip;h&&(g||(g=[2,8]),s(g)&&(g=[g,g])),v&&!v.fields&&(v=i(i({},v),{fields:[d,p,f,h,c]})),e.data(r),en(Rt({},t,{options:{seriesField:f,point:{color:a,shape:l,size:g,style:u},tooltip:v}}));var y=kt(e,"point");return o&&y.adjust(o),t}function yi(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField,l=gi(n);return vt(Ve(((e={})[o]=r,e[a]=i,e)))(Rt({},t,{options:l}))}function mi(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return e.axis(o,r),e.axis(a,i),t}function xi(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,o=n.shapeField,a=n.sizeField,l=n.shapeLegend,s=n.sizeLegend,u=!1!==r;return i&&e.legend(i,!!u&&r),o&&(l?e.legend(o,l):e.legend(o,!1!==l&&r)),a&&e.legend(a,s||!1),u||l||s||e.legend(!1),t}function bi(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,o=kt(e,"point");if(r){var a=r.callback,l=y(r,["callback"]);o.label({fields:[i],callback:a,cfg:Ot(l)})}else o.label(!1);return t}function wi(t){var e=t.options.quadrant,n=[];if(e){var r=e.xBaseline,o=void 0===r?0:r,a=e.yBaseline,l=void 0===a?0:a,s=e.labels,u=e.regionStyle,c=e.lineStyle,f=function(t,e){var n=10;return{regionStyle:[{position:{start:[t,"max"],end:["max",e]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[t,e]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",e],end:[t,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[t,e],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",e],offsetX:-10,offsetY:-10,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",e],offsetX:n,offsetY:-10,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",e],offsetX:n,offsetY:n,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",e],offsetX:-10,offsetY:n,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]}}(o,l);new Array(4).join(",").split(",").forEach((function(t,e){n.push(i(i({type:"region",top:!1},f.regionStyle[e].position),{style:Rt({},f.regionStyle[e].style,null==u?void 0:u[e])}),i({type:"text",top:!0},Rt({},f.labelStyle[e],null==s?void 0:s[e])))})),n.push({type:"line",top:!1,start:["min",l],end:["max",l],style:Rt({},f.lineStyle,c)},{type:"line",top:!1,start:[o,"min"],end:[o,"max"],style:Rt({},f.lineStyle,c)})}return vt(He(n))(t)}function Fi(t){var e=t.options,n=t.chart,r=e.regressionLine;if(r){var o=r.style,a=r.top,l=void 0!==a&&a,s={stroke:"#9ba29a",lineWidth:2,opacity:.5};n.annotation().shape({top:l,render:function(t,r){var a=t.addGroup({id:n.id+"-regression-line",name:"regression-line-group"}),l=function(t){var e,n=t.options,r=n.xField,i=n.yField,o=n.data,a=n.regressionLine,l=a.type,s=void 0===l?"linear":l,u=a.algorithm;return e=u?d(u)?u:u(o):pi[s]().x((function(t){return t[r]})).y((function(t){return t[i]}))(o),hi(e,t)}({view:r,options:e});a.addShape("path",{name:"regression-line",attrs:i(i({path:l},s),o)})}})}return t}function ki(t){var e=t.chart,n=t.options.tooltip;return n?e.tooltip(n):!1===n&&e.tooltip(!1),t}function Si(t){return vt(vi,yi,mi,xi,ki,bi,Tn,qe,Ge,Be,wi,We,Ne,Fi)(t)}var Ai=Rt({},we.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});rt("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var Mi,Di,Ei,Oi,$i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.type="scatter",r.on(ot.BEFORE_RENDER,(function(t){var e,n,o=r,a=o.options,l=o.chart;if((null===(e=t.data)||void 0===e?void 0:e.source)===st.FILTER){var s=r.chart.filterData(r.chart.getData());yi({chart:l,options:i(i({},a),{data:s})})}(null===(n=t.data)||void 0===n?void 0:n.source)===st.RESET&&yi({chart:l,options:a})})),r}return p(e,t),e.getDefaultOptions=function(){return Ai},e.prototype.changeData=function(t){this.updateOption(gi(Rt({},this.options,{data:t})));var e=this.options;yi({chart:this.chart,options:e}),this.chart.changeData(t)},e.prototype.getSchemaAdaptor=function(){return Si},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e}(we);function zi(t){var e=t.chart,n=t.options,r=n.data,o=n.lineStyle,a=n.color,l=n.point,s=n.area;e.data(r);var u=Rt({},t,{options:{line:{style:o,color:a},point:l?i({color:a},l):l,area:s?i({color:a},s):s,label:void 0}}),c=Rt({},u,{options:{tooltip:!1}}),f=(null==l?void 0:l.state)||n.state,d=Rt({},u,{options:{tooltip:!1,state:f}});return tn(u),en(d),Qe(c),t}function Ci(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return vt(Ve(((e={})[o]=r,e[a]=i,e)))(t)}function Pi(t){var e=t.chart,n=t.options,r=n.radius,i=n.startAngle,o=n.endAngle;return e.coordinate("polar",{radius:r,startAngle:i,endAngle:o}),t}function Ii(t){var e=t.chart,n=t.options,r=n.xField,i=n.xAxis,o=n.yField,a=n.yAxis;return e.axis(r,i),e.axis(o,a),t}function Ti(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,o=kt(e,"line");if(r){var a=r.callback,l=y(r,["callback"]);o.label({fields:[i],callback:a,cfg:Ot(l)})}else o.label(!1);return t}function Ri(t){return vt(zi,Ci,Ne,Pi,Ii,_e,Le,Ti,Be,We,He())(t)}ct("radar-tooltip",function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),e.prototype.getTooltipItems=function(e){var n=this.getTooltipCfg(),r=n.shared,o=n.title,a=t.prototype.getTooltipItems.call(this,e);if(a.length>0){var l=this.view.geometries[0],s=l.dataArray,u=a[0].name,c=[];return s.forEach((function(t){t.forEach((function(t){var e=tt.getTooltipItems(t,l)[0];if(!r&&e&&e.name===u){var n=g(o)?u:o;c.push(i(i({},e),{name:e.title,title:n}))}else if(r&&e){n=g(o)?e.name||u:o;c.push(i(i({},e),{name:e.title,title:n}))}}))})),c}return[]},e}(ut)),it("radar-tooltip",function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.init=function(){this.context.view.removeInteraction("tooltip")},e.prototype.show=function(){var t=this.context.event;this.getTooltipController().showTooltip({x:t.x,y:t.y})},e.prototype.hide=function(){this.getTooltipController().hideTooltip()},e.prototype.getTooltipController=function(){return this.context.view.getController("radar-tooltip")},e}(nt)),rt("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="radar",e}p(e,t),e.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return Rt({},t.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},e.prototype.getSchemaAdaptor=function(){return Ri}}(we),(Di=Mi||(Mi={})).Left="Left",Di.Right="Right",(Oi=Ei||(Ei={})).Line="line",Oi.Column="column";var _i={nice:!0,label:{autoHide:!0,autoRotate:!1}},Li=i(i({},_i),{position:"left"}),Bi=i(i({},_i),{position:"right",grid:null});function Wi(t){return n(t,"geometry")===Ei.Line}function Ni(t){return n(t,"geometry")===Ei.Column}function ji(t,e,n){return Ni(n)?Rt({},{geometry:Ei.Column,label:n.label&&n.isRange?{content:function(t){var n;return null===(n=t[e])||void 0===n?void 0:n.join("-")}}:void 0},n):i({geometry:Ei.Line},n)}function qi(t,e){var r=t[0],i=t[1];return d(e)?[e[0],e[1]]:[n(e,r),n(e,i)]}function Gi(t,e){return e===Mi.Left?!1!==t&&Rt({},Li,t):e===Mi.Right?!1!==t&&Rt({},Bi,t):t}function Vi(e){var r=e.view,i=e.geometryOption,a=e.yField,l=e.legend,s=n(l,"marker"),u=kt(r,Wi(i)?"line":"interval");if(!i.seriesField){var c=n(r,"options.scales."+a+".alias")||a,f=u.getAttribute("color"),d=r.getTheme().defaultColor;return f&&(d=tt.getMappingValue(f,c,n(f,["values",0],d))),[{value:a,name:c,marker:(o(s)?s:!v(s)&&Rt({},{style:{stroke:d,fill:d}},s))||(Wi(i)?{symbol:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},style:{lineWidth:2,r:6,stroke:d}}:{symbol:"square",style:{fill:d}}),isGeometry:!0,viewId:r.id}]}var p=u.getGroupAttributes();return t(p,(function(t,e){var n=tt.getLegendItems(r,u,e,r.getTheme(),s);return t.concat(n)}),[])}var Hi=function(t,e){var n=e[0],r=e[1],i=t.getOptions().data,o=t.getXScale(),a=O(i);if(o&&a){var l=$(i,o.field),s=O(l),u=Math.floor(n*(s-1)),c=Math.floor(r*(s-1));t.filter(o.field,(function(t){var e=l.indexOf(t);return!(e>-1)||function(t,e,n){var r=Math.min(e,n),i=Math.max(e,n);return t>=r&&t<=i}(e,u,c)})),t.getRootView().render(!0)}};function Yi(t){var e,n=t.options,r=n.geometryOptions,i=void 0===r?[]:r,o=n.xField,a=n.yField,l=A(i,(function(t){var e=t.geometry;return e===Ei.Line||void 0===e}));return Rt({},{options:{geometryOptions:[],meta:(e={},e[o]={type:"cat",sync:!0,range:l?[0,1]:void 0},e),tooltip:{showMarkers:l,showCrosshairs:l,shared:!0,crosshairs:{type:"x"}},interactions:l?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},t,{options:{yAxis:qi(a,n.yAxis),geometryOptions:[ji(0,a[0],i[0]),ji(0,a[1],i[1])],annotations:qi(a,n.annotations)}})}function Xi(t){var e,n,r=t.chart,i=t.options.geometryOptions,o={line:0,column:1};return[{type:null===(e=i[0])||void 0===e?void 0:e.geometry,id:"left-axes-view"},{type:null===(n=i[1])||void 0===n?void 0:n.geometry,id:"right-axes-view"}].sort((function(t,e){return-o[t.type]+o[e.type]})).forEach((function(t){return r.createView({id:t.id})})),t}function Zi(t){var e=t.chart,n=t.options,r=n.xField,o=n.yField,a=n.geometryOptions,s=n.data,u=n.tooltip;return[i(i({},a[0]),{id:"left-axes-view",data:s[0],yField:o[0]}),i(i({},a[1]),{id:"right-axes-view",data:s[1],yField:o[1]})].forEach((function(t){var n=t.id,o=t.data,a=t.yField,s=Ni(t)&&t.isPercent,c=s?yn(o,a,r,a):o,f=Mt(e,n).data(c),d=s?i({formatter:function(e){return{name:e[t.seriesField]||a,value:(100*Number(e[a])).toFixed(2)+"%"}}},u):u;!function(t){var e=t.options,n=t.chart,r=e.geometryOption,o=r.isStack,a=r.color,s=r.seriesField,u=r.groupField,c=r.isGroup,f=["xField","yField"];if(Wi(r)){tn(Rt({},t,{options:i(i(i({},yt(e,f)),r),{line:{color:r.color,style:r.lineStyle}})})),en(Rt({},t,{options:i(i(i({},yt(e,f)),r),{point:r.point&&i({color:a,shape:"circle"},r.point)})}));var d=[];c&&d.push({type:"dodge",dodgeBy:u||s,customOffset:0}),o&&d.push({type:"stack"}),d.length&&l(n.geometries,(function(t){t.adjust(d)}))}Ni(r)&&qn(Rt({},t,{options:i(i(i({},yt(e,f)),r),{widthRatio:r.columnWidthRatio,interval:i(i({},yt(r,["color"])),{style:r.columnStyle})})}))}({chart:f,options:{xField:r,yField:a,tooltip:d,geometryOption:t}})})),t}function Ui(t){var e,r=t.chart,i=t.options.geometryOptions,o=(null===(e=r.getTheme())||void 0===e?void 0:e.colors10)||[],a=0;return r.once("beforepaint",(function(){l(i,(function(t,e){var i=Mt(r,0===e?"left-axes-view":"right-axes-view");if(!t.color){var l=i.getGroupScales(),s=n(l,[0,"values","length"],1),u=o.slice(a,a+s).concat(0===e?[]:o);i.geometries.forEach((function(e){t.seriesField?e.color(t.seriesField,u):e.color(u[0])})),a+=s}})),r.render(!0)})),t}function Ki(t){var e,n,r=t.chart,i=t.options,o=i.xAxis,a=i.yAxis,l=i.xField,s=i.yField;return Ve(((e={})[l]=o,e[s[0]]=a[0],e))(Rt({},t,{chart:Mt(r,"left-axes-view")})),Ve(((n={})[l]=o,n[s[1]]=a[1],n))(Rt({},t,{chart:Mt(r,"right-axes-view")})),t}function Ji(t){var e=t.chart,n=t.options,r=Mt(e,"left-axes-view"),i=Mt(e,"right-axes-view"),o=n.xField,a=n.yField,l=n.xAxis,s=n.yAxis;return e.axis(o,!1),e.axis(a[0],!1),e.axis(a[1],!1),r.axis(o,l),r.axis(a[0],Gi(s[0],Mi.Left)),i.axis(o,!1),i.axis(a[1],Gi(s[1],Mi.Right)),t}function Qi(t){var e=t.chart,n=t.options.tooltip,r=Mt(e,"left-axes-view"),i=Mt(e,"right-axes-view");return e.tooltip(n),r.tooltip({shared:!0}),i.tooltip({shared:!0}),t}function to(t){var e=t.chart;return Be(Rt({},t,{chart:Mt(e,"left-axes-view")})),Be(Rt({},t,{chart:Mt(e,"right-axes-view")})),t}function eo(t){var e=t.chart,r=t.options.annotations,i=n(r,[0]),o=n(r,[1]);return He(i)(Rt({},t,{chart:Mt(e,"left-axes-view"),options:{annotations:i}})),He(o)(Rt({},t,{chart:Mt(e,"right-axes-view"),options:{annotations:o}})),t}function no(t){var e=t.chart;return Ne(Rt({},t,{chart:Mt(e,"left-axes-view")})),Ne(Rt({},t,{chart:Mt(e,"right-axes-view")})),Ne(t),t}function ro(t){var e=t.chart;return We(Rt({},t,{chart:Mt(e,"left-axes-view")})),We(Rt({},t,{chart:Mt(e,"right-axes-view")})),t}function io(t){var e=t.chart,n=t.options.yAxis;return Ye(Rt({},t,{chart:Mt(e,"left-axes-view"),options:{yAxis:n[0]}})),Ye(Rt({},t,{chart:Mt(e,"right-axes-view"),options:{yAxis:n[1]}})),t}function oo(t){var e=t.chart,r=t.options,i=r.legend,o=r.geometryOptions,a=r.yField,s=r.data,u=Mt(e,"left-axes-view"),c=Mt(e,"right-axes-view");if(!1===i)e.legend(!1);else if(h(i)&&!0===i.custom)e.legend(i);else{var f=n(o,[0,"legend"],i),d=n(o,[1,"legend"],i);e.once("beforepaint",(function(){var t=s[0].length?Vi({view:u,geometryOption:o[0],yField:a[0],legend:f}):[],n=s[1].length?Vi({view:c,geometryOption:o[1],yField:a[1],legend:d}):[];e.legend(Rt({},i,{custom:!0,items:t.concat(n)}))})),o[0].seriesField&&u.legend(o[0].seriesField,f),o[1].seriesField&&c.legend(o[1].seriesField,d),e.on("legend-item:click",(function(t){var r=n(t,"gEvent.delegateObject",{});if(r&&r.item){var i=r.item,o=i.value,s=i.isGeometry,u=i.viewId;if(s){if(b(a,(function(t){return t===o}))>-1){var c=n(Mt(e,u),"geometries");l(c,(function(t){t.changeVisible(!r.item.unchecked)}))}}else{var f=n(e.getController("legend"),"option.items",[]);l(e.views,(function(t){var n=t.getGroupScales();l(n,(function(e){e.values&&e.values.indexOf(o)>-1&&t.filter(e.field,(function(t){return!k(f,(function(e){return e.value===t})).unchecked}))})),e.render(!0)}))}}}))}return t}function ao(t){var e=t.chart,n=t.options.slider,r=Mt(e,"left-axes-view"),i=Mt(e,"right-axes-view");return n&&(r.option("slider",n),r.on("slider:valuechanged",(function(t){var e=t.event,n=e.value,r=e.originValue;M(n,r)||Hi(i,n)})),e.once("afterpaint",(function(){if(!z(n)){var t=n.start,e=n.end;(t||e)&&Hi(i,[t,e])}}))),t}function lo(t){return vt(Yi,Xi,no,Zi,Ki,Ji,io,Qi,to,eo,ro,Ui,oo,ao)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dual-axes",e}p(e,t),e.prototype.getDefaultOptions=function(){return Rt({},t.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},e.prototype.getSchemaAdaptor=function(){return lo}}(we);var so={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(t,e){return""+n(e,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},uo={appendPadding:2,tooltip:i({},so),animation:{}};function co(t){return w(t||[],(function(t,e){return{x:""+e,y:t}}))}function fo(t){var e=t.chart,n=t.options,r=n.data,i=n.color,o=n.areaStyle,a=n.point,l=n.line,s=null==a?void 0:a.state,u=co(r);e.data(u);var c=Rt({},t,{options:{xField:"x",yField:"y",area:{color:i,style:o},line:l,point:a}}),f=Rt({},c,{options:{tooltip:!1}}),d=Rt({},c,{options:{tooltip:!1,state:s}});return Qe(c),tn(f),en(d),e.axis(!1),e.legend(!1),t}function po(t){var e,n,r=t.options,i=r.xAxis,o=r.yAxis,a=co(r.data);return vt(Ve(((e={}).x=i,e.y=o,e),((n={}).x={type:"cat"},n.y=Gt(a,"y"),n)))(t)}function ho(t){return vt(Re("areaStyle"),fo,po,Le,Ne,We,He())(t)}function go(t){var e=t.chart,n=t.options,r=n.data,i=n.color,o=n.lineStyle,a=n.point,l=null==a?void 0:a.state,s=co(r);e.data(s);var u=Rt({},t,{options:{xField:"x",yField:"y",line:{color:i,style:o},point:a}}),c=Rt({},u,{options:{tooltip:!1,state:l}});return tn(u),en(c),e.axis(!1),e.legend(!1),t}function vo(t){return vt(go,po,Ne,Le,We,He())(t)}var yo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="tiny-line",e}return p(e,t),e.getDefaultOptions=function(){return uo},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.chart;po({chart:e,options:this.options}),e.changeData(co(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return vo},e}(we);function mo(t){var e=t.chart,n=t.options,r=n.data,i=n.color,o=n.columnStyle,a=n.columnWidthRatio,l=co(r);return e.data(l),nn(Rt({},t,{options:{xField:"x",yField:"y",widthRatio:a,interval:{style:o,color:i}}})),e.axis(!1),e.legend(!1),e.interaction("element-active"),t}function xo(t){return vt(Ne,Re("columnStyle"),mo,po,Le,We,He())(t)}var bo={appendPadding:2,tooltip:i({},{showTitle:!1,shared:!0,showMarkers:!1,customContent:function(t,e){return""+n(e,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}}),animation:{}},wo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="tiny-column",e}return p(e,t),e.getDefaultOptions=function(){return bo},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.chart;po({chart:e,options:this.options}),e.changeData(co(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return xo},e}(we),Fo={appendPadding:2,tooltip:i({},so),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},ko=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="tiny-area",e}return p(e,t),e.getDefaultOptions=function(){return Fo},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.chart;po({chart:e,options:this.options}),e.changeData(co(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return ho},e}(we);function So(t,e,n){if(1===n)return[0,e];var r=Math.floor(t/e);return[e*r,e*(r+1)]}function Ao(t,e,n,r,i){var o=C(t);P(o,e);var a=$(o,e),s=I(a),u=s.max-s.min,c=n;if(!n&&r&&(c=r>1?u/(r-1):s.max),!n&&!r){var f=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}(a);c=u/f}var d={},p=T(o,i);v(p)?l(o,(function(t){var n=So(t[e],c,r),i=n[0]+"-"+n[1];R(d,i)||(d[i]={range:n,count:0}),d[i].count+=1})):Object.keys(p).forEach((function(t){l(p[t],(function(n){var o=So(n[e],c,r),a=o[0]+"-"+o[1]+"-"+t;R(d,a)||(d[a]={range:o,count:0},d[a][i]=t),d[a].count+=1}))}));var h=[];return l(d,(function(t){h.push(t)})),h}var Mo=Rt({},we.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function Do(t){var e=t.chart,n=t.options,r=n.data,i=n.binField,o=n.binNumber,a=n.binWidth,l=n.color,s=n.stackField,u=n.legend,c=n.columnStyle,f=Ao(r,i,a,o,s);return e.data(f),nn(Rt({},t,{options:{xField:"range",yField:"count",seriesField:s,isStack:!0,interval:{color:l,style:c}}})),u&&s&&e.legend(s,u),t}function Eo(t){var e,n=t.options,r=n.xAxis,i=n.yAxis;return vt(Ve(((e={}).range=r,e.count=i,e)))(t)}function Oo(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis;return!1===r?e.axis("range",!1):e.axis("range",r),!1===i?e.axis("count",!1):e.axis("count",i),t}function $o(t){var e=t.chart,n=t.options.label,r=kt(e,"interval");if(n){var i=n.callback,o=y(n,["callback"]);r.label({fields:["count"],callback:i,cfg:Ot(o)})}else r.label(!1);return t}function zo(t){return vt(Ne,Re("columnStyle"),Do,Eo,Oo,je,$o,Le,Be,We)(t)}var Co=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="histogram",e}return p(e,t),e.getDefaultOptions=function(){return Mo},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options,n=e.binField,r=e.binNumber,i=e.binWidth,o=e.stackField;this.chart.changeData(Ao(t,n,i,r,o))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return zo},e}(we),Po=["#FAAD14","#E8EDF3"],Io={percent:.2,color:Po,animation:{}};function To(t){var e=_(qt(t)?t:0,0,1);return[{type:"current",percent:e},{type:"target",percent:1-e}]}function Ro(t){var e=t.chart,n=t.options,r=n.percent,i=n.progressStyle,o=n.color,l=n.barWidthRatio;return e.data(To(r)),nn(Rt({},t,{options:{xField:"1",yField:"percent",seriesField:"type",isStack:!0,widthRatio:l,interval:{style:i,color:a(o)?[o,Po[1]]:o},args:{zIndexReversed:!0,sortZIndex:!0}}})),e.tooltip(!1),e.axis(!1),e.legend(!1),t}function _o(t){return t.chart.coordinate("rect").transpose(),t}function Lo(t){return vt(Ro,Ve({}),_o,We,Ne,He())(t)}var Bo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="process",e}return p(e,t),e.getDefaultOptions=function(){return Io},e.prototype.changeData=function(t){this.updateOption({percent:t}),this.chart.changeData(To(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Lo},e}(we);function Wo(t){var e=t.chart,n=t.options,r=n.innerRadius,i=n.radius;return e.coordinate("theta",{innerRadius:r,radius:i}),t}function No(t,e){var r=t.chart,o=t.options,a=o.innerRadius,l=o.statistic,s=o.percent,u=o.meta;if(r.getController("annotation").clear(!0),a&&l){var c=n(u,["percent","formatter"])||function(t){return(100*t).toFixed(2)+"%"},f=l.content;f&&(f=Rt({},f,{content:g(f.content)?c(s):f.content})),Nt(r,{statistic:i(i({},l),{content:f}),plotType:"ring-progress"},{percent:s})}return e&&r.render(!0),t}function jo(t){return vt(Ro,Ve({}),Wo,No,We,Ne,He())(t)}var qo={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},Go=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="ring-process",e}return p(e,t),e.getDefaultOptions=function(){return qo},e.prototype.changeData=function(t){this.chart.emit(ot.BEFORE_CHANGE_DATA,at.fromData(this.chart,ot.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(To(t)),No({chart:this.chart,options:this.options},!0),this.chart.emit(ot.AFTER_CHANGE_DATA,at.fromData(this.chart,ot.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return jo},e}(we);function Vo(t){var e=t.chart,r=t.options,i=r.data,o=r.type,a=r.xField,l=r.yField,s=r.colorField,u=r.sizeField,c=r.sizeRatio,f=r.shape,d=r.color,p=r.tooltip,h=r.heatmapStyle;e.data(i);var g="polygon";"density"===o&&(g="heatmap");var v=Ze(p,[a,l,s]),y=v.fields,m=v.formatter,x=1;return(c||0===c)&&(f||u)&&(c<0||c>1||(x=c)),Je(Rt({},t,{options:{type:g,colorField:s,tooltipFields:y,shapeField:u||"",label:void 0,mapping:{tooltip:m,shape:f&&(u?function(t){var e=i.map((function(t){return t[u]})),r=Math.min.apply(Math,e),o=Math.max.apply(Math,e);return[f,(n(t,u)-r)/(o-r),x]}:function(){return[f,1,x]}),color:d||s&&e.getTheme().sequenceColors.join("-"),style:h}}})),t}function Ho(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return vt(Ve(((e={})[o]=r,e[a]=i,e)))(t)}function Yo(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return!1===r?e.axis(o,!1):e.axis(o,r),!1===i?e.axis(a,!1):e.axis(a,i),t}function Xo(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,o=n.sizeField,a=n.sizeLegend,l=!1!==r;return i&&e.legend(i,!!l&&r),o&&e.legend(o,void 0===a?r:a),l||a||e.legend(!1),t}function Zo(t){var e=t.chart,n=t.options,r=n.label,i=n.colorField,o=kt(e,"density"===n.type?"heatmap":"polygon");if(r){if(i){var a=r.callback,l=y(r,["callback"]);o.label({fields:[i],callback:a,cfg:Ot(l)})}}else o.label(!1);return t}function Uo(t){var e=t.chart,n=t.options,r=n.coordinate,i=n.reflect;return r&&e.coordinate({type:r.type||"rect",cfg:r.cfg}),i&&e.coordinate().reflect(i),t}function Ko(t){return vt(Ne,Re("heatmapStyle"),Ho,Uo,Vo,Yo,Xo,Le,Zo,He(),Be,We,je)(t)}var Jo,Qo=Rt({},we.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});lt("polygon","circle",{draw:function(t,e){var n,r,o=t.x,a=t.y,l=this.parsePoints(t.points),s=Math.abs(l[2].x-l[1].x),u=Math.abs(l[1].y-l[0].y),c=Math.min(s,u)/2,f=Number(t.shape[1]),d=Number(t.shape[2]),p=c*Math.sqrt(d)*Math.sqrt(f),h=(null===(n=t.style)||void 0===n?void 0:n.fill)||t.color||(null===(r=t.defaultStyle)||void 0===r?void 0:r.fill);return e.addShape("circle",{attrs:i(i(i({x:o,y:a,r:p},t.defaultStyle),t.style),{fill:h})})}}),lt("polygon","square",{draw:function(t,e){var n,r,o=t.x,a=t.y,l=this.parsePoints(t.points),s=Math.abs(l[2].x-l[1].x),u=Math.abs(l[1].y-l[0].y),c=Math.min(s,u),f=Number(t.shape[1]),d=Number(t.shape[2]),p=c*Math.sqrt(d)*Math.sqrt(f),h=(null===(n=t.style)||void 0===n?void 0:n.fill)||t.color||(null===(r=t.defaultStyle)||void 0===r?void 0:r.fill);return e.addShape("rect",{attrs:i(i(i({x:o-p/2,y:a-p/2,width:p,height:p},t.defaultStyle),t.style),{fill:h})})}}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="heatmap",e}p(e,t),e.getDefaultOptions=function(){return Qo},e.prototype.getSchemaAdaptor=function(){return Ko},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()}}(we);var ta=Rt({},we.getDefaultOptions(),{meta:(Jo={},Jo.$$range$$={min:0,alias:"low-q1-median-q3-high"},Jo),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),ea=function(t,e){var n=t;if(Array.isArray(e)){var r=e[0],i=e[1],o=e[2],a=e[3],l=e[4];n=w(t,(function(t){return t.$$range$$=[t[r],t[i],t[o],t[a],t[l]],t}))}return n};function na(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,o=n.groupField,a=n.color,l=n.tooltip,s=n.boxStyle;e.data(ea(n.data,i));var u=d(i)?"$$range$$":i,c=i?d(i)?i:[i]:[],f=l;!1!==f&&(f=Rt({},{fields:d(i)?i:[]},f));var p=an(Rt({},t,{options:{xField:r,yField:u,seriesField:o,tooltip:f,rawFields:c,label:!1,schema:{shape:"box",color:a,style:s}}})).ext;return o&&p.geometry.adjust("dodge"),t}function ra(t){var e=t.chart,n=t.options,r=n.xField,o=n.data,a=n.outliersField,l=n.outliersStyle,s=n.padding,u=n.label;if(!a)return t;var c=e.createView({padding:s,id:"outliers_view"}),f=o.reduce((function(t,e){return e[a].forEach((function(n){var r;return t.push(i(i({},e),((r={})[a]=n,r)))})),t}),[]);return c.data(f),en({chart:c,options:{xField:r,yField:a,point:{shape:"circle",style:l},label:u}}),c.axis(!1),t}function ia(t){var e,n,r=t.chart,i=t.options,o=i.meta,a=i.xAxis,l=i.yAxis,s=i.xField,u=i.yField,c=i.outliersField,f=Array.isArray(u)?"$$range$$":u,d={};if(c){var p="$$y_outliers$$";(e={})[c]={sync:p,nice:!0},e[f]={sync:p,nice:!0},d=e}var h=Rt(d,o,((n={})[s]=yt(a,Fe),n[f]=yt(l,Fe),n));return r.scale(h),t}function oa(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField,l=Array.isArray(a)?"$$range$$":a;return!1===r?e.axis(o,!1):e.axis(o,r),!1===i?e.axis("$$range$$",!1):e.axis(l,i),t}function aa(t){var e=t.chart,n=t.options,r=n.legend,i=n.groupField;return i?r?e.legend(i,r):e.legend(i,{position:"bottom"}):e.legend(!1),t}function la(t){return vt(na,ra,ia,oa,aa,Le,Be,We,Ne)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="box",e}p(e,t),e.getDefaultOptions=function(){return ta},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options.yField,n=this.chart.views.find((function(t){return"outliers_view"===t.id}));n&&n.data(t),this.chart.changeData(ea(t,e))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return la}}(we);var sa,ua,ca={exports:{}},fa={exports:{}};ua=(sa=fa).exports,sa.exports.isNumber=function(t){return"number"==typeof t},sa.exports.findMin=function(t){if(0===t.length)return 1/0;for(var e=t[0],n=1;n<t.length;n++)e=Math.min(e,t[n]);return e},sa.exports.findMax=function(t){if(0===t.length)return-1/0;for(var e=t[0],n=1;n<t.length;n++)e=Math.max(e,t[n]);return e},sa.exports.findMinMulti=function(t){for(var e=ua.findMin(t[0]),n=1;n<t.length;n++)e=Math.min(e,ua.findMin(t[n]));return e},sa.exports.findMaxMulti=function(t){for(var e=ua.findMax(t[0]),n=1;n<t.length;n++)e=Math.max(e,ua.findMax(t[n]));return e},sa.exports.inside=function(t,e,n){return t<=n&&n<=e},function(t){var e=Math.log(2),n=t.exports,r=fa.exports;function i(t){return 1-Math.abs(t)}t.exports.getUnifiedMinMax=function(t,e){return n.getUnifiedMinMaxMulti([t],e)},t.exports.getUnifiedMinMaxMulti=function(t,e){e=e||{};var n=!1,i=!1,o=r.isNumber(e.width)?e.width:2,a=r.isNumber(e.size)?e.size:50,l=r.isNumber(e.min)?e.min:(n=!0,r.findMinMulti(t)),s=r.isNumber(e.max)?e.max:(i=!0,r.findMaxMulti(t)),u=(s-l)/(a-1);return n&&(l-=2*o*u),i&&(s+=2*o*u),{min:l,max:s}},t.exports.create=function(t,e){if(e=e||{},!t||0===t.length)return[];var o=r.isNumber(e.size)?e.size:50,a=r.isNumber(e.width)?e.width:2,l=n.getUnifiedMinMax(t,{size:o,width:a,min:e.min,max:e.max}),s=l.min,u=l.max-s,c=u/(o-1);if(0===u)return[{x:s,y:1}];for(var f=[],d=0;d<o;d++)f.push({x:s+d*c,y:0});var p=function(t,e){for(var n={},r=0,i=-e;i<=e;i++)r+=t(i/e),n[i]=r;return n}(i,a),h=p[a],g=p[a-1]-p[a-2],v=0;t.forEach((function(t){var e=function(t){return Math.floor((t-s)/c)}(t);if(!(e+a<0||e-a>=f.length)){var n=Math.max(e-a,0),i=e,o=Math.min(e+a,f.length-1),l=n-(e-a),u=e+a-o,d=p[-a-1+l]||0,y=p[-a-1+u]||0,m=h/(h-d-y);l>0&&(v+=m*(l-1)*g);var x=Math.max(0,e-a+1);r.inside(0,f.length-1,x)&&(f[x].y+=1*m*g),r.inside(0,f.length-1,i+1)&&(f[i+1].y-=2*m*g),r.inside(0,f.length-1,o+1)&&(f[o+1].y+=1*m*g)}}));var y=v,m=0,x=0;return f.forEach((function(t){m+=t.y,y+=m,t.y=y,x+=y})),x>0&&f.forEach((function(t){t.y/=x})),f},t.exports.getExpectedValueFromPdf=function(t){if(t&&0!==t.length){var e=0;return t.forEach((function(t){e+=t.x*t.y})),e}},t.exports.getXWithLeftTailArea=function(t,e){if(t&&0!==t.length){for(var n=0,r=0,i=0;i<t.length&&(r=i,!((n+=t[i].y)>=e));i++);return t[r].x}},t.exports.getPerplexity=function(t){if(t&&0!==t.length){var n=0;return t.forEach((function(t){var e=Math.log(t.y);isFinite(e)&&(n+=t.y*e)})),n=-n/e,Math.pow(2,n)}}}(ca);var da=ca.exports;function pa(t,e){var n=t.length*e;if(0===t.length)throw new Error("quantile requires at least one data point.");if(e<0||e>1)throw new Error("quantiles must be between 0 and 1");return 1===e?t[t.length-1]:0===e?t[0]:n%1!=0?t[Math.ceil(n)-1]:t.length%2==0?(t[n-1]+t[n])/2:t[n]}function ha(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function ga(t,e,n,r){for(n=n||0,r=r||t.length-1;r>n;){if(r-n>600){var i=r-n+1,o=e-n+1,a=Math.log(i),l=.5*Math.exp(2*a/3),s=.5*Math.sqrt(a*l*(i-l)/i);o-i/2<0&&(s*=-1),ga(t,e,Math.max(n,Math.floor(e-o*l/i+s)),Math.min(r,Math.floor(e+(i-o)*l/i+s)))}var u=t[e],c=n,f=r;for(ha(t,n,e),t[r]>u&&ha(t,n,r);c<f;){for(ha(t,c,f),c++,f--;t[c]<u;)c++;for(;t[f]>u;)f--}t[n]===u?ha(t,n,f):ha(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}}function va(t,e){var n=t.slice();if(Array.isArray(e)){!function(t,e){for(var n=[0],r=0;r<e.length;r++)n.push(xa(t.length,e[r]));n.push(t.length-1),n.sort(ma);var i=[0,n.length-1];for(;i.length;){var o=Math.ceil(i.pop()),a=Math.floor(i.pop());if(!(o-a<=1)){var l=Math.floor((a+o)/2);ya(t,n[l],Math.floor(n[a]),Math.ceil(n[o])),i.push(a,l,l,o)}}}(n,e);for(var r=[],i=0;i<e.length;i++)r[i]=pa(n,e[i]);return r}return ya(n,xa(n.length,e),0,n.length-1),pa(n,e)}function ya(t,e,n,r){e%1==0?ga(t,e,n,r):(ga(t,e=Math.floor(e),n,r),ga(t,e+1,e+1,r))}function ma(t,e){return t-e}function xa(t,e){var n=t*e;return 1===e?t-1:0===e?0:n%1!=0?Math.ceil(n)-1:t%2==0?n-.5:n}var ba=function(t){return{low:L(t),high:B(t),q1:va(t,.25),q3:va(t,.75),median:va(t,[.5]),minMax:[L(t),B(t)],quantile:[va(t,.25),va(t,.75)]}},wa=function(t,e){var n=da.create(t,e);return{violinSize:n.map((function(t){return t.y})),violinY:n.map((function(t){return t.x}))}},Fa=function(t){var e=t.xField,n=t.yField,r=t.seriesField,o=t.data,a=t.kde,l={min:a.min,max:a.max,size:a.sampleSize,width:a.width};if(!r){var s=T(o,e);return Object.keys(s).map((function(t){var e=s[t].map((function(t){return t[n]}));return i(i({x:t},wa(e,l)),ba(e))}))}var u=[],c=T(o,r);return Object.keys(c).forEach((function(t){var o=T(c[t],e);return Object.keys(o).forEach((function(e){var a,s=o[e].map((function(t){return t[n]}));u.push(i(i(((a={x:e})[r]=t,a),wa(s,l)),ba(s)))}))})),u},ka=Rt({},we.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),Sa=["low","high","q1","q3","median"],Aa=[{type:"dodge",marginRatio:1/32}];function Ma(t){var e=t.chart,n=t.options;return e.data(Fa(n)),t}function Da(t){var e=t.chart,n=t.options,r=n.seriesField,o=n.color,a=n.shape,l=void 0===a?"violin":a,s=n.violinStyle,u=n.tooltip,c=n.state,f=e.createView({id:"violin_view"});return function(t){var e=t.options,n=e.violin,r=e.xField,o=e.yField,a=e.seriesField,l=e.sizeField,s=Ze(e.tooltip,[r,o,a,l]),u=s.fields,c=s.formatter;n&&Je(Rt({},t,{options:{type:"violin",colorField:a,tooltipFields:u,mapping:i({tooltip:c},n)}}))}({chart:f,options:{xField:"x",yField:"violinY",seriesField:r||"x",sizeField:"violinSize",tooltip:i({fields:Sa},u),violin:{style:s,color:o,shape:l},state:c}}),f.geometries[0].adjust(Aa),t}function Ea(t){var e=t.chart,n=t.options,r=n.seriesField,o=n.color,a=n.tooltip,l=n.box;if(!1===l)return t;var s=e.createView({id:"min_max_view"});nn({chart:s,options:{xField:"x",yField:"minMax",seriesField:r||"x",tooltip:i({fields:Sa},a),state:"object"==typeof l?l.state:{},interval:{color:o,size:1,style:{lineWidth:0}}}}),s.geometries[0].adjust(Aa);var u=e.createView({id:"quantile_view"});nn({chart:u,options:{xField:"x",yField:"quantile",seriesField:r||"x",tooltip:i({fields:Sa},a),state:"object"==typeof l?l.state:{},interval:{color:o,size:8,style:{fillOpacity:1}}}}),u.geometries[0].adjust(Aa);var c=e.createView({id:"median_view"});return en({chart:c,options:{xField:"x",yField:"median",seriesField:r||"x",tooltip:i({fields:Sa},a),state:"object"==typeof l?l.state:{},point:{color:o,size:1,style:{fill:"white",lineWidth:0}}}}),c.geometries[0].adjust(Aa),u.axis(!1),s.axis(!1),c.axis(!1),c.legend(!1),s.legend(!1),u.legend(!1),t}function Oa(t){var e,n=t.chart,r=t.options,o=r.meta,a=r.xAxis,l=r.yAxis,s=Rt({},o,((e={}).x=i(i({sync:!0},yt(a,Fe)),{type:"cat"}),e.violinY=i({sync:!0},yt(l,Fe)),e.minMax=i({sync:"violinY"},yt(l,Fe)),e.quantile=i({sync:"violinY"},yt(l,Fe)),e.median=i({sync:"violinY"},yt(l,Fe)),e));return n.scale(s),t}function $a(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=Mt(e,"violin_view");return!1===r?o.axis("x",!1):o.axis("x",r),!1===i?o.axis("violinY",!1):o.axis("violinY",i),e.axis(!1),t}function za(t){var e=t.chart,r=t.options,i=r.legend,o=r.seriesField,a=r.shape;if(!1===i)e.legend(!1);else{var s=o||"x",u=F(i,["selected"]);a&&a.startsWith("hollow")||n(u,["marker","style","lineWidth"])||W(u,["marker","style","lineWidth"],0),e.legend(s,u),n(i,"selected")&&l(e.views,(function(t){return t.legend(s,i)}))}return t}function Ca(t){var e=Mt(t.chart,"violin_view");return He()(i(i({},t),{chart:e})),t}function Pa(t){var e=t.chart,n=t.options.animation;return l(e.views,(function(t){"boolean"==typeof n?t.animate(n):t.animate(!0),l(t.geometries,(function(t){t.animate(n)}))})),t}function Ia(t){return vt(Ne,Ma,Da,Ea,Oa,Le,$a,za,Be,Ca,Pa)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="violin",e}p(e,t),e.getDefaultOptions=function(){return ka},e.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(Fa(this.options))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Ia}}(we);var Ta={normal:function(t){return t},multiply:function(t,e){return t*e/255},screen:function(t,e){return 255*(1-(1-t/255)*(1-e/255))},overlay:function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},darken:function(t,e){return t>e?e:t},lighten:function(t,e){return t>e?t:e},dodge:function(t,e){return 255===t||(t=e/255*255/(1-t/255))>255?255:t},burn:function(t,e){return 255===e?255:0===t?0:255*(1-Math.min(1,(1-e/255)/(t/255)))}};function Ra(t,e,n){void 0===n&&(n="normal");var r,i=(r=function(t){if(!Ta[t])throw new Error("unknown blend mode "+t);return Ta[t]}(n),function(t,e){var n=[];return n[0]=r(t[0],e[0]),n[1]=r(t[1],e[1]),n[2]=r(t[2],e[2]),n})(_a(t),_a(e)),o=_a(t),a=o[0],l=o[1],s=o[2],u=o[3],c=_a(e),f=c[0],d=c[1],p=c[2],h=c[3],g=Number((u+h*(1-u)).toFixed(2));return"rgba("+Math.round((u*(1-h)*(a/255)+u*h*(i[0]/255)+(1-u)*h*(f/255))/g*255)+", "+Math.round((u*(1-h)*(l/255)+u*h*(i[1]/255)+(1-u)*h*(d/255))/g*255)+", "+Math.round((u*(1-h)*(s/255)+u*h*(i[2]/255)+(1-u)*h*(p/255))/g*255)+", "+g+")"}function _a(t){var e,n=t.replace("/s+/g","");return"string"!=typeof n||n.startsWith("rgba")||n.startsWith("#")?(n.startsWith("rgba")&&(e=n.replace("rgba(","").replace(")","").split(",")),n.startsWith("#")&&(e=ft.rgb2arr(n).concat([1])),e.map((function(t,e){return 3===e?Number(t):0|t}))):ft.rgb2arr(ft.toRGB(n)).concat([1])}function La(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=0;return e}function Ba(t,e){return La(t).map((function(){return La(e)}))}function Wa(t,e){for(var n=0,r=0;r<t.length;++r)n+=t[r]*e[r];return n}function Na(t){return Math.sqrt(Wa(t,t))}function ja(t,e,n){for(var r=0;r<e.length;++r)t[r]=e[r]*n}function qa(t,e,n,r,i){for(var o=0;o<t.length;++o)t[o]=e*n[o]+r*i[o]}function Ga(t,e,n){var r,i=(n=n||{}).maxIterations||200*e.length,o=n.nonZeroDelta||1.05,a=n.zeroDelta||.001,l=n.minErrorDelta||1e-6,s=n.minErrorDelta||1e-5,u=void 0!==n.rho?n.rho:1,c=void 0!==n.chi?n.chi:2,f=void 0!==n.psi?n.psi:-.5,d=void 0!==n.sigma?n.sigma:.5,p=e.length,h=new Array(p+1);h[0]=e,h[0].fx=t(e),h[0].id=0;for(var g=0;g<p;++g){var v=e.slice();v[g]=v[g]?v[g]*o:a,h[g+1]=v,h[g+1].fx=t(v),h[g+1].id=g+1}function y(t){for(var e=0;e<t.length;e++)h[p][e]=t[e];h[p].fx=t.fx}for(var m=function(t,e){return t.fx-e.fx},x=e.slice(),b=e.slice(),w=e.slice(),F=e.slice(),k=0;k<i;++k){if(h.sort(m),n.history){var S=h.map((function(t){var e=t.slice();return e.fx=t.fx,e.id=t.id,e}));S.sort((function(t,e){return t.id-e.id})),n.history.push({x:h[0].slice(),fx:h[0].fx,simplex:S})}for(r=0,g=0;g<p;++g)r=Math.max(r,Math.abs(h[0][g]-h[1][g]));if(Math.abs(h[0].fx-h[p].fx)<l&&r<s)break;for(g=0;g<p;++g){x[g]=0;for(var A=0;A<p;++A)x[g]+=h[A][g];x[g]/=p}var M=h[p];if(qa(b,1+u,x,-u,M),b.fx=t(b),b.fx<h[0].fx)qa(F,1+c,x,-c,M),F.fx=t(F),F.fx<b.fx?y(F):y(b);else if(b.fx>=h[p-1].fx){var D=!1;if(b.fx>M.fx?(qa(w,1+f,x,-f,M),w.fx=t(w),w.fx<M.fx?y(w):D=!0):(qa(w,1-f*u,x,f*u,M),w.fx=t(w),w.fx<b.fx?y(w):D=!0),D){if(d>=1)break;for(g=1;g<h.length;++g)qa(h[g],1-d,h[0],d,h[g]),h[g].fx=t(h[g])}}else y(b)}return h.sort(m),{fx:h[0].fx,x:h[0]}}function Va(t,e,n,r,i,o,a){var l=n.fx,s=Wa(n.fxprime,e),u=l,c=l,f=s,d=0;function p(c,d,p){for(var h=0;h<16;++h)if(i=(c+d)/2,qa(r.x,1,n.x,i,e),u=r.fx=t(r.x,r.fxprime),f=Wa(r.fxprime,e),u>l+o*i*s||u>=p)d=i;else{if(Math.abs(f)<=-a*s)return i;f*(d-c)>=0&&(d=c),c=i,p=u}return 0}i=i||1,o=o||1e-6,a=a||.1;for(var h=0;h<10;++h){if(qa(r.x,1,n.x,i,e),u=r.fx=t(r.x,r.fxprime),f=Wa(r.fxprime,e),u>l+o*i*s||h&&u>=c)return p(d,i,c);if(Math.abs(f)<=-a*s)return i;if(f>=0)return p(i,d,u);c=u,d=i,i*=2}return i}function Ha(t,e,n){var r,i,o,a={x:e.slice(),fx:0,fxprime:e.slice()},l={x:e.slice(),fx:0,fxprime:e.slice()},s=e.slice(),u=1;o=(n=n||{}).maxIterations||20*e.length,a.fx=t(a.x,a.fxprime),ja(r=a.fxprime.slice(),a.fxprime,-1);for(var c=0;c<o;++c){if(u=Va(t,r,a,l,u),n.history&&n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),alpha:u}),u){qa(s,1,l.fxprime,-1,a.fxprime);var f=Wa(a.fxprime,a.fxprime);qa(r,Math.max(0,Wa(s,l.fxprime)/f),r,-1,l.fxprime),i=a,a=l,l=i}else ja(r,a.fxprime,-1);if(Na(a.fxprime)<=1e-5)break}return n.history&&n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),alpha:u}),a}function Ya(t,e){var n,r=function(t){for(var e=[],n=0;n<t.length;++n)for(var r=n+1;r<t.length;++r)for(var i=Ka(t[n],t[r]),o=0;o<i.length;++o){var a=i[o];a.parentIndex=[n,r],e.push(a)}return e}(t),i=r.filter((function(e){return function(t,e){for(var n=0;n<e.length;++n)if(Za(t,e[n])>e[n].radius+1e-10)return!1;return!0}(e,t)})),o=0,a=0,l=[];if(i.length>1){var s=Ja(i);for(n=0;n<i.length;++n){var u=i[n];u.angle=Math.atan2(u.x-s.x,u.y-s.y)}i.sort((function(t,e){return e.angle-t.angle}));var c=i[i.length-1];for(n=0;n<i.length;++n){var f=i[n];a+=(c.x+f.x)*(f.y-c.y);for(var d={x:(f.x+c.x)/2,y:(f.y+c.y)/2},p=null,h=0;h<f.parentIndex.length;++h)if(c.parentIndex.indexOf(f.parentIndex[h])>-1){var g=t[f.parentIndex[h]],v=Math.atan2(f.x-g.x,f.y-g.y),y=Math.atan2(c.x-g.x,c.y-g.y),m=y-v;m<0&&(m+=2*Math.PI);var x=y-m/2,b=Za(d,{x:g.x+g.radius*Math.sin(x),y:g.y+g.radius*Math.cos(x)});b>2*g.radius&&(b=2*g.radius),(null===p||p.width>b)&&(p={circle:g,width:b,p1:f,p2:c})}null!==p&&(l.push(p),o+=Xa(p.circle.radius,p.width),c=f)}}else{var w=t[0];for(n=1;n<t.length;++n)t[n].radius<w.radius&&(w=t[n]);var F=!1;for(n=0;n<t.length;++n)if(Za(t[n],w)>Math.abs(w.radius-t[n].radius)){F=!0;break}F?o=a=0:(o=w.radius*w.radius*Math.PI,l.push({circle:w,p1:{x:w.x,y:w.y+w.radius},p2:{x:w.x-1e-10,y:w.y+w.radius},width:2*w.radius}))}return a/=2,e&&(e.area=o+a,e.arcArea=o,e.polygonArea=a,e.arcs=l,e.innerPoints=i,e.intersectionPoints=r),o+a}function Xa(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function Za(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function Ua(t,e,n){if(n>=t+e)return 0;if(n<=Math.abs(t-e))return Math.PI*Math.min(t,e)*Math.min(t,e);var r=e-(n*n-t*t+e*e)/(2*n);return Xa(t,t-(n*n-e*e+t*t)/(2*n))+Xa(e,r)}function Ka(t,e){var n=Za(t,e),r=t.radius,i=e.radius;if(n>=r+i||n<=Math.abs(r-i))return[];var o=(r*r-i*i+n*n)/(2*n),a=Math.sqrt(r*r-o*o),l=t.x+o*(e.x-t.x)/n,s=t.y+o*(e.y-t.y)/n,u=-(e.y-t.y)*(a/n),c=-(e.x-t.x)*(a/n);return[{x:l+u,y:s-c},{x:l-u,y:s+c}]}function Ja(t){for(var e={x:0,y:0},n=0;n<t.length;++n)e.x+=t[n].x,e.y+=t[n].y;return e.x/=t.length,e.y/=t.length,e}function Qa(t,e,n){return Math.min(t,e)*Math.min(t,e)*Math.PI<=n+1e-10?Math.abs(t-e):function(t,e,n,r){var i=(r=r||{}).maxIterations||100,o=r.tolerance||1e-10,a=t(e),l=t(n),s=n-e;if(a*l>0)throw"Initial bisect points must have opposite signs";if(0===a)return e;if(0===l)return n;for(var u=0;u<i;++u){var c=e+(s/=2),f=t(c);if(f*a>=0&&(e=c),Math.abs(s)<o||0===f)return c}return e+s}((function(r){return Ua(t,e,r)-n}),0,t+e)}function tl(t,e){var n=function(t,e){for(var n,r=e&&e.lossFunction?e.lossFunction:el,i={},o={},a=0;a<t.length;++a){var l=t[a];1==l.sets.length&&(n=l.sets[0],i[n]={x:1e10,y:1e10,rowid:Object.keys(i).length,size:l.size,radius:Math.sqrt(l.size/Math.PI)},o[n]=[])}t=t.filter((function(t){return 2==t.sets.length}));for(a=0;a<t.length;++a){var s=t[a],u=s.hasOwnProperty("weight")?s.weight:1,c=s.sets[0],f=s.sets[1];s.size+1e-10>=Math.min(i[c].size,i[f].size)&&(u=0),o[c].push({set:f,size:s.size,weight:u}),o[f].push({set:c,size:s.size,weight:u})}var d=[];for(n in o)if(o.hasOwnProperty(n)){var p=0;for(a=0;a<o[n].length;++a)p+=o[n][a].size*o[n][a].weight;d.push({set:n,size:p})}function h(t,e){return e.size-t.size}d.sort(h);var g={};function v(t){return t.set in g}function y(t,e){i[e].x=t.x,i[e].y=t.y,g[e]=!0}y({x:0,y:0},d[0].set);for(a=1;a<d.length;++a){var m=d[a].set,x=o[m].filter(v);if(n=i[m],x.sort(h),0===x.length)throw"ERROR: missing pairwise overlap information";for(var b=[],w=0;w<x.length;++w){var F=i[x[w].set],k=Qa(n.radius,F.radius,x[w].size);b.push({x:F.x+k,y:F.y}),b.push({x:F.x-k,y:F.y}),b.push({y:F.y+k,x:F.x}),b.push({y:F.y-k,x:F.x});for(var S=w+1;S<x.length;++S)for(var A=i[x[S].set],M=Qa(n.radius,A.radius,x[S].size),D=Ka({x:F.x,y:F.y,radius:k},{x:A.x,y:A.y,radius:M}),E=0;E<D.length;++E)b.push(D[E])}var O=1e50,$=b[0];for(w=0;w<b.length;++w){i[m].x=b[w].x,i[m].y=b[w].y;var z=r(i,t);z<O&&(O=z,$=b[w])}y($,m)}return i}(t,e),r=e.lossFunction||el;if(t.length>=8){var i=function(t,e){var n,r=(e=e||{}).restarts||10,i=[],o={};for(n=0;n<t.length;++n){var a=t[n];1==a.sets.length&&(o[a.sets[0]]=i.length,i.push(a))}var l=function(t,e,n){var r=Ba(e.length,e.length),i=Ba(e.length,e.length);return t.filter((function(t){return 2==t.sets.length})).map((function(t){var o=n[t.sets[0]],a=n[t.sets[1]],l=Qa(Math.sqrt(e[o].size/Math.PI),Math.sqrt(e[a].size/Math.PI),t.size);r[o][a]=r[a][o]=l;var s=0;t.size+1e-10>=Math.min(e[o].size,e[a].size)?s=1:t.size<=1e-10&&(s=-1),i[o][a]=i[a][o]=s})),{distances:r,constraints:i}}(t,i,o),s=l.distances,u=l.constraints,c=Na(s.map(Na))/s.length;s=s.map((function(t){return t.map((function(t){return t/c}))}));var f,d,p=function(t,e){return function(t,e,n,r){var i,o=0;for(i=0;i<e.length;++i)e[i]=0;for(i=0;i<n.length;++i)for(var a=t[2*i],l=t[2*i+1],s=i+1;s<n.length;++s){var u=t[2*s],c=t[2*s+1],f=n[i][s],d=r[i][s],p=(u-a)*(u-a)+(c-l)*(c-l),h=Math.sqrt(p),g=p-f*f;d>0&&h<=f||d<0&&h>=f||(o+=2*g*g,e[2*i]+=4*g*(a-u),e[2*i+1]+=4*g*(l-c),e[2*s]+=4*g*(u-a),e[2*s+1]+=4*g*(c-l))}return o}(t,e,s,u)};for(n=0;n<r;++n){d=Ha(p,La(2*s.length).map(Math.random),e),(!f||d.fx<f.fx)&&(f=d)}var h=f.x,g={};for(n=0;n<i.length;++n){var v=i[n];g[v.sets[0]]={x:h[2*n]*c,y:h[2*n+1]*c,radius:Math.sqrt(v.size/Math.PI)}}if(e.history)for(n=0;n<e.history.length;++n)ja(e.history[n].x,c);return g}(t,e);r(i,t)+1e-8<r(n,t)&&(n=i)}return n}function el(t,e){var n=0;for(var r=0;r<e.length;++r){var i=e[r],o=void 0;if(1!=i.sets.length){if(2==i.sets.length){var a=t[i.sets[0]],l=t[i.sets[1]];o=Ua(a.radius,l.radius,Za(a,l))}else o=Ya(i.sets.map((function(e){return t[e]})));n+=(i.hasOwnProperty("weight")?i.weight:1)*(o-i.size)*(o-i.size)}}return n}function nl(t,e,n,r){var i=[],o=[];for(var a in t)t.hasOwnProperty(a)&&(o.push(a),i.push(t[a]));e-=2*r,n-=2*r;var l=function(t){var e=function(e){return{max:Math.max.apply(null,t.map((function(t){return t[e]+t.radius}))),min:Math.min.apply(null,t.map((function(t){return t[e]-t.radius})))}};return{xRange:e("x"),yRange:e("y")}}(i),s=l.xRange,u=l.yRange;if(s.max==s.min||u.max==u.min)return t;for(var c=e/(s.max-s.min),f=n/(u.max-u.min),d=Math.min(f,c),p=(e-(s.max-s.min)*d)/2,h=(n-(u.max-u.min)*d)/2,g={},v=0;v<i.length;++v){var y=i[v];g[o[v]]={radius:d*y.radius,x:r+p+(y.x-s.min)*d,y:r+h+(y.y-u.min)*d}}return g}function rl(t,e,n){var r,i,o=e[0].radius-Za(e[0],t);for(r=1;r<e.length;++r)(i=e[r].radius-Za(e[r],t))<=o&&(o=i);for(r=0;r<n.length;++r)(i=Za(n[r],t)-n[r].radius)<=o&&(o=i);return o}function il(t,e){var n,r=[];for(n=0;n<t.length;++n){var i=t[n];r.push({x:i.x,y:i.y}),r.push({x:i.x+i.radius/2,y:i.y}),r.push({x:i.x-i.radius/2,y:i.y}),r.push({x:i.x,y:i.y+i.radius/2}),r.push({x:i.x,y:i.y-i.radius/2})}var o=r[0],a=rl(r[0],t,e);for(n=1;n<r.length;++n){var l=rl(r[n],t,e);l>=a&&(o=r[n],a=l)}var s=Ga((function(n){return-1*rl({x:n[0],y:n[1]},t,e)}),[o.x,o.y],{maxIterations:500,minErrorDelta:1e-10}).x,u={x:s[0],y:s[1]},c=!0;for(n=0;n<t.length;++n)if(Za(u,t[n])>t[n].radius){c=!1;break}for(n=0;n<e.length;++n)if(Za(u,e[n])<e[n].radius){c=!1;break}if(!c)if(1==t.length)u={x:t[0].x,y:t[0].y};else{var f={};Ya(t,f),u=0===f.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==f.arcs.length?{x:f.arcs[0].circle.x,y:f.arcs[0].circle.y}:e.length?il(t,[]):Ja(f.arcs.map((function(t){return t.p1})))}return u}function ol(t,e){for(var n={},r=function(t){var e={},n=[];for(var r in t)n.push(r),e[r]=[];for(var i=0;i<n.length;i++)for(var o=t[n[i]],a=i+1;a<n.length;++a){var l=t[n[a]],s=Za(o,l);s+l.radius<=o.radius+1e-10?e[n[a]].push(n[i]):s+o.radius<=l.radius+1e-10&&e[n[i]].push(n[a])}return e}(t),i=0;i<e.length;++i){for(var o=e[i].sets,a={},l={},s=0;s<o.length;++s){a[o[s]]=!0;for(var u=r[o[s]],c=0;c<u.length;++c)l[u[c]]=!0}var f=[],d=[];for(var p in t)p in a?f.push(t[p]):p in l||d.push(t[p]);var h=il(f,d);n[o]=h,h.disjoint&&e[i].size}return n}var al={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(t){return{name:t.id,value:t.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]},ll=u((function(t,e,n,r){var i=new Map,o=t.length;return e.forEach((function(e,a){if(1===e[r].length)i.set(e.id,t[(a+o)%o]);else{var l=e[r].map((function(t){return i.get(t)}));i.set(e.id,l.slice(1).reduce((function(t,e){return Ra(t,e,n)}),l[0]))}})),i}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return JSON.stringify(t)}));function sl(t,e,n,r){void 0===r&&(r=0);var o=t.data,a=t.setsField,l=t.sizeField;if(0===o.length)return wt(xt.WARN,!1,"warn: %s","数据不能为空"),[];var s=o.map((function(t){var e;return i(i({},t),((e={sets:t[a]||[],size:t[l]}).path="",e.id="",e))}));s.sort((function(t,e){return t.sets.length-e.sets.length}));var u=function(t,e){(e=e||{}).maxIterations=e.maxIterations||500;var n=e.initialLayout||tl,r=e.lossFunction||el;t=function(t){t=t.slice();var e,n,r,i,o=[],a={};for(e=0;e<t.length;++e){var l=t[e];1==l.sets.length?o.push(l.sets[0]):2==l.sets.length&&(a[[r=l.sets[0],i=l.sets[1]]]=!0,a[[i,r]]=!0)}for(o.sort((function(t,e){return t>e?1:-1})),e=0;e<o.length;++e)for(r=o[e],n=e+1;n<o.length;++n)[r,i=o[n]]in a||t.push({sets:[r,i],size:0});return t}(t);var i,o=n(t,e),a=[],l=[];for(i in o)o.hasOwnProperty(i)&&(a.push(o[i].x),a.push(o[i].y),l.push(i));for(var s=Ga((function(e){for(var n={},i=0;i<l.length;++i){var a=l[i];n[a]={x:e[2*i],y:e[2*i+1],radius:o[a].radius}}return r(n,t)}),a,e).x,u=0;u<l.length;++u)i=l[u],o[i].x=s[2*u],o[i].y=s[2*u+1];return o}(s),c=nl(u,e,n,r),f=ol(c,s);return s.forEach((function(t){var e=t.sets,n=e.join(",");t.id=n;var r=function(t){var e={};Ya(t,e);var n=e.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var r=n[0].circle;return function(t,e,n){var r=[],i=t-n,o=e;return r.push("M",i,o),r.push("A",n,n,0,1,0,i+2*n,o),r.push("A",n,n,0,1,0,i,o),r.join(" ")}(r.x,r.y,r.radius)}for(var i=["\nM",n[0].p2.x,n[0].p2.y],o=0;o<n.length;++o){var a=n[o],l=a.circle.radius,s=a.width>l;i.push("\nA",l,l,0,s?1:0,1,a.p1.x,a.p1.y)}return i.join(" ")}(e.map((function(t){return c[t]})));/[zZ]$/.test(r)||(r+=" Z"),t.path=r;var i=f[n]||{x:0,y:0};E(t,i)})),s}function ul(t){t&&t.geometries[0].elements.forEach((function(t){t.shape.toFront()}))}lt("schema","venn",{draw:function(t,e){var n=t.data,r=dt(n.path),o=function(t){return Rt({},t.defaultStyle,{fill:t.color},t.style)}(t),a=e.addGroup({name:"venn-shape"});a.addShape("path",{attrs:i(i({},o),{path:r}),name:"venn-path"});var l=t.customInfo,s=l.offsetX,u=l.offsetY,c=tt.transform(null,[["t",s,u]]);return a.setMatrix(c),a},getMarker:function(t){var e=t.color;return{symbol:"circle",style:{lineWidth:0,stroke:e,fill:e,r:4}}}}),pt("venn",function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.getLabelPoint=function(t,e,n){var r=t.data,i=r.x,o=r.y,a=t.customLabelInfo,l=a.offsetX,s=a.offsetY;return{content:t.content[n],x:i+l,y:o+s}},e}(ht));var cl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.syncElementsPos=function(){ul(this.context.view)},e.prototype.active=function(){t.prototype.active.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(gt("element-active")),fl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.syncElementsPos=function(){ul(this.context.view)},e.prototype.highlight=function(){t.prototype.highlight.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.clear=function(){t.prototype.clear.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(gt("element-highlight")),dl=gt("element-selected"),pl=gt("element-single-selected"),hl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.syncElementsPos=function(){ul(this.context.view)},e.prototype.selected=function(){t.prototype.selected.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(dl),gl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.syncElementsPos=function(){ul(this.context.view)},e.prototype.selected=function(){t.prototype.selected.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(pl);it("venn-element-active",cl),it("venn-element-highlight",fl),it("venn-element-selected",hl),it("venn-element-single-selected",gl),rt("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]}),rt("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]}),rt("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]}),rt("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]}),rt("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]}),rt("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});function vl(t,e,n){var r=t.chart,i=t.options,o=i.blendMode,a=i.setsField,l=r.getTheme(),s=l.colors10,u=l.colors20,c=n;d(c)||(c=e.filter((function(t){return 1===t[a].length})).length<=10?s:u);var f=ll(c,e,o,a);return function(t){return f.get(t)||c[0]}}function yl(t){var e=t.chart,r=t.options,i=r.legend,o=r.appendPadding,a=r.padding,l=Yt(o);return!1!==i&&(l=Xt(o,n(i,"position"),40)),e.appendPadding=Zt([l,a]),t}function ml(t){var e=t.options.data;e||(wt(xt.WARN,!1,"warn: %s","数据不能为空"),e=[]);var n=e.filter((function(t){return 1===t.sets.length})).map((function(t){return t.sets[0]})),r=e.filter((function(t){var e=t.sets;return function(t,e){for(var n=0;n<e.length;n++)if(!t.includes(e[n]))return!1;return!0}(n,e)}));return M(r,e)||wt(xt.WARN,!1,"warn: %s","交集中不能出现不存在的集合, 请输入合法数据"),x({},t,{options:{data:r}})}function xl(t){var e=t.chart,n=t.options,r=n.pointStyle,i=n.setsField,o=n.sizeField,a=Yt(e.appendPadding),l=a[0],s=a[1],u=a[2],c=a[3],f={offsetX:c,offsetY:l},d=e.viewBBox,p=d.width,h=d.height,g=sl(n,Math.max(p-(s+c),0),Math.max(h-(l+u),0),0);e.data(g);var v=an(Rt({},t,{options:{xField:"x",yField:"y",sizeField:o,seriesField:"id",rawFields:[i,o],schema:{shape:"venn",style:r}}})).ext.geometry;v.customInfo(f);var y=function(t,e){var n=t.options.color;if("function"!=typeof n){var r=vl(t,e,"string"==typeof n?[n]:n);return function(t){return r(t.id)}}return n}(t,g);return"function"==typeof y&&v.color("id",(function(e){var n=g.find((function(t){return t.id===e})),r=vl(t,g)(e);return y(n,r)})),t}function bl(t){var e=t.chart,n=t.options.label,r=Yt(e.appendPadding),i=r[0],o={offsetX:r[3],offsetY:i},a=kt(e,"schema");if(n){var l=n.callback,s=y(n,["callback"]);a.label({fields:["id"],callback:l,cfg:x({},Ot(s),{type:"venn",customLabelInfo:o})})}else a.label(!1);return t}function wl(t){var e=t.chart,n=t.options,r=n.legend,i=n.sizeField;return e.legend("id",r),e.legend(i,!1),t}function Fl(t){return t.chart.axis(!1),t}function kl(t){var e=t.options,n=t.chart,r=e.interactions;if(r){var o={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};Be(Rt({},t,{options:{interactions:r.map((function(t){return i(i({},t),{type:o[t.type]||t.type})}))}}))}return n.removeInteraction("legend-active"),n.removeInteraction("legend-highlight"),t}function Sl(t){return vt(yl,Ne,ml,xl,bl,Ve({}),wl,Fl,Le,kl,We)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="venn",e}p(e,t),e.getDefaultOptions=function(){return al},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Sl},e.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))}}(we);var Al="$$stock-range$$",Ml=Rt({},we.getDefaultOptions(),{tooltip:{showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(t,e,n){var r;if("x"===t){var i=n[0];r=i?i.title:e}else r=e;return{position:"y"===t?"start":"end",content:r,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function Dl(t,e){return w(t,(function(t){if(d(e)){var n=e[0],r=e[1],i=e[2],o=e[3];t.trend=t[n]<=t[r]?"up":"down",t[Al]=[t[n],t[r],t[i],t[o]]}return t}))}function El(t){var e=t.chart,n=t.options,r=n.yField,i=n.data,o=n.risingFill,a=n.fallingFill,l=n.tooltip,s=n.stockStyle;e.data(Dl(i,r));var u=l;return!1!==u&&(u=Rt({},{fields:r},u)),an(Rt({},t,{options:{schema:{shape:"candle",color:[o,a],style:s},yField:Al,seriesField:"trend",rawFields:r,tooltip:u}})),t}function Ol(t){var e,n,r=t.chart,i=t.options,o=i.meta,a=i.xAxis,l=i.yAxis,s=i.xField,u=((e={})[s]={type:"timeCat",tickCount:6},e.trend={values:["up","down"]},e),c=Rt(u,o,((n={})[s]=yt(a,Fe),n[Al]=yt(l,Fe),n));return r.scale(c),t}function $l(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField;return!1===r?e.axis(o,!1):e.axis(o,r),!1===i?e.axis(Al,!1):e.axis(Al,i),t}function zl(t){var e=t.chart,n=t.options.tooltip;return!1!==n?e.tooltip(n):e.tooltip(!1),t}function Cl(t){var e=t.chart,n=t.options.legend;return n?e.legend("trend",n):!1===n&&e.legend(!1),t}function Pl(t){vt(Ne,El,Ol,$l,zl,Cl,Be,We,He(),qe)(t)}var Il,Tl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="stock",e}return p(e,t),e.getDefaultOptions=function(){return Ml},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Pl},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options.yField;this.chart.changeData(Dl(t,e))},e}(we),Rl={appendPadding:[0,80],minSize:0,maxSize:1,meta:(Il={},Il.$$mappingValue$$={min:0,max:1,nice:!1},Il),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}};function _l(t,e,r){var i=r.yField,o=r.maxSize,a=r.minSize,l=n(N(e,i),[i]),u=s(o)?o:1,c=s(a)?a:0;return w(t,(function(e,r){var o=(e[i]||0)/l;return e.$$percentage$$=o,e.$$mappingValue$$=(u-c)*o+c,e.$$conversion$$=[n(t,[r-1,i]),e[i]],e}))}function Ll(t){return function(e){var n=e.chart,r=e.options.conversionTag,a=n.getOptions().data;if(r){var l=r.formatter;a.forEach((function(e,s){if(!(s<=0||Number.isNaN(e.$$mappingValue$$))){var u=t(e,s,a,{top:!0,text:{content:o(l)?l(e,a):l,offsetX:r.offsetX,offsetY:r.offsetY,position:"end",autoRotate:!1,style:i({textAlign:"start",textBaseline:"middle"},r.style)}});n.annotation().line(u)}}))}return e}}function Bl(t){var e=t.chart,n=t.options,r=n.data,i=void 0===r?[]:r,o=_l(i,i,{yField:n.yField,maxSize:n.maxSize,minSize:n.minSize});return e.data(o),t}function Wl(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,o=n.color,a=n.tooltip,l=n.label,s=n.shape,u=void 0===s?"funnel":s,c=n.funnelStyle,f=n.state,p=Ze(a,[r,i]),h=p.fields,g=p.formatter;return Je({chart:e,options:{type:"interval",xField:r,yField:"$$mappingValue$$",colorField:r,tooltipFields:d(h)&&h.concat(["$$percentage$$","$$conversion$$"]),mapping:{shape:u,tooltip:g,color:o,style:c},label:l,state:f}}),kt(t.chart,"interval").adjust("symmetric"),t}function Nl(t){var e=t.chart,n=t.options.isTransposed;return e.coordinate({type:"rect",actions:n?[]:[["transpose"],["scale",1,-1]]}),t}function jl(t){var e=t.options.maxSize;return Ll((function(t,n,r,o){var a=e-(e-t.$$mappingValue$$)/2;return i(i({},o),{start:[n-.5,a],end:[n-.5,a+.05]})}))(t),t}function ql(t){return vt(Bl,Wl,Nl,jl)(t)}function Gl(t){var e,n=t.chart,r=t.options,i=r.data,o=void 0===i?[]:i,a=r.yField;return n.data(o),n.scale(((e={})[a]={sync:!0},e)),t}function Vl(t){var e=t.chart,n=t.options,r=n.data,i=n.xField,o=n.yField,a=n.color,l=n.compareField,s=n.isTransposed,u=n.tooltip,c=n.maxSize,f=n.minSize,p=n.label,h=n.funnelStyle,g=n.state,v=n.showFacetTitle;return e.facet("mirror",{fields:[l],transpose:!s,padding:s?0:[32,0,0,0],showTitle:v,eachView:function(t,e){var n=s?e.rowIndex:e.columnIndex;s||t.coordinate({type:"rect",actions:[["transpose"],["scale",0===n?-1:1,-1]]});var v=_l(e.data,r,{yField:o,maxSize:c,minSize:f});t.data(v);var y=Ze(u,[i,o,l]),m=y.fields,x=y.formatter,b=s?{offset:0===n?10:-23,position:0===n?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:0===n?"end":"start"}};Je({chart:t,options:{type:"interval",xField:i,yField:"$$mappingValue$$",colorField:i,tooltipFields:d(m)&&m.concat(["$$percentage$$","$$conversion$$"]),mapping:{shape:"funnel",tooltip:x,color:a,style:h},label:!1!==p&&Rt({},b,p),state:g}})}}),t}function Hl(t){var e=t.chart,n=t.options,r=n.conversionTag,i=n.isTransposed;return e.once("beforepaint",(function(){e.views.forEach((function(t,e){Ll((function(t,n,o,a){var l=0===e?-1:1;return Rt({},a,{start:[n-.5,t.$$mappingValue$$],end:[n-.5,t.$$mappingValue$$+.05],text:i?{style:{textAlign:"start"}}:{offsetX:!1!==r?l*r.offsetX:0,style:{textAlign:0===e?"end":"start"}}})}))(Rt({},{chart:t,options:n}))}))})),t}function Yl(t){var e,n=t.chart,r=t.options,i=r.data,o=void 0===i?[]:i,a=r.yField;return n.data(o),n.scale(((e={})[a]={sync:!0},e)),t}function Xl(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.isTransposed,o=n.showFacetTitle;return e.facet("rect",{fields:[r],padding:[i?0:32,10,0,10],showTitle:o,eachView:function(e,n){ql(Rt({},t,{chart:e,options:{data:n.data}}))}}),t}function Zl(e){var r=e.chart,i=e.options,o=i.data,a=void 0===o?[]:o,l=i.yField,s=t(a,(function(t,e){return t+(e[l]||0)}),0),u=N(a,l)[l],c=w(a,(function(t,e){var r=[],i=[];if(t.$$totalPercentage$$=(t[l]||0)/s,e){var o=a[e-1].$$x$$,c=a[e-1].$$y$$;r[0]=o[3],i[0]=c[3],r[1]=o[2],i[1]=c[2]}else r[0]=-.5,i[0]=1,r[1]=.5,i[1]=1;return i[2]=i[1]-t.$$totalPercentage$$,r[2]=(i[2]+1)/4,i[3]=i[2],r[3]=-r[2],t.$$x$$=r,t.$$y$$=i,t.$$percentage$$=(t[l]||0)/u,t.$$conversion$$=[n(a,[e-1,l]),t[l]],t}));return r.data(c),e}function Ul(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,o=n.color,a=n.tooltip,l=n.label,s=n.funnelStyle,u=n.state,c=Ze(a,[r,i]),f=c.fields,p=c.formatter;return Je({chart:e,options:{type:"polygon",xField:"$$x$$",yField:"$$y$$",colorField:r,tooltipFields:d(f)&&f.concat(["$$percentage$$","$$conversion$$"]),label:l,state:u,mapping:{tooltip:p,color:o,style:s}}}),t}function Kl(t){var e=t.chart,n=t.options.isTransposed;return e.coordinate({type:"rect",actions:n?[["transpose"],["reflect","x"]]:[]}),t}function Jl(t){return Ll((function(t,e,n,r){return i(i({},r),{start:[t.$$x$$[1],t.$$y$$[1]],end:[t.$$x$$[1]+.05,t.$$y$$[1]]})}))(t),t}function Ql(t){var e,n=t.options,r=n.compareField,i=n.xField,a=n.yField,l=n.locale,s=n.funnelStyle,u=n.data,c=Qt(l);return(r||s)&&(e=function(t){return Rt({},r&&{lineWidth:1,stroke:"#fff"},o(s)?s(t):s)}),Rt({options:{label:r?{fields:[i,a,r,"$$percentage$$","$$conversion$$"],formatter:function(t){return""+t[a]}}:{fields:[i,a,"$$percentage$$","$$conversion$$"],offset:0,position:"middle",formatter:function(t){return t[i]+" "+t[a]}},tooltip:{title:i,formatter:function(t){return{name:t[i],value:t[a]}}},conversionTag:{formatter:function(t){return c.get(["conversionTag","label"])+": "+An.apply(void 0,t.$$conversion$$)}}}},t,{options:{funnelStyle:e,data:C(u)}})}function ts(t){var e=t.options,n=e.compareField,r=e.dynamicHeight;return e.seriesField?function(t){return vt(Yl,Xl)(t)}(t):n?function(t){return vt(Gl,Vl,Hl)(t)}(t):r?function(t){return vt(Zl,Ul,Kl,Jl)(t)}(t):ql(t)}function es(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return vt(Ve(((e={})[o]=r,e[a]=i,e)))(t)}function ns(t){return t.chart.axis(!1),t}function rs(t){var e=t.chart,n=t.options.legend;return!1===n?e.legend(!1):e.legend(n),t}function is(t){return vt(Ql,ts,es,ns,Le,Be,rs,We,Ne,He())(t)}var os=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="funnel",e}return p(e,t),e.getDefaultOptions=function(){return Rl},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return is},e.prototype.setState=function(t,e,n){void 0===n&&(n=!0);var r=At(this.chart);l(r,(function(r){e(r.getData())&&r.setState(t,n)}))},e.prototype.getStates=function(){var t=At(this.chart),e=[];return l(t,(function(t){var n=t.getData(),r=t.getStates();l(r,(function(r){e.push({data:n,state:r,geometry:t.geometry,element:t})}))})),e},e.CONVERSATION_FIELD="$$conversion$$",e.PERCENT_FIELD="$$percentage$$",e.TOTAL_PERCENT_FIELD="$$totalPercentage$$",e}(we);function as(t){return[{percent:t,type:"liquid"}]}function ls(t){var e=t.chart,n=t.options,r=n.percent,i=n.liquidStyle,o=n.radius,a=n.outline,l=n.wave,s=n.shape,u=n.animation;e.scale({percent:{min:0,max:1}}),e.data(as(r));var c=n.color||e.getTheme().defaultColor,f=nn(Rt({},t,{options:{xField:"type",yField:"percent",widthRatio:o,interval:{color:c,style:i,shape:"liquid-fill-gauge"}}})).ext.geometry,d={radius:o,outline:a,wave:l,shape:s,background:e.getTheme().background,animation:u};return f.customInfo(d),e.legend(!1),e.axis(!1),e.tooltip(!1),t}function ss(t,e){var r=t.chart,o=t.options,a=o.statistic,l=o.percent,s=o.meta;r.getController("annotation").clear(!0);var u=n(s,["percent","formatter"])||function(t){return(100*t).toFixed(2)+"%"},c=a.content;return c&&(c=Rt({},c,{content:g(c.content)?u(l):c.content})),Nt(r,{statistic:i(i({},a),{content:c}),plotType:"liquid"},{percent:l}),e&&r.render(!0),t}function us(t){return vt(Ne,Re("liquidStyle"),ls,ss,Ve({}),We,Be)(t)}var cs={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"};function fs(t,e,n){return t+(e-t)*n}function ds(t,e,n,r){return 0===e?[[t+.5*n/Math.PI/2,r/2],[t+.5*n/Math.PI,r],[t+n/4,r]]:1===e?[[t+.5*n/Math.PI/2*(Math.PI-2),r],[t+.5*n/Math.PI/2*(Math.PI-1),r/2],[t+n/4,0]]:2===e?[[t+.5*n/Math.PI/2,-r/2],[t+.5*n/Math.PI,-r],[t+n/4,-r]]:[[t+.5*n/Math.PI/2*(Math.PI-2),-r],[t+.5*n/Math.PI/2*(Math.PI-1),-r/2],[t+n/4,0]]}function ps(t,e,n,r,i,o,a){for(var l=4*Math.ceil(2*t/n*4),s=[],u=r;u<2*-Math.PI;)u+=2*Math.PI;for(;u>0;)u-=2*Math.PI;var c=o-t+(u=u/Math.PI/2*n)-2*t;s.push(["M",c,e]);for(var f=0,d=0;d<l;++d){var p=ds(d*n/4,d%4,n,i);s.push(["C",p[0][0]+c,-p[0][1]+e,p[1][0]+c,-p[1][1]+e,p[2][0]+c,-p[2][1]+e]),d===l-1&&(f=p[2][0])}return s.push(["L",f+c,a+t]),s.push(["L",c,a+t]),s.push(["Z"]),s}var hs={pin:function(t,e,n,r){var i=2*n/3,o=Math.max(i,r),a=i/2,l=t,s=a+e-o/2,u=Math.asin(a/(.85*(o-a))),c=Math.sin(u)*a,f=Math.cos(u)*a,d=l-f,p=s+c,h=t,g=s+a/Math.sin(u);return"\n      M "+d+" "+p+"\n      A "+a+" "+a+" 0 1 1 "+(d+2*f)+" "+p+"\n      Q "+h+" "+g+" "+t+" "+(e+o/2)+"\n      Q "+h+" "+g+" "+d+" "+p+"\n      Z \n    "},circle:function(t,e,n,r){var i=n/2,o=r/2;return"\n      M "+t+" "+(e-o)+" \n      a "+i+" "+o+" 0 1 0 0 "+2*o+"\n      a "+i+" "+o+" 0 1 0 0 "+2*-o+"\n      Z\n    "},diamond:function(t,e,n,r){var i=r/2,o=n/2;return"\n      M "+t+" "+(e-i)+"\n      L "+(t+o)+" "+e+"\n      L "+t+" "+(e+i)+"\n      L "+(t-o)+" "+e+"\n      Z\n    "},triangle:function(t,e,n,r){var i=r/2,o=n/2;return"\n      M "+t+" "+(e-i)+"\n      L "+(t+o)+" "+(e+i)+"\n      L "+(t-o)+" "+(e+i)+"\n      Z\n    "},rect:function(t,e,n,r){var i=r/2,o=n/2*.618;return"\n      M "+(t-o)+" "+(e-i)+"\n      L "+(t+o)+" "+(e-i)+"\n      L "+(t+o)+" "+(e+i)+"\n      L "+(t-o)+" "+(e+i)+"\n      Z\n    "}};lt("interval","liquid-fill-gauge",{draw:function(e,n){var r=e.customInfo,o=r,a=o.radius,l=o.shape,u=o.background,c=o.animation,f=r.outline,d=r.wave,p=f.border,h=f.distance,g=d.count,v=d.length,y=t(e.points,(function(t,e){return Math.min(t,e.x)}),1/0),m=this.parsePoint({x:.5,y:.5}),x=this.parsePoint({x:y,y:.5}),b=m.x-x.x,w=Math.min(b,x.y*a),F=function(t){var e=i({opacity:1},t.style);return t.color&&!e.fill&&(e.fill=t.color),e}(e),k=function(t){var e=E({},{fill:"#fff",fillOpacity:0,lineWidth:4},t.style);return t.color&&!e.stroke&&(e.stroke=t.color),s(t.opacity)&&(e.opacity=e.strokeOpacity=t.opacity),e}(E({},e,f)),S=w-p/2,A=("function"==typeof l?l:hs[l]||hs.circle)(m.x,m.y,2*S,2*S),M=n.addGroup({name:"waves"}),D=M.setClip({type:"path",attrs:{path:A}});return function(t,e,n,r,i,o,a,l,s,u){for(var c=i.fill,f=i.opacity,d=a.getBBox(),p=d.maxX-d.minX,h=d.maxY-d.minY,g=0;g<r;g++){var v=r<=1?0:g/(r-1),y=o.addShape("path",{name:"waterwave-path",attrs:{path:ps(l,d.minY+h*n,s,0,p/32,t,e),fill:c,opacity:fs(.2,.9,v)*f}});try{if(!1===u)return;var m=ir([["t",s,0]]);y.stopAnimate(),y.animate({matrix:m},{duration:fs(2500,5e3,v),repeat:!0})}catch(x){}}}(m.x,m.y,1-e.points[1].y,g,F,M,D,2*w,v,c),n.addShape("path",{name:"distance",attrs:{path:A,fill:"transparent",lineWidth:p+2*h,stroke:"transparent"===u?"#fff":u}}),n.addShape("path",{name:"wrap",attrs:E(k,{path:A,fill:"transparent",lineWidth:p})}),n}});var gs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="liquid",e}return p(e,t),e.getDefaultOptions=function(){return cs},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.changeData=function(t){this.chart.emit(ot.BEFORE_CHANGE_DATA,at.fromData(this.chart,ot.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(as(t)),ss({chart:this.chart,options:this.options},!0),this.chart.emit(ot.AFTER_CHANGE_DATA,at.fromData(this.chart,ot.AFTER_CHANGE_DATA,null))},e.prototype.getSchemaAdaptor=function(){return us},e}(we);function vs(t,e,n){return t.length>1?e+"_"+n:""+e}function ys(t){var e=t.data,n=t.xField,r=t.measureField,i=t.rangeField,o=t.targetField,a=t.layout,l=[],s=[];e.forEach((function(t,e){var a=[t[i]].flat();a.sort((function(t,e){return t-e})),a.forEach((function(r,o){var s,u=0===o?r:a[o]-a[o-1];l.push(((s={rKey:i+"_"+o})[n]=n?t[n]:String(e),s[i]=u,s))}));var u=[t[r]].flat();u.forEach((function(i,o){var a;l.push(((a={mKey:vs(u,r,o)})[n]=n?t[n]:String(e),a[r]=i,a))}));var c=[t[o]].flat();c.forEach((function(r,i){var a;l.push(((a={tKey:vs(c,o,i)})[n]=n?t[n]:String(e),a[o]=r,a))})),s.push(t[i],t[r],t[o])}));var u=Math.min.apply(Math,s.flat(1/0)),c=Math.max.apply(Math,s.flat(1/0));return u=u>0?0:u,"vertical"===a&&l.reverse(),{min:u,max:c,ds:l}}function ms(t){var e=t.chart,r=t.options,a=r.bulletStyle,l=r.targetField,s=r.rangeField,u=r.measureField,c=r.xField,f=r.color,d=r.layout,p=r.size,h=r.label,g=ys(r),v=g.min,y=g.max,m=g.ds;return e.data(m),nn(Rt({},t,{options:{xField:c,yField:s,seriesField:"rKey",isStack:!0,label:n(h,"range"),interval:{color:n(f,"range"),style:n(a,"range"),size:n(p,"range")}}})),e.geometries[0].tooltip(!1),nn(Rt({},t,{options:{xField:c,yField:u,seriesField:"mKey",isStack:!0,label:n(h,"measure"),interval:{color:n(f,"measure"),style:n(a,"measure"),size:n(p,"measure")}}})),en(Rt({},t,{options:{xField:c,yField:l,seriesField:"tKey",label:n(h,"target"),point:{color:n(f,"target"),style:n(a,"target"),size:o(n(p,"target"))?function(t){return n(p,"target")(t)/2}:n(p,"target")/2,shape:"horizontal"===d?"line":"hyphen"}}})),"horizontal"===d&&e.coordinate().transpose(),i(i({},t),{ext:{data:{min:v,max:y}}})}function xs(t){var e,n,r=t.options,i=t.ext,o=r.xAxis,a=r.yAxis,l=r.targetField,s=r.rangeField,u=r.measureField,c=r.xField,f=i.data;return vt(Ve(((e={})[c]=o,e[u]=a,e),((n={})[u]={min:null==f?void 0:f.min,max:null==f?void 0:f.max,sync:!0},n[l]={sync:""+u},n[s]={sync:""+u},n)))(t)}function bs(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.measureField,l=n.rangeField,s=n.targetField;return e.axis(""+l,!1),e.axis(""+s,!1),!1===r?e.axis(""+o,!1):e.axis(""+o,r),!1===i?e.axis(""+a,!1):e.axis(""+a,i),t}function ws(t){var e=t.chart,n=t.options.legend;return e.removeInteraction("legend-filter"),e.legend(n),e.legend("rKey",!1),e.legend("mKey",!1),e.legend("tKey",!1),t}function Fs(t){var e=t.chart,r=t.options,o=r.label,a=r.measureField,l=r.targetField,s=r.rangeField,u=e.geometries,c=u[0],f=u[1],d=u[2];return n(o,"range")?c.label(""+s,i({layout:[{type:"limit-in-plot"}]},Ot(o.range))):c.label(!1),n(o,"measure")?f.label(""+a,i({layout:[{type:"limit-in-plot"}]},Ot(o.measure))):f.label(!1),n(o,"target")?d.label(""+l,i({layout:[{type:"limit-in-plot"}]},Ot(o.target))):d.label(!1),t}function ks(t){vt(ms,xs,bs,ws,Ne,Fs,Le,Be,We)(t)}var Ss=Rt({},we.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="bullet",e}p(e,t),e.getDefaultOptions=function(){return Ss},e.prototype.changeData=function(t){this.updateOption({data:t});var e=ys(this.options),n=e.min,r=e.max,i=e.ds;xs({options:this.options,ext:{data:{min:n,max:r}},chart:this.chart}),this.chart.changeData(i)},e.prototype.getSchemaAdaptor=function(){return ks},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()}}(we);function As(t,e){var n=t.field,r=t.fields;if(a(n))return n;if(d(n))return n[0];if(a(r))return r;if(d(r)&&r.length)return r[0];if(e)return e;throw new TypeError("Invalid field: it must be a string!")}function Ms(t){var e,n,r=[];t&&t.each?t.each((function(t){var i,o;t.parent!==e?(e=t.parent,n=0):n+=1;var a=f(((null===(i=t.ancestors)||void 0===i?void 0:i.call(t))||[]).map((function(t){return r.find((function(e){return e.name===t.name}))||t})),(function(e){var n=e.depth;return n>0&&n<t.depth}));t.nodeAncestor=a,t.childNodeCount=(null===(o=t.children)||void 0===o?void 0:o.length)||0,t.nodeIndex=n,r.push(t)})):t&&t.eachNode&&t.eachNode((function(t){r.push(t)}));return r}var Ds=["path","nodeIndex","nodeAncestor","childNodeCount","name","depth","height"],Es=Rt({},we.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}}),Os={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},$s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="drill-down",e.historyCache=[],e.breadCrumbGroup=null,e.breadCrumbCfg=Os,e}return p(e,t),e.prototype.click=function(){var t=n(this.context,["event","data","data"]);if(!t)return!1;this.drill(t),this.drawBreadCrumb()},e.prototype.resetPosition=function(){if(this.breadCrumbGroup){var t=this.context.view.getCoordinate(),e=this.breadCrumbGroup,n=e.getBBox(),r=this.getButtonCfg().position,i={x:t.start.x,y:t.end.y-(n.height+10)};t.isPolar&&(i={x:0,y:0}),"bottom-left"===r&&(i={x:t.start.x,y:t.start.y});var o=tt.transform(null,[["t",i.x+0,i.y+n.height+5]]);e.setMatrix(o)}},e.prototype.back=function(){O(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},e.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},e.prototype.drill=function(t){var e=this.context.view,r=n(e,["interactions","drill-down","cfg","transformData"],(function(t){return t})),o=r(i({data:t.data},t["hierarchy-data-transform-params"]));e.changeData(o);for(var a=[],l=t;l;){var s=l.data;a.unshift({id:s.name+"_"+l.height+"_"+l.depth,name:s.name,children:r(i({data:s},t["hierarchy-data-transform-params"]))}),l=l.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(a)},e.prototype.backTo=function(t){if(t&&!(t.length<=0)){var e=this.context.view,n=j(t).children;e.changeData(n),t.length>1?(this.historyCache=t,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},e.prototype.getButtonCfg=function(){var t=this.context.view,e=n(t,["interactions","drill-down","cfg","drillDownConfig"]);return Rt(this.breadCrumbCfg,null==e?void 0:e.breadCrumb,this.cfg)},e.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},e.prototype.drawBreadCrumbGroup=function(){var t=this,e=this.getButtonCfg(),n=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:"drilldown-bread-crumb"});var r=0;n.forEach((function(o,a){var l=t.breadCrumbGroup.addShape({type:"text",id:o.id,name:"drilldown-bread-crumb_"+o.name+"_text",attrs:i(i({text:0!==a||g(e.rootText)?o.name:e.rootText},e.textStyle),{x:r,y:0})}),s=l.getBBox();if(r+=s.width+4,l.on("click",(function(e){var r,i=e.target.get("id");if(i!==(null===(r=j(n))||void 0===r?void 0:r.id)){var o=n.slice(0,n.findIndex((function(t){return t.id===i}))+1);t.backTo(o)}})),l.on("mouseenter",(function(t){var r;t.target.get("id")!==(null===(r=j(n))||void 0===r?void 0:r.id)?l.attr(e.activeTextStyle):l.attr({cursor:"default"})})),l.on("mouseleave",(function(){l.attr(e.textStyle)})),a<n.length-1){var u=t.breadCrumbGroup.addShape({type:"text",name:e.name+"_"+o.name+"_divider",attrs:i(i({text:e.dividerText},e.textStyle),{x:r,y:0})}).getBBox();r+=u.width+4}}))},e.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},e.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),t.prototype.destroy.call(this)},e}(nt);function zs(t,e){return t.parent===e.parent?1:2}function Cs(t,e){return t+e.x}function Ps(t,e){return Math.max(t,e.y)}function Is(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Ts(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=_s)):void 0===e&&(e=Rs);for(var n,r,i,o,a,l=new Ws(t),s=[l];n=s.pop();)if((i=e(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)s.push(r=i[o]=new Ws(i[o])),r.parent=n,r.depth=n.depth+1;return l.eachBefore(Bs)}function Rs(t){return t.children}function _s(t){return Array.isArray(t)?t[1]:null}function Ls(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Bs(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Ws(t){this.data=t,this.depth=this.height=0,this.parent=null}function Ns(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(Array.from(t))).length,o=[];r<i;)e=t[r],n&&Gs(n,e)?++r:(n=Hs(o=js(o,e)),r=0);return n}function js(t,e){var n,r;if(Vs(e,t))return[e];for(n=0;n<t.length;++n)if(qs(e,t[n])&&Vs(Ys(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(qs(Ys(t[n],t[r]),e)&&qs(Ys(t[n],e),t[r])&&qs(Ys(t[r],e),t[n])&&Vs(Xs(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function qs(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Gs(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Vs(t,e){for(var n=0;n<e.length;++n)if(!Gs(t,e[n]))return!1;return!0}function Hs(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return Ys(t[0],t[1]);case 3:return Xs(t[0],t[1],t[2])}var e}function Ys(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,l=e.r,s=o-n,u=a-r,c=l-i,f=Math.sqrt(s*s+u*u);return{x:(n+o+s/f*c)/2,y:(r+a+u/f*c)/2,r:(f+i+l)/2}}function Xs(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,l=e.y,s=e.r,u=n.x,c=n.y,f=n.r,d=r-a,p=r-u,h=i-l,g=i-c,v=s-o,y=f-o,m=r*r+i*i-o*o,x=m-a*a-l*l+s*s,b=m-u*u-c*c+f*f,w=p*h-d*g,F=(h*b-g*x)/(2*w)-r,k=(g*v-h*y)/w,S=(p*x-d*b)/(2*w)-i,A=(d*y-p*v)/w,M=k*k+A*A-1,D=2*(o+F*k+S*A),E=F*F+S*S-o*o,O=-(M?(D+Math.sqrt(D*D-4*M*E))/(2*M):E/D);return{x:r+F+k*O,y:i+S+A*O,r:O}}function Zs(t,e,n){var r,i,o,a,l=t.x-e.x,s=t.y-e.y,u=l*l+s*s;u?(i=e.r+n.r,i*=i,a=t.r+n.r,i>(a*=a)?(r=(u+a-i)/(2*u),o=Math.sqrt(Math.max(0,a/u-r*r)),n.x=t.x-r*l-o*s,n.y=t.y-r*s+o*l):(r=(u+i-a)/(2*u),o=Math.sqrt(Math.max(0,i/u-r*r)),n.x=e.x+r*l-o*s,n.y=e.y+r*s+o*l)):(n.x=e.x+n.r,n.y=e.y)}function Us(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Ks(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function Js(t){this._=t,this.next=null,this.previous=null}function Qs(t){if(!(o=(e=t,t="object"==typeof e&&"length"in e?e:Array.from(e)).length))return 0;var e,n,r,i,o,a,l,s,u,c,f,d;if((n=t[0]).x=0,n.y=0,!(o>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;Zs(r,n,i=t[2]),n=new Js(n),r=new Js(r),i=new Js(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;t:for(s=3;s<o;++s){Zs(n._,r._,i=t[s]),i=new Js(i),u=r.next,c=n.previous,f=r._.r,d=n._.r;do{if(f<=d){if(Us(u._,i._)){r=u,n.next=r,r.previous=n,--s;continue t}f+=u._.r,u=u.next}else{if(Us(c._,i._)){(n=c).next=r,r.previous=n,--s;continue t}d+=c._.r,c=c.previous}}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=Ks(n);(i=i.next)!==r;)(l=Ks(i))<a&&(n=i,a=l);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Ns(n),s=0;s<o;++s)(n=t[s]).x-=i.x,n.y-=i.y;return i.r}function tu(t){return null==t?null:eu(t)}function eu(t){if("function"!=typeof t)throw new Error;return t}function nu(){return 0}function ru(t){return function(){return t}}function iu(t){return Math.sqrt(t.value)}function ou(){var t=null,e=1,n=1,r=nu;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(au(t)).eachAfter(lu(r,.5)).eachBefore(su(1)):i.eachBefore(au(iu)).eachAfter(lu(nu,1)).eachAfter(lu(r,i.r/Math.min(e,n))).eachBefore(su(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=tu(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:ru(+t),i):r},i}function au(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function lu(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,l=t(n)*e||0;if(l)for(i=0;i<a;++i)r[i].r+=l;if(o=Qs(r),l)for(i=0;i<a;++i)r[i].r-=l;n.r=o+l}}}function su(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function uu(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function cu(t,e,n,r,i){for(var o,a=t.children,l=-1,s=a.length,u=t.value&&(r-e)/t.value;++l<s;)(o=a[l]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*u}function fu(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&cu(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,l=r.y1-n;a<i&&(i=a=(i+a)/2),l<o&&(o=l=(o+l)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=l}}(e,o)),r&&i.eachBefore(uu),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i}Ws.prototype=Ts.prototype={constructor:Ws,count:function(){return this.eachAfter(Is)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,o=this,a=[o],l=[],s=-1;o=a.pop();)if(l.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=l.pop();)t.call(e,o,++s,this);return this},eachBefore:function(t,e){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(t.call(e,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return Ts(this).eachBefore(Ls)},[Symbol.iterator]:function*(){var t,e,n,r,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n])}while(o.length)}};var du={depth:-1},pu={};function hu(t){return t.id}function gu(t){return t.parentId}function vu(t,e){return t.parent===e.parent?1:2}function yu(t){var e=t.children;return e?e[0]:t.t}function mu(t){var e=t.children;return e?e[e.length-1]:t.t}function xu(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function bu(t,e,n){return t.a.parent===e.parent?t.a:n}function wu(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function Fu(t,e,n,r,i){for(var o,a=t.children,l=-1,s=a.length,u=t.value&&(i-n)/t.value;++l<s;)(o=a[l]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*u}wu.prototype=Object.create(Ws.prototype);var ku=(1+Math.sqrt(5))/2;function Su(t,e,n,r,i,o){for(var a,l,s,u,c,f,d,p,h,g,v,y=[],m=e.children,x=0,b=0,w=m.length,F=e.value;x<w;){s=i-n,u=o-r;do{c=m[b++].value}while(!c&&b<w);for(f=d=c,v=c*c*(g=Math.max(u/s,s/u)/(F*t)),h=Math.max(d/v,v/f);b<w;++b){if(c+=l=m[b].value,l<f&&(f=l),l>d&&(d=l),v=c*c*g,(p=Math.max(d/v,v/f))>h){c-=l;break}h=p}y.push(a={value:c,dice:s<u,children:m.slice(x,b)}),a.dice?cu(a,n,r,i,F?r+=u*c/F:o):Fu(a,n,r,F?n+=s*c/F:i,o),F-=c,x=b}return y}var Au=function t(e){function n(t,n,r,i,o){Su(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(ku);function Mu(){var t=Au,e=!1,n=1,r=1,i=[0],o=nu,a=nu,l=nu,s=nu,u=nu;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(f),i=[0],e&&t.eachBefore(uu),t}function f(e){var n=i[e.depth],r=e.x0+n,c=e.y0+n,f=e.x1-n,d=e.y1-n;f<r&&(r=f=(r+f)/2),d<c&&(c=d=(c+d)/2),e.x0=r,e.y0=c,e.x1=f,e.y1=d,e.children&&(n=i[e.depth+1]=o(e)/2,r+=u(e)-n,c+=a(e)-n,(f-=l(e)-n)<r&&(r=f=(r+f)/2),(d-=s(e)-n)<c&&(c=d=(c+d)/2),t(e,r,c,f,d))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],r=+t[1],c):[n,r]},c.tile=function(e){return arguments.length?(t=eu(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:ru(+t),c):o},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:ru(+t),c):a},c.paddingRight=function(t){return arguments.length?(l="function"==typeof t?t:ru(+t),c):l},c.paddingBottom=function(t){return arguments.length?(s="function"==typeof t?t:ru(+t),c):s},c.paddingLeft=function(t){return arguments.length?(u="function"==typeof t?t:ru(+t),c):u},c}var Du=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,l,s,u,c,f=-1,d=a.length,p=t.value;++f<d;){for(s=(l=a[f]).children,u=l.value=0,c=s.length;u<c;++u)l.value+=s[u].value;l.dice?cu(l,n,r,i,p?r+=(o-r)*l.value/p:o):Fu(l,n,r,p?n+=(i-n)*l.value/p:i,o),p-=l.value}else t._squarify=a=Su(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(ku),Eu=Object.freeze(Object.defineProperty({__proto__:null,cluster:function(){var t=zs,e=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(Cs,0)/t.length}(n),e.y=function(t){return 1+t.reduce(Ps,0)}(n)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)}));var l=function(t){for(var e;e=t.children;)t=e[0];return t}(i),s=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),u=l.x-t(l,s)/2,c=s.x+t(s,l)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-u)/(c-u)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},hierarchy:Ts,pack:ou,packSiblings:function(t){return Qs(t),t},packEnclose:Ns,partition:fu,stratify:function(){var t=hu,e=gu;function n(n){var r,i,o,a,l,s,u,c=Array.from(n),f=c.length,d=new Map;for(i=0;i<f;++i)r=c[i],l=c[i]=new Ws(r),null!=(s=t(r,i,n))&&(s+="")&&(u=l.id=s,d.set(u,d.has(u)?pu:l)),null!=(s=e(r,i,n))&&(s+="")&&(l.parent=s);for(i=0;i<f;++i)if(s=(l=c[i]).parent){if(!(a=d.get(s)))throw new Error("missing: "+s);if(a===pu)throw new Error("ambiguous: "+s);a.children?a.children.push(l):a.children=[l],l.parent=a}else{if(o)throw new Error("multiple roots");o=l}if(!o)throw new Error("no root");if(o.parent=du,o.eachBefore((function(t){t.depth=t.parent.depth+1,--f})).eachBefore(Bs),o.parent=null,f>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=eu(e),n):t},n.parentId=function(t){return arguments.length?(e=eu(t),n):e},n},tree:function(){var t=vu,e=1,n=1,r=null;function i(i){var s=function(t){for(var e,n,r,i,o,a=new wu(t,0),l=[a];e=l.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)l.push(n=e.children[i]=new wu(r[i],i)),n.parent=e;return(a.parent=new wu(null,0)).children=[a],a}(i);if(s.eachAfter(o),s.parent.m=-s.z,s.eachBefore(a),r)i.eachBefore(l);else{var u=i,c=i,f=i;i.eachBefore((function(t){t.x<u.x&&(u=t),t.x>c.x&&(c=t),t.depth>f.depth&&(f=t)}));var d=u===c?1:t(u,c)/2,p=d-u.x,h=e/(c.x+d+p),g=n/(f.depth||1);i.eachBefore((function(t){t.x=(t.x+p)*h,t.y=t.depth*g}))}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,l=n,s=o.parent.children[0],u=o.m,c=a.m,f=l.m,d=s.m;l=mu(l),o=yu(o),l&&o;)s=yu(s),(a=mu(a)).a=e,(i=l.z+f-o.z-u+t(l._,o._))>0&&(xu(bu(l,e,r),e,i),u+=i,c+=i),f+=l.m,u+=o.m,d+=s.m,c+=a.m;l&&!mu(a)&&(a.t=l,a.m+=f-c),o&&!yu(s)&&(s.t=o,s.m+=u-d,r=e)}return r}(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},treemap:Mu,treemapBinary:function(t,e,n,r,i){var o,a,l=t.children,s=l.length,u=new Array(s+1);for(u[0]=a=o=0;o<s;++o)u[o+1]=a+=l[o].value;!function t(e,n,r,i,o,a,s){if(e>=n-1){var c=l[e];return c.x0=i,c.y0=o,c.x1=a,void(c.y1=s)}var f=u[e],d=r/2+f,p=e+1,h=n-1;for(;p<h;){var g=p+h>>>1;u[g]<d?p=g+1:h=g}d-u[p-1]<u[p]-d&&e+1<p&&--p;var v=u[p]-f,y=r-v;if(a-i>s-o){var m=r?(i*y+a*v)/r:a;t(e,p,v,i,o,m,s),t(p,n,y,m,o,a,s)}else{var x=r?(o*y+s*v)/r:s;t(e,p,v,i,o,a,x),t(p,n,y,i,x,a,s)}}(0,s,t.value,e,n,r,i)},treemapDice:cu,treemapSlice:Fu,treemapSliceDice:function(t,e,n,r,i){(1&t.depth?Fu:cu)(t,e,n,r,i)},treemapSquarify:Au,treemapResquarify:Du},Symbol.toStringTag,{value:"Module"})),Ou={field:"value",size:[1,1],round:!1,padding:0,sort:function(t,e){return e.value-t.value},as:["x","y"],ignoreParentValue:!0};function $u(e,n){var r,i=(n=E({},Ou,n)).as;if(!d(i)||2!==i.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{r=As(n)}catch(u){}var o,a=(o=e,fu().size(n.size).round(n.round).padding(n.padding)(Ts(o).sum((function(e){return O(e.children)?n.ignoreParentValue?0:e[r]-t(e.children,(function(t,e){return t+e[r]}),0):e[r]})).sort(n.sort))),l=i[0],s=i[1];return a.each((function(t){var e,n;t[l]=[t.x0,t.x1,t.x1,t.x0],t[s]=[t.y1,t.y1,t.y0,t.y0],t.name=t.name||(null===(e=t.data)||void 0===e?void 0:e.name)||(null===(n=t.data)||void 0===n?void 0:n.label),t.data.name=t.name,["x0","x1","y0","y1"].forEach((function(e){-1===i.indexOf(e)&&delete t[e]}))})),Ms(a)}var zu,Cu={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(t,e){return e.value-t.value},ratio:.5*(1+Math.sqrt(5))};function Pu(t,e){var n,r=(e=E({},Cu,e)).as;if(!d(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=As(e)}catch(f){}var i,o,a,l=(i=e.tile,o=e.ratio,"treemapSquarify"===i?Eu[i].ratio(o):Eu[i]),s=(a=t,Mu().tile(l).size(e.size).round(e.round).padding(e.padding).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft)(Ts(a).sum((function(t){return e.ignoreParentValue&&t.children?0:t[n]})).sort(e.sort))),u=r[0],c=r[1];return s.each((function(t){t[u]=[t.x0,t.x1,t.x1,t.x0],t[c]=[t.y1,t.y1,t.y0,t.y0],["x0","x1","y0","y1"].forEach((function(e){-1===r.indexOf(e)&&delete t[e]}))})),Ms(s)}function Iu(t){var n=t.data,r=t.colorField,o=t.rawFields,a=t.hierarchyConfig,l=void 0===a?{}:a,s=l.activeDepth,u={partition:$u,treemap:Pu},c=t.seriesField,f=t.type||"partition",d=u[f](n,i(i({field:c||"value"},F(l,["activeDepth"])),{type:"hierarchy."+f,as:["x","y"]})),p=[];return d.forEach((function(t){var n,a,u,f,d,h;if(0===t.depth)return null;if(s>0&&t.depth>s)return null;for(var g=t.data.name,v=i({},t);v.depth>1;)g=(null===(a=v.parent.data)||void 0===a?void 0:a.name)+" / "+g,v=v.parent;var y=i(i(i({},yt(t.data,e(o||[],[l.field]))),((n={}).path=g,n["ancestor-node"]=v.data.name,n)),t);c&&(y[c]=t.data[c]||(null===(f=null===(u=t.parent)||void 0===u?void 0:u.data)||void 0===f?void 0:f[c])),r&&(y[r]=t.data[r]||(null===(h=null===(d=t.parent)||void 0===d?void 0:d.data)||void 0===h?void 0:h[r])),y.ext=l,y["hierarchy-data-transform-params"]={hierarchyConfig:l,colorField:r,rawFields:o},p.push(y)})),p}function Tu(t){var n,r=t.chart,i=t.options,a=i.color,l=i.colorField,s=void 0===l?"ancestor-node":l,u=i.sunburstStyle,c=i.rawFields,f=void 0===c?[]:c,d=Iu(i);return r.data(d),u&&(n=function(t){return Rt({},{fillOpacity:Math.pow(.85,t.depth)},o(u)?u(t):u)}),rn(Rt({},t,{options:{xField:"x",yField:"y",seriesField:s,rawFields:m(e(Ds,f)),polygon:{color:a,style:n}}})),t}function Ru(t){return t.chart.axis(!1),t}function _u(t){var e=t.chart,n=t.options.label,r=kt(e,"polygon");if(n){var i=n.fields,o=void 0===i?["name"]:i,a=n.callback,l=y(n,["fields","callback"]);r.label({fields:o,callback:a,cfg:Ot(l)})}else r.label(!1);return t}function Lu(t){var e=t.chart,n=t.options,r=n.innerRadius,i=n.radius,o=n.reflect,a=e.coordinate({type:"polar",cfg:{innerRadius:r,radius:i}});return o&&a.reflect(o),t}function Bu(t){var e,r=t.options,i=r.hierarchyConfig,o=r.meta;return vt(Ve({},((e={}).value=n(o,n(i,["field"],"value")),e)))(t)}function Wu(t){var e=t.chart,r=t.options.tooltip;if(!1===r)e.tooltip(!1);else{var o=r;n(r,"fields")||(o=Rt({},{customItems:function(t){return t.map((function(t){var r=n(e.getOptions(),"scales"),o=n(r,["path","formatter"],(function(t){return t})),a=n(r,["value","formatter"],(function(t){return t}));return i(i({},t),{name:o(t.data.path),value:a(t.data.value)})}))}},o)),e.tooltip(o)}return t}function Nu(t){var n=t.drilldown,r=t.interactions,i=void 0===r?[]:r;return(null==n?void 0:n.enabled)?Rt({},t,{interactions:e(i,[{type:"drill-down",cfg:{drillDownConfig:n,transformData:Iu}}])}):t}function ju(t){var e=t.chart,r=t.options,i=r.drilldown;return Be({chart:e,options:Nu(r)}),(null==i?void 0:i.enabled)&&(e.appendPadding=Xt(e.appendPadding,n(i,["breadCrumb","position"]))),t}function qu(t){return vt(Ne,Re("sunburstStyle"),Tu,Ru,Bu,_e,Lu,Wu,_u,ju,We,He())(t)}function Gu(t){var e=n(t,["event","data","data"],{});return d(e.children)&&e.children.length>0}function Vu(t){var e=t.view.getCoordinate(),n=e.innerRadius;if(n){var r=t.event,i=r.x,o=r.y,a=e.center,l=a.x,s=a.y,u=e.getRadius()*n;return Math.sqrt(Math.pow(l-i,2)+Math.pow(s-o,2))<u}return!1}it("drill-down-action",$s),rt("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:Gu},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:Vu}],start:[{trigger:"element:click",isEnable:Gu,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:Vu,action:["drill-down-action:back"]}]}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="sunburst",e}p(e,t),e.getDefaultOptions=function(){return Es},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return qu},e.SUNBURST_ANCESTOR_FIELD="ancestor-node",e.SUNBURST_PATH_FIELD="path",e.NODE_ANCESTORS_FIELD="nodeAncestor"}(we);var Hu={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(zu={},zu.range={sync:"v"},zu.percent={sync:"v",tickCount:5,tickInterval:.2},zu),animation:!1};function Yu(t){var e;return[(e={},e.percent=_(t,0,1),e)]}function Xu(t,e){var r=n(e,["ticks"],[]);return function(t,e){return t.map((function(n,r){var i;return(i={}).range=n-(t[r-1]||0),i.type=""+r,i.percent=e,i})).filter((function(t){return!!t.range}))}(O(r)?r:[0,_(t,0,1),1],t)}function Zu(t){var e=t.chart,n=t.options,r=n.percent,i=n.range,o=n.radius,l=n.innerRadius,s=n.startAngle,u=n.endAngle,c=n.axis,f=n.indicator,d=n.gaugeStyle,p=n.type,h=n.meter,g=i.color,v=i.width;if(f){var y=Yu(r),m=e.createView({id:"indicator-view"});m.data(y),m.point().position("percent*1").shape(f.shape||"gauge-indicator").customInfo({defaultColor:e.getTheme().defaultColor,indicator:f}),m.coordinate("polar",{startAngle:s,endAngle:u,radius:l*o}),m.axis("percent",c),m.scale("percent",yt(c,Fe))}var x=Xu(r,n.range),b=e.createView({id:"range-view"});return b.data(x),nn({chart:b,options:{xField:"1",yField:"range",seriesField:"type",rawFields:["percent"],isStack:!0,interval:{color:a(g)?[g,"#f0f0f0"]:g,style:d,shape:"meter"===p?"meter-gauge":null},args:{zIndexReversed:!0,sortZIndex:!0},minColumnWidth:v,maxColumnWidth:v}}).ext.geometry.customInfo({meter:h}),b.coordinate("polar",{innerRadius:l,radius:o,startAngle:s,endAngle:u}).transpose(),t}function Uu(t){var e;return vt(Ve(((e={range:{min:0,max:1,maxLimit:1,minLimit:0}}).percent={},e)))(t)}function Ku(t,e){var r=t.chart,l=t.options,s=l.statistic,u=l.percent;if(r.getController("annotation").clear(!0),s){var c=s.content,f=void 0;c&&(f=Rt({},{content:(100*u).toFixed(2)+"%",style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},c)),function(t,e,r){var l=e.statistic;[l.title,l.content].forEach((function(e){if(e){var l=o(e.style)?e.style(r):e.style;t.annotation().html(i({position:["50%","100%"],html:function(t,o){var s=o.getCoordinate(),u=o.views[0].getCoordinate(),c=u.getCenter(),f=u.getRadius(),d=Math.max(Math.sin(u.startAngle),Math.sin(u.endAngle))*f,p=c.y+d-s.y.start-parseFloat(n(l,"fontSize",0)),h=s.getRadius()*s.innerRadius*2;Bt(t,i({width:h+"px",transform:"translate(-50%, "+p+"px)"},Lt(l)));var g=o.getData();if(e.customHtml)return e.customHtml(t,o,r,g);var v=e.content;return e.formatter&&(v=e.formatter(r,g)),v?a(v)?v:""+v:"<div></div>"}},yt(e,["offsetX","offsetY","rotate","style","formatter"])))}}))}(r,{statistic:i(i({},s),{content:f})},{percent:u})}return e&&r.render(!0),t}function Ju(t){var e=t.chart,r=t.options.tooltip;return r?e.tooltip(Rt({showTitle:!1,showMarkers:!1,containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',domStyles:{"g2-tooltip":{padding:"4px 8px",fontSize:"10px"}},customContent:function(t,e){return(100*n(e,[0,"data","percent"],0)).toFixed(2)+"%"}},r)):e.tooltip(!1),t}function Qu(t){return t.chart.legend(!1),t}function tc(t){return vt(Ne,We,Zu,Uu,Ju,Ku,Be,He(),Qu)(t)}lt("point","gauge-indicator",{draw:function(t,e){var n=t.customInfo,r=n.indicator,o=n.defaultColor,a=r,l=a.pointer,s=a.pin,u=e.addGroup(),c=this.parsePoint({x:0,y:0});return l&&u.addShape("line",{name:"pointer",attrs:i({x1:c.x,y1:c.y,x2:t.x,y2:t.y,stroke:o},l.style)}),s&&u.addShape("circle",{name:"pin",attrs:i({x:c.x,y:c.y,stroke:o},s.style)}),u}}),lt("interval","meter-gauge",{draw:function(t,e){var n=t.customInfo.meter,r=void 0===n?{}:n,i=r.steps,o=void 0===i?50:i,a=r.stepRatio,l=void 0===a?.5:a;o=o<1?1:o,l=_(l,0,1);var s=this.coordinate,u=s.startAngle,c=s.endAngle,f=0;l>0&&l<1&&(f=(c-u)/o/(l/(1-l)+1-1/o));for(var d=f/(1-l)*l,p=e.addGroup(),h=this.coordinate.getCenter(),g=this.coordinate.getRadius(),v=tt.getAngle(t,this.coordinate),y=v.startAngle,m=v.endAngle,x=y;x<m;){var b=void 0,w=(x-u)%(d+f);b=w<d?x+(d-w):(x+=d+f-w)+d;var F=tt.getSectorPath(h.x,h.y,g,x,Math.min(b,m),g*this.coordinate.innerRadius);p.addShape("path",{name:"meter-gauge",attrs:{path:F,fill:t.color,stroke:t.color,lineWidth:.5}}),x=b+f}return p}});var ec=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="gauge",e}return p(e,t),e.getDefaultOptions=function(){return Hu},e.prototype.changeData=function(t){this.chart.emit(ot.BEFORE_CHANGE_DATA,at.fromData(this.chart,ot.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t});var e=this.chart.views.find((function(t){return"indicator-view"===t.id}));e&&e.data(Yu(t));var n=this.chart.views.find((function(t){return"range-view"===t.id}));n&&n.data(Xu(t,this.options.range)),Ku({chart:this.chart,options:this.options},!0),this.chart.emit(ot.AFTER_CHANGE_DATA,at.fromData(this.chart,ot.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return tc},e}(we),nc="$$yField$$",rc={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function ic(e,r,o,a){var l=function(e,r,o,a,l){var u,c=[];if(t(e,(function(t,e){var n;wt(xt.WARN,s(e[o]),e[o]+" is not a valid number");var r=q(e[o])?null:e[o];return c.push(i(i({},e),((n={})[a]=[t,t+r],n))),t+r}),0),c.length&&l){var f=n(c,[[e.length-1],a,[1]]);c.push(((u={})[r]=l.label,u[o]=f,u[a]=[0,f],u))}return c}(e,r,o,nc,a);return l.map((function(t,n){var r;return h(t)?i(i({},t),((r={}).$$absoluteField$$=t.$$yField$$[1],r.$$diffField$$=t.$$yField$$[1]-t.$$yField$$[0],r.$$isTotal$$=n===e.length,r)):t}))}function oc(t){var e=t.options,n=e.locale,r=e.total,i=Qt(n).get(["waterfall","total"]);return r&&"string"!=typeof r.label&&i&&(t.options.total.label=i),t}function ac(t){var e=t.chart,r=t.options,i=r.data,o=r.xField,a=r.yField,l=r.total,s=r.leaderLine,u=r.columnWidthRatio,c=r.waterfallStyle,f=r.risingFill,d=r.fallingFill,p=r.color;return e.data(ic(i,o,a,l)),nn(Rt({},t,{options:{xField:o,yField:nc,seriesField:o,rawFields:[a,"$$diffField$$","$$isTotal$$",nc],widthRatio:u,interval:{style:c,shape:"waterfall",color:p||function(t){return n(t,["$$isTotal$$"])?n(l,["style","fill"],""):n(t,[nc,1])-n(t,[nc,0])>0?f:d}}}})).ext.geometry.customInfo({leaderLine:s}),t}function lc(t){var e,r,i=t.options,o=i.xAxis,a=i.yAxis,l=i.xField,s=i.yField,u=i.meta,c=Rt({},{alias:s},n(u,s));return vt(Ve(((e={})[l]=o,e[s]=a,e.$$yField$$=a,e),Rt({},u,((r={}).$$yField$$=c,r.$$diffField$$=c,r.$$absoluteField$$=c,r))))(t)}function sc(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return!1===r?e.axis(o,!1):e.axis(o,r),!1===i?(e.axis(a,!1),e.axis(nc,!1)):(e.axis(a,i),e.axis(nc,i)),t}function uc(t){var e=t.chart,r=t.options,i=r.legend,o=r.total,a=r.risingFill,l=r.fallingFill,s=Qt(r.locale);if(!1===i)e.legend(!1);else{var u=[{name:s.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:a}}},{name:s.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:l}}}];o&&u.push({name:o.label||"",value:"total",marker:{symbol:"square",style:Rt({},{r:5},n(o,"style"))}}),e.legend(Rt({},{custom:!0,position:"top",items:u},i)),e.removeInteraction("legend-filter")}return t}function cc(t){var e=t.chart,n=t.options,r=n.label,i=n.labelMode,o=n.xField,a=kt(e,"interval");if(r){var l=r.callback,s=y(r,["callback"]);a.label({fields:"absolute"===i?["$$absoluteField$$",o]:["$$diffField$$",o],callback:l,cfg:Ot(s)})}else a.label(!1);return t}function fc(t){var e=t.chart,n=t.options,r=n.tooltip,o=n.xField,a=n.yField;if(!1!==r){e.tooltip(i({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[a]},r));var l=e.geometries[0];(null==r?void 0:r.formatter)?l.tooltip(o+"*"+a,r.formatter):l.tooltip(a)}else e.tooltip(!1);return t}function dc(t){return vt(oc,Ne,ac,lc,sc,uc,fc,cc,je,Be,We,He())(t)}function pc(t,e,n){var r=n.map((function(t){return t[e]})).filter((function(t){return void 0!==t})),i=r.length>0?Math.max.apply(Math,r):0,o=Math.abs(t)%360;return o?360*i/o:i}function hc(t){var e=t.chart,n=t.options,r=n.barStyle,i=n.color,o=n.tooltip,a=n.colorField,l=n.type,s=n.xField,u=n.yField,c=Ht(n.data,u);return e.data(c),nn(Rt({},t,{options:{tooltip:o,seriesField:a,interval:{style:r,color:i,shape:"line"===l?"line":"intervel"},minColumnWidth:n.minBarWidth,maxColumnWidth:n.maxBarWidth,columnBackground:n.barBackground}})),"line"===l&&en({chart:e,options:{xField:s,yField:u,seriesField:a,point:{shape:"circle",color:i}}}),t}function gc(t){var e,n=t.options,r=n.yField,o=n.xField,a=n.data,l=n.isStack,s=n.isGroup,u=n.colorField,c=n.maxAngle,f=l&&!s&&u?function(t,e,n){var r=[];return t.forEach((function(t){var o=r.find((function(n){return n[e]===t[e]}));o?o[n]+=t[n]||null:r.push(i({},t))})),r}(a,o,r):a,d=Ht(f,r);return vt(Ve(((e={})[r]={min:0,max:pc(c,r,d)},e)))(t)}function vc(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,o=n.startAngle,a=n.endAngle;return e.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:o,endAngle:a}}).transpose(),t}function yc(t){var e=t.chart,n=t.options,r=n.xField,i=n.xAxis;return e.axis(r,i),t}function mc(t){var e=t.chart,n=t.options,r=n.label,o=n.yField,a=kt(e,"interval");if(r){var l=r.callback,s=y(r,["callback"]);a.label({fields:[o],callback:l,cfg:i(i({},Ot(s)),{type:"polar"})})}else a.label(!1);return t}function xc(t){return vt(Re("barStyle"),hc,gc,yc,vc,Be,We,Ne,Le,_e,He(),mc)(t)}lt("interval","waterfall",{draw:function(t,e){var r=t.customInfo,o=t.points,a=t.nextPoints,l=e.addGroup(),s=this.parsePath(function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(r){var i=0===n?"M":"L";e.push([i,r.x,r.y])}}var o=t[0];return e.push(["L",o.x,o.y]),e.push(["z"]),e}(o)),u=function(t){return Rt({},t.defaultStyle,t.style,{fill:t.color})}(t);l.addShape("path",{attrs:i(i({},u),{path:s})});var c=n(r,"leaderLine");if(c&&a){var f=[["M",o[2].x,o[2].y],["L",a[0].x,a[0].y]];o[2].y===a[1].y&&(f[1]=["L",a[1].x,a[1].y]),f=this.parsePath(f),l.addShape("path",{attrs:i({path:f},c.style||{})})}return l}}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="waterfall",e}p(e,t),e.getDefaultOptions=function(){return rc},e.prototype.changeData=function(t){var e=this.options,n=e.xField,r=e.yField,i=e.total;this.updateOption({data:t}),this.chart.changeData(ic(t,n,r,i))},e.prototype.getSchemaAdaptor=function(){return dc},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()}}(we);var bc=Rt({},we.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="radial-bar",e}p(e,t),e.getDefaultOptions=function(){return bc},e.prototype.changeData=function(t){this.updateOption({data:t}),gc({chart:this.chart,options:this.options}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return xc}}(we);function wc(t,e,n,r,i){var o=[];e.forEach((function(e){r.forEach((function(r){var i,a=((i={})[t]=r[t],i[n]=e,i[e]=r[e],i);o.push(a)}))}));var a=Object.values(T(o,n)),l=a[0],s=void 0===l?[]:l,u=a[1],c=void 0===u?[]:u;return i?[s.reverse(),c.reverse()]:[s,c]}function Fc(t){return"vertical"!==t}function kc(t,e,n){var r=e[0],i=e[1],o=r.autoPadding,a=i.autoPadding,l=t.__axisPosition,s=l.layout,u=l.position;if(Fc(s)&&"top"===u&&(r.autoPadding=n.instance(o.top,0,o.bottom,o.left),i.autoPadding=n.instance(a.top,o.left,a.bottom,0)),Fc(s)&&"bottom"===u&&(r.autoPadding=n.instance(o.top,o.right/2+5,o.bottom,o.left),i.autoPadding=n.instance(a.top,a.right,a.bottom,o.right/2+5)),!Fc(s)&&"bottom"===u){var c=o.left>=a.left?o.left:a.left;r.autoPadding=n.instance(o.top,o.right,o.bottom/2+5,c),i.autoPadding=n.instance(o.bottom/2+5,a.right,a.bottom,c)}if(!Fc(s)&&"top"===u){c=o.left>=a.left?o.left:a.left;r.autoPadding=n.instance(o.top,o.right,0,c),i.autoPadding=n.instance(0,a.right,o.top,c)}}function Sc(t){var e,n,r=t.chart,i=t.options,o=i.data,a=i.xField,l=i.yField,s=i.color,u=i.barStyle,c=i.widthRatio,f=i.legend,d=i.layout,p=wc(a,l,"series-field-key",o,Fc(d));f?r.legend("series-field-key",f):!1===f&&r.legend(!1);var h=p[0],g=p[1];return Fc(d)?((e=r.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:"first-axes-view"})).coordinate().transpose().reflect("x"),(n=r.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:"second-axes-view"})).coordinate().transpose(),e.data(h),n.data(g)):(e=r.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:"first-axes-view"}),(n=r.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:"second-axes-view"})).coordinate().reflect("y"),e.data(h),n.data(g)),nn(Rt({},t,{chart:e,options:{widthRatio:c,xField:a,yField:l[0],seriesField:"series-field-key",interval:{color:s,style:u}}})),nn(Rt({},t,{chart:n,options:{xField:a,yField:l[1],seriesField:"series-field-key",widthRatio:c,interval:{color:s,style:u}}})),t}function Ac(t){var e,r,i,o=t.options,a=t.chart,l=o.xAxis,s=o.yAxis,u=o.xField,c=o.yField,f=Mt(a,"first-axes-view"),d=Mt(a,"second-axes-view"),p={};return G((null==o?void 0:o.meta)||{}).map((function(t){n(null==o?void 0:o.meta,[t,"alias"])&&(p[t]=o.meta[t].alias)})),a.scale(((e={})["series-field-key"]={sync:!0,formatter:function(t){return n(p,t,t)}},e)),Ve(((r={})[u]=l,r[c[0]]=s[c[0]],r))(Rt({},t,{chart:f})),Ve(((i={})[u]=l,i[c[1]]=s[c[1]],i))(Rt({},t,{chart:d})),t}function Mc(t){var e=t.chart,n=t.options,r=n.xAxis,o=n.yAxis,a=n.xField,l=n.yField,s=n.layout,u=Mt(e,"first-axes-view"),c=Mt(e,"second-axes-view");return"bottom"===(null==r?void 0:r.position)?c.axis(a,i(i({},r),{label:{formatter:function(){return""}}})):c.axis(a,!1),!1===r?u.axis(a,!1):u.axis(a,i({position:Fc(s)?"top":"bottom"},r)),!1===o?(u.axis(l[0],!1),c.axis(l[1],!1)):(u.axis(l[0],o[l[0]]),c.axis(l[1],o[l[1]])),e.__axisPosition={position:u.getOptions().axes[a].position,layout:s},t}function Dc(t){var e=t.chart;return Be(Rt({},t,{chart:Mt(e,"first-axes-view")})),Be(Rt({},t,{chart:Mt(e,"second-axes-view")})),t}function Ec(t){var e=t.chart,n=t.options,r=n.yField,i=n.yAxis;return Ye(Rt({},t,{chart:Mt(e,"first-axes-view"),options:{yAxis:i[r[0]]}})),Ye(Rt({},t,{chart:Mt(e,"second-axes-view"),options:{yAxis:i[r[1]]}})),t}function Oc(t){var e=t.chart;return Ne(Rt({},t,{chart:Mt(e,"first-axes-view")})),Ne(Rt({},t,{chart:Mt(e,"second-axes-view")})),Ne(t),t}function $c(t){var e=t.chart;return We(Rt({},t,{chart:Mt(e,"first-axes-view")})),We(Rt({},t,{chart:Mt(e,"second-axes-view")})),t}function zc(t){var e,n,r=this,o=t.chart,a=t.options,l=a.label,s=a.yField,u=a.layout,c=Mt(o,"first-axes-view"),f=Mt(o,"second-axes-view"),d=kt(c,"interval"),p=kt(f,"interval");if(l){var h=l.callback,g=y(l,["callback"]);g.position||(g.position="middle"),void 0===g.offset&&(g.offset=2);var v=i({},g);if(Fc(u)){var m=(null===(e=v.style)||void 0===e?void 0:e.textAlign)||("middle"===g.position?"center":"left");g.style=Rt({},g.style,{textAlign:m});v.style=Rt({},v.style,{textAlign:{left:"right",right:"left",center:"center"}[m]})}else{var x={top:"bottom",bottom:"top",middle:"middle"};"string"==typeof g.position?g.position=x[g.position]:"function"==typeof g.position&&(g.position=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return x[g.position.apply(r,t)]});var b=(null===(n=v.style)||void 0===n?void 0:n.textBaseline)||"bottom";v.style=Rt({},v.style,{textBaseline:b});g.style=Rt({},g.style,{textBaseline:{top:"bottom",bottom:"top",middle:"middle"}[b]})}d.label({fields:[s[0]],callback:h,cfg:Ot(v)}),p.label({fields:[s[1]],callback:h,cfg:Ot(g)})}else d.label(!1),p.label(!1);return t}function Cc(t){return vt(Sc,Ac,Mc,Ec,Oc,zc,Le,Dc,$c)(t)}function Pc(t,e){if(d(t))return t.find((function(t){return t.type===e}))}function Ic(t,e){var n=Pc(t,e);return n&&!1!==n.enable}function Tc(t){var e=t.interactions,r=t.drilldown;return n(r,"enabled")||Ic(e,"treemap-drill-down")}function Rc(t){var e=t.data,n=t.colorField,r=t.enableDrillDown,o=t.hierarchyConfig,a=Pu(e,i(i({},o),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),l=[];return a.forEach((function(t){if(0===t.depth)return null;if(r&&1!==t.depth)return null;if(!r&&t.children)return null;var a=t.ancestors().map((function(t){return{data:t.data,height:t.height,value:t.value}})),s=r&&d(e.path)?a.concat(e.path.slice(1)):a,u=Object.assign({},t.data,i({x:t.x,y:t.y,depth:t.depth,value:t.value,path:s},t));if(!t.data[n]&&t.parent){var c=t.ancestors().find((function(t){return t.data[n]}));u[n]=null==c?void 0:c.data[n]}else u[n]=t.data[n];u["hierarchy-data-transform-params"]={hierarchyConfig:o,colorField:n,enableDrillDown:r},l.push(u)})),l}function _c(t){var e=t.options.colorField;return Rt({options:{rawFields:["value"],tooltip:{fields:["name","value",e,"path"],formatter:function(t){return{name:t.name,value:t.value}}}}},t)}function Lc(t){var e=t.chart,n=t.options,r=n.color,i=n.colorField,o=n.rectStyle,a=n.hierarchyConfig,l=n.rawFields,s=Rc({data:n.data,colorField:n.colorField,enableDrillDown:Tc(n),hierarchyConfig:a});return e.data(s),rn(Rt({},t,{options:{xField:"x",yField:"y",seriesField:i,rawFields:l,polygon:{color:r,style:o}}})),e.coordinate().reflect("y"),t}function Bc(t){return t.chart.axis(!1),t}function Wc(t){var n=t.drilldown,r=t.interactions,i=void 0===r?[]:r;return Tc(t)?Rt({},t,{interactions:e(i,[{type:"drill-down",cfg:{drillDownConfig:n,transformData:Rc}}])}):t}function Nc(t){var e=t.chart,r=t.options,i=r.interactions,o=r.drilldown;Be({chart:e,options:Wc(r)});var a=Pc(i,"view-zoom");return a&&(!1!==a.enable?e.getCanvas().on("mousewheel",(function(t){t.preventDefault()})):e.getCanvas().off("mousewheel")),Tc(r)&&(e.appendPadding=Xt(e.appendPadding,n(o,["breadCrumb","position"]))),t}function jc(t){return vt(_c,Ne,Re("rectStyle"),Lc,Bc,_e,Le,Nc,We,He())(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="bidirectional-bar",e}p(e,t),e.getDefaultOptions=function(){return Rt({},t.getDefaultOptions.call(this),{syncViewPadding:kc})},e.prototype.changeData=function(t){void 0===t&&(t=[]),this.chart.emit(ot.BEFORE_CHANGE_DATA,at.fromData(this.chart,ot.BEFORE_CHANGE_DATA,null)),this.updateOption({data:t});var e=this.options,n=wc(e.xField,e.yField,"series-field-key",t,Fc(e.layout)),r=n[0],i=n[1],o=Mt(this.chart,"first-axes-view"),a=Mt(this.chart,"second-axes-view");o.data(r),a.data(i),this.chart.render(!0),this.chart.emit(ot.AFTER_CHANGE_DATA,at.fromData(this.chart,ot.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Cc},e.SERIES_FIELD_KEY="series-field-key"}(we);var qc={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"初始",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}};function Gc(t){return t.target.depth}function Vc(t,e){return t.sourceLinks.length?t.depth:e-1}function Hc(t){return function(){return t}}function Yc(t,e){for(var n=0,r=0;r<t.length;r++)n+=e(t[r]);return n}function Xc(t,e){for(var n=-1/0,r=0;r<t.length;r++)n=Math.max(e(t[r]),n);return n}function Zc(t,e){return Kc(t.source,e.source)||t.index-e.index}function Uc(t,e){return Kc(t.target,e.target)||t.index-e.index}function Kc(t,e){return t.y0-e.y0}function Jc(t){return t.value}function Qc(t){return t.index}function tf(t){return t.nodes}function ef(t){return t.links}function nf(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function rf(t){for(var e=0,n=t.nodes;e<n.length;e++){for(var r=n[e],i=r.y0,o=i,a=0,l=r.sourceLinks;a<l.length;a++){(c=l[a]).y0=i+c.width/2,i+=c.width}for(var s=0,u=r.targetLinks;s<u.length;s++){var c;(c=u[s]).y1=o+c.width/2,o+=c.width}}}function of(){var t,e,n,r,i=0,o=0,a=1,l=1,s=24,u=8,c=Qc,f=Vc,d=tf,p=ef,h=6;function g(g){var m={nodes:d(g),links:p(g)};return function(t){var e=t.nodes,n=t.links;e.forEach((function(t,e){t.index=e,t.sourceLinks=[],t.targetLinks=[]}));var i=new Map(e.map((function(t){return[c(t),t]})));if(n.forEach((function(t,e){t.index=e;var n=t.source,r=t.target;"object"!=typeof n&&(n=t.source=nf(i,n)),"object"!=typeof r&&(r=t.target=nf(i,r)),n.sourceLinks.push(t),r.targetLinks.push(t)})),null!=r)for(var o=0,a=e;o<a.length;o++){var l=a[o],s=l.sourceLinks,u=l.targetLinks;s.sort(r),u.sort(r)}}(m),function(t){for(var e=t.nodes,n=0,r=e;n<r.length;n++){var i=r[n];i.value=void 0===i.fixedValue?Math.max(Yc(i.sourceLinks,Jc),Yc(i.targetLinks,Jc)):i.fixedValue}}(m),function(t){var n=t.nodes,r=n.length,i=new Set(n),o=new Set,a=0;for(;i.size;){if(i.forEach((function(t){t.depth=a;for(var e=0,n=t.sourceLinks;e<n.length;e++){var r=n[e].target;o.add(r)}})),++a>r)throw new Error("circular link");i=o,o=new Set}if(e)for(var l=Math.max(Xc(n,(function(t){return t.depth}))+1,0),s=void 0,u=0;u<n.length;u++)(s=n[u]).depth=e.call(null,s,l)}(m),function(t){var e=t.nodes,n=e.length,r=new Set(e),i=new Set,o=0;for(;r.size;){if(r.forEach((function(t){t.height=o;for(var e=0,n=t.targetLinks;e<n.length;e++){var r=n[e].source;i.add(r)}})),++o>n)throw new Error("circular link");r=i,i=new Set}}(m),function(e){var r=function(t){for(var e=t.nodes,r=Math.max(Xc(e,(function(t){return t.depth}))+1,0),o=(a-i-s)/(r-1),l=new Array(r).fill(0).map((function(){return[]})),u=0,c=e;u<c.length;u++){var d=c[u],p=Math.max(0,Math.min(r-1,Math.floor(f.call(null,d,r))));d.layer=p,d.x0=i+p*o,d.x1=d.x0+s,l[p]?l[p].push(d):l[p]=[d]}if(n)for(var h=0,g=l;h<g.length;h++){g[h].sort(n)}return l}(e);t=Math.min(u,(l-o)/(Xc(r,(function(t){return t.length}))-1)),function(e){for(var n=function(t,e){for(var n=1/0,r=0;r<t.length;r++)n=Math.min(e(t[r]),n);return n}(e,(function(e){return(l-o-(e.length-1)*t)/Yc(e,Jc)})),r=0,i=e;r<i.length;r++){for(var a=i[r],s=o,u=0,c=a;u<c.length;u++){(g=c[u]).y0=s,g.y1=s+g.value*n,s=g.y1+t;for(var f=0,d=g.sourceLinks;f<d.length;f++){var p=d[f];p.width=p.value*n}}s=(l-s+t)/(a.length+1);for(var h=0;h<a.length;++h){var g;(g=a[h]).y0+=s*(h+1),g.y1+=s*(h+1)}F(a)}}(r);for(var c=0;c<h;++c){var d=Math.pow(.99,c),p=Math.max(1-d,(c+1)/h);y(r,d,p),v(r,d,p)}}(m),rf(m),m}function v(t,e,r){for(var i=1,o=t.length;i<o;++i){for(var a=t[i],l=0,s=a;l<s.length;l++){for(var u=s[l],c=0,f=0,d=0,p=u.targetLinks;d<p.length;d++){var h=p[d],g=h.source,v=h.value*(u.layer-g.layer);c+=k(g,u)*v,f+=v}if(f>0){var y=(c/f-u.y0)*e;u.y0+=y,u.y1+=y,w(u)}}void 0===n&&a.sort(Kc),a.length&&m(a,r)}}function y(t,e,r){for(var i=t.length-2;i>=0;--i){for(var o=t[i],a=0,l=o;a<l.length;a++){for(var s=l[a],u=0,c=0,f=0,d=s.sourceLinks;f<d.length;f++){var p=d[f],h=p.target,g=p.value*(h.layer-s.layer);u+=S(s,h)*g,c+=g}if(c>0){var v=(u/c-s.y0)*e;s.y0+=v,s.y1+=v,w(s)}}void 0===n&&o.sort(Kc),o.length&&m(o,r)}}function m(e,n){var r=e.length>>1,i=e[r];b(e,i.y0-t,r-1,n),x(e,i.y1+t,r+1,n),b(e,l,e.length-1,n),x(e,o,0,n)}function x(e,n,r,i){for(;r<e.length;++r){var o=e[r],a=(n-o.y0)*i;a>1e-6&&(o.y0+=a,o.y1+=a),n=o.y1+t}}function b(e,n,r,i){for(;r>=0;--r){var o=e[r],a=(o.y1-n)*i;a>1e-6&&(o.y0-=a,o.y1-=a),n=o.y0-t}}function w(t){var e=t.sourceLinks,n=t.targetLinks;if(void 0===r){for(var i=0,o=n;i<o.length;i++){o[i].source.sourceLinks.sort(Uc)}for(var a=0,l=e;a<l.length;a++){l[a].target.targetLinks.sort(Zc)}}}function F(t){if(void 0===r)for(var e=0,n=t;e<n.length;e++){var i=n[e],o=i.sourceLinks,a=i.targetLinks;o.sort(Uc),a.sort(Zc)}}function k(e,n){for(var r=e.y0-(e.sourceLinks.length-1)*t/2,i=0,o=e.sourceLinks;i<o.length;i++){var a=o[i],l=a.target,s=a.width;if(l===n)break;r+=s+t}for(var u=0,c=n.targetLinks;u<c.length;u++){var f=c[u];l=f.source,s=f.width;if(l===e)break;r-=s}return r}function S(e,n){for(var r=n.y0-(n.targetLinks.length-1)*t/2,i=0,o=n.targetLinks;i<o.length;i++){var a=o[i],l=a.source,s=a.width;if(l===e)break;r+=s+t}for(var u=0,c=e.sourceLinks;u<c.length;u++){var f=c[u];l=f.target,s=f.width;if(l===n)break;r-=s}return r}return g.update=function(t){return rf(t),t},g.nodeId=function(t){return arguments.length?(c="function"==typeof t?t:Hc(t),g):c},g.nodeAlign=function(t){return arguments.length?(f="function"==typeof t?t:Hc(t),g):f},g.nodeDepth=function(t){return arguments.length?(e=t,g):e},g.nodeSort=function(t){return arguments.length?(n=t,g):n},g.nodeWidth=function(t){return arguments.length?(s=+t,g):s},g.nodePadding=function(e){return arguments.length?(u=t=+e,g):u},g.nodes=function(t){return arguments.length?(d="function"==typeof t?t:Hc(t),g):d},g.links=function(t){return arguments.length?(p="function"==typeof t?t:Hc(t),g):p},g.linkSort=function(t){return arguments.length?(r=t,g):r},g.size=function(t){return arguments.length?(i=o=0,a=+t[0],l=+t[1],g):[a-i,l-o]},g.extent=function(t){return arguments.length?(i=+t[0][0],a=+t[1][0],o=+t[0][1],l=+t[1][1],g):[[i,o],[a,l]]},g.iterations=function(t){return arguments.length?(h=+t,g):h},g}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="treemap",e}p(e,t),e.getDefaultOptions=function(){return qc},e.prototype.changeData=function(t){var e=this.options,n=e.colorField,r=e.interactions,i=e.hierarchyConfig;this.updateOption({data:t});var o,a,l=Rc({data:t,colorField:n,enableDrillDown:Ic(r,"treemap-drill-down"),hierarchyConfig:i});this.chart.changeData(l),o=this.chart,(a=o.interactions["drill-down"])&&a.context.actions.find((function(t){return"drill-down-action"===t.name})).reset()},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return jc}}(we);var af={left:function(t){return t.depth},right:function(t,e){return e-1-t.height},center:function(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?V(t.sourceLinks,Gc)-1:0},justify:Vc},lf={nodeId:function(t){return t.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function sf(t,e){var n=function(t){return E({},lf,t)}(t),r=n.nodeId,i=n.nodeSort,l=n.nodeAlign,s=n.nodeWidth,u=n.nodePadding,c=n.nodeDepth,f=of().nodeSort(i).nodeWidth(s).nodePadding(u).nodeDepth(c).nodeAlign(function(t){return(a(t)?af[t]:o(t)?t:null)||Vc}(l)).extent([[0,0],[1,1]]).nodeId(r),d=f(e);return{nodes:d.nodes.map((function(t){var e=t.x0,n=t.x1,r=t.y0,i=t.y1;return t.x=[e,n,n,e],t.y=[r,r,i,i],t})).filter((function(t){return null!==t.name})),links:d.links.map((function(t){var e=t.source,n=t.target,r=e.x1,i=n.x0;t.x=[r,r,i,i];var o=t.width/2;return t.y=[t.y0+o,t.y0-o,t.y1+o,t.y1-o],t})).filter((function(t){var e=t.source,n=t.target;return null!==e.name&&null!==n.name}))}}function uf(t,e,n){if(!d(t))return[];var r=[],i=function(t,e,n){var r=[];return t.forEach((function(t){var i=t[e],o=t[n];r.includes(i)||r.push(i),r.includes(o)||r.push(o)})),r}(t,e,n),o=function(t,e,n,r){var i={};return e.forEach((function(t){i[t]={},e.forEach((function(e){i[t][e]=0}))})),t.forEach((function(t){i[t[n]][t[r]]=1})),i}(t,i,e,n),a={};function l(t){a[t]=1,i.forEach((function(e){if(0!=o[t][e])if(1==a[e])r.push(t+"_"+e);else{if(-1==a[e])return;l(e)}})),a[t]=-1}return i.forEach((function(t){a[t]=0})),i.forEach((function(t){-1!=a[t]&&l(t)})),r.length,t.filter((function(t){return r.findIndex((function(r){return r===t[e]+"_"+t[n]}))<0}))}function cf(t,e,n){return qt(t)?t/n:e}function ff(t,e,n){return qt(t)?t/n:e}function df(t,n,r){var o,a=t.dataType,l=t.data,s=t.sourceField,u=t.targetField,c=t.weightField,f=t.nodeAlign,d=t.nodeSort,p=t.nodePadding,h=t.nodePaddingRatio,g=t.nodeWidth,v=t.nodeWidthRatio,y=t.nodeDepth,m=t.rawFields,x=void 0===m?[]:m;o=function(t){return"node-link"===t}(a)?l:Vt(uf(l,s,u),s,u,c,x);var b=sf({nodeAlign:f,nodePadding:ff(p,h,r),nodeWidth:cf(g,v,n),nodeSort:d,nodeDepth:y},o),w=b.nodes,F=b.links;return{nodes:w.map((function(t){return i(i({},yt(t,e(["x","y","name"],x))),{isNode:!0})})),edges:F.map((function(t){return i(i({source:t.source.name,target:t.target.name,name:t.source.name||t.target.name},yt(t,e(["x","y","value"],x))),{isNode:!1})}))}}function pf(t){var n=t.options.rawFields,r=void 0===n?[]:n;return Rt({},{options:{tooltip:{fields:m(e(["name","source","target","value","isNode"],r))},label:{fields:m(e(["x","name"],r))}}},t)}function hf(t){var e=t.chart,n=t.options,r=n.color,i=n.nodeStyle,o=n.edgeStyle,a=n.label,l=n.tooltip,s=n.nodeState,u=n.edgeState;e.legend(!1),e.tooltip(l),e.axis(!1),e.coordinate().reflect("y");var c=df(n,e.width,e.height),f=c.nodes,d=c.edges,p=e.createView({id:"edges"});p.data(d),on({chart:p,options:{xField:"x",yField:"y",seriesField:"name",edge:{color:r,style:o,shape:"arc"},tooltip:l,state:u}});var h=e.createView({id:"nodes"});return h.data(f),rn({chart:h,options:{xField:"x",yField:"y",seriesField:"name",polygon:{color:r,style:i},label:a,tooltip:l,state:s}}),e.interaction("element-active"),e.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),t}function gf(t){var n=t.chart,r=t.options.animation;return"boolean"==typeof r?n.animate(r):n.animate(!0),e(n.views[0].geometries,n.views[1].geometries).forEach((function(t){t.animate(r)})),t}function vf(t){var e=t.chart,n="sankey-node-draggable";return t.options.nodeDraggable?e.interaction(n):e.removeInteraction(n),t}function yf(t){var e=t.chart,n=t.options,r=n.interactions,i=void 0===r?[]:r,o=[].concat(i,n.nodeInteractions||[]),a=[].concat(i,n.edgeInteractions||[]),l=Mt(e,"nodes"),s=Mt(e,"edges");return o.forEach((function(t){!1===(null==t?void 0:t.enable)?l.removeInteraction(t.type):l.interaction(t.type,t.cfg||{})})),a.forEach((function(t){!1===(null==t?void 0:t.enable)?s.removeInteraction(t.type):s.interaction(t.type,t.cfg||{})})),t}function mf(t){return vt(pf,hf,yf,vf,gf,Ne)(t)}it("sankey-node-drag",function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.isDragging=!1,e}return p(r,t),r.prototype.isNodeElement=function(){var t=n(this.context,"event.target");if(t){var e=t.get("element");return e&&e.getModel().data.isNode}return!1},r.prototype.getNodeView=function(){return Mt(this.context.view,"nodes")},r.prototype.getEdgeView=function(){return Mt(this.context.view,"edges")},r.prototype.getCurrentDatumIdx=function(t){return this.getNodeView().geometries[0].elements.indexOf(t)},r.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:n(this.context,"event.x"),y:n(this.context,"event.y")};var t=this.context.event.target.get("element"),e=this.getCurrentDatumIdx(t);if(-1===e)return;this.currentElementIdx=e,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},r.prototype.translate=function(){if(this.isDragging){var t=this.context.view,r={x:n(this.context,"event.x"),y:n(this.context,"event.y")},o=r.x-this.prevPoint.x,a=r.y-this.prevPoint.y,l=this.getNodeView(),s=l.geometries[0].elements[this.currentElementIdx];if(s&&s.getModel()){var u=s.getModel().data,c=l.getOptions().data,f=l.getCoordinate(),d={x:o/f.getWidth(),y:a/f.getHeight()},p=i(i({},u),{x:u.x.map((function(t){return t+d.x})),y:u.y.map((function(t){return t+d.y}))}),h=e(c);h[this.currentElementIdx]=p,l.data(h);var g=u.name,v=this.getEdgeView(),y=v.getOptions().data;y.forEach((function(t){t.source===g&&(t.x[0]+=d.x,t.x[1]+=d.x,t.y[0]+=d.y,t.y[1]+=d.y),t.target===g&&(t.x[2]+=d.x,t.x[3]+=d.x,t.y[2]+=d.y,t.y[3]+=d.y)})),v.data(y),this.prevPoint=r,t.render(!0)}}},r.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},r}(nt)),rt("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(t){return t.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="sankey",e}p(e,t),e.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(t){return t.name},callback:function(t){var e=1===t[1];return{style:{fill:"#545454",textAlign:e?"end":"start"},offsetX:e?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(t){return!n(t,[0,"data","isNode"])},formatter:function(t){return{name:t.source+" -> "+t.target,value:t.value}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},e.prototype.changeData=function(t){this.updateOption({data:t});var e=df(this.options,this.chart.width,this.chart.height),n=e.nodes,r=e.edges,i=Mt(this.chart,"nodes"),o=Mt(this.chart,"edges");i.changeData(n),o.changeData(r)},e.prototype.getSchemaAdaptor=function(){return mf},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()}}(we);var xf={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(t){return t.id},source:function(t){return t.source},target:function(t){return t.target},sourceWeight:function(t){return t.value||1},targetWeight:function(t){return t.value||1},sortBy:null};function bf(t,e){var n=function(t){return E({},xf,t)}(t),r={},i=e.nodes,a=e.links;i.forEach((function(t){var e=n.id(t);r[e]=t})),function(t,e,n){l(t,(function(t,r){t.inEdges=e.filter((function(t){return""+n.target(t)==""+r})),t.outEdges=e.filter((function(t){return""+n.source(t)==""+r})),t.edges=t.outEdges.concat(t.inEdges),t.frequency=t.edges.length,t.value=0,t.inEdges.forEach((function(e){t.value+=n.targetWeight(e)})),t.outEdges.forEach((function(e){t.value+=n.sourceWeight(e)}))}))}(r,a,n),function(t,e){var n={weight:function(t,e){return e.value-t.value},frequency:function(t,e){return e.frequency-t.frequency},id:function(t,n){return(""+e.id(t)).localeCompare(""+e.id(n))}}[e.sortBy];!n&&o(e.sortBy)&&(n=e.sortBy),n&&t.sort(n)}(i,n);var s=function(t,e){var n=t.length;if(!n)throw new TypeError("Invalid nodes: it's empty!");if(e.weight){var r=e.nodePaddingRatio;if(r<0||r>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var i=r/(2*n),o=e.nodeWidthRatio;if(o<=0||o>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var a=0;t.forEach((function(t){a+=t.value})),t.forEach((function(t){t.weight=t.value/a,t.width=t.weight*(1-r),t.height=o})),t.forEach((function(n,r){for(var a=0,l=r-1;l>=0;l--)a+=t[l].width+2*i;var s=n.minX=i+a,u=n.maxX=n.minX+n.width,c=n.minY=e.y-o/2,f=n.maxY=c+o;n.x=[s,u,u,s],n.y=[c,c,f,f]}))}else{var l=1/n;t.forEach((function(t,n){t.x=(n+.5)*l,t.y=e.y}))}return t}(i,n),u=function(t,e,n){if(n.weight){var r={};l(t,(function(t,e){r[e]=t.value})),e.forEach((function(e){var i=n.source(e),o=n.target(e),a=t[i],l=t[o];if(a&&l){var s=r[i],u=n.sourceWeight(e),c=a.minX+(a.value-s)/a.value*a.width,f=c+u/a.value*a.width;r[i]-=u;var d=r[o],p=n.targetWeight(e),h=l.minX+(l.value-d)/l.value*l.width,g=h+p/l.value*l.width;r[o]-=p;var v=n.y;e.x=[c,f,h,g],e.y=[v,v,v,v],e.source=a,e.target=l}}))}else e.forEach((function(e){var r=t[n.source(e)],i=t[n.target(e)];r&&i&&(e.x=[r.x,i.x],e.y=[r.y,i.y],e.source=r,e.target=i)}));return e}(r,a,n);return{nodes:s,links:u}}var wf={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(t,e){return{labelEmit:!0,style:{fill:"#8c8c8c"},offsetX:(t[0]+t[1])/2>.5?-4:4,content:e}}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(t){return!n(t,[0,"data","isNode"])},formatter:function(t){return{name:t.source+" -> "+t.target,value:t.value}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function Ff(t){var n=t.options,r=n.data,o=n.sourceField,a=n.targetField,l=n.weightField,s=n.nodePaddingRatio,u=n.nodeWidthRatio,c=n.rawFields,f=void 0===c?[]:c,d=bf({weight:!0,nodePaddingRatio:s,nodeWidthRatio:u},Vt(r,o,a,l)),p=d.nodes,h=d.links,g=p.map((function(t){return i(i({},yt(t,e(["id","x","y","name"],f))),{isNode:!0})})),v=h.map((function(t){return i(i({source:t.source.name,target:t.target.name,name:t.source.name||t.target.name},yt(t,e(["x","y","value"],f))),{isNode:!1})}));return i(i({},t),{ext:i(i({},t.ext),{chordData:{nodesData:g,edgesData:v}})})}function kf(t){var e;return t.chart.scale(((e={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}}).name={sync:"color"},e.source={sync:"color"},e)),t}function Sf(t){return t.chart.axis(!1),t}function Af(t){return t.chart.legend(!1),t}function Mf(t){var e=t.chart,n=t.options.tooltip;return e.tooltip(n),t}function Df(t){return t.chart.coordinate("polar").reflect("y"),t}function Ef(t){var e=t.chart,n=t.options,r=t.ext.chordData.nodesData,i=n.nodeStyle,o=n.label,a=n.tooltip,l=e.createView();return l.data(r),rn({chart:l,options:{xField:"x",yField:"y",seriesField:"name",polygon:{style:i},label:o,tooltip:a}}),t}function Of(t){var e=t.chart,n=t.options,r=t.ext.chordData.edgesData,i=n.edgeStyle,o=n.tooltip,a=e.createView();return a.data(r),on({chart:a,options:{xField:"x",yField:"y",seriesField:"source",edge:{style:i,shape:"arc"},tooltip:o}}),t}function $f(e){var r,i=e.chart,o=e.options.animation;return"boolean"==typeof o?i.animate(o):i.animate(!0),l(n(r=i,["views","length"],0)<=0?r.geometries:t(r.views,(function(t,e){return t.concat(e.geometries)}),r.geometries),(function(t){t.animate(o)})),e}function zf(t){return vt(Ne,Ff,Df,kf,Sf,Af,Mf,Of,Ef,Be,je,$f)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="chord",e}p(e,t),e.getDefaultOptions=function(){return wf},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return zf}}(we);var Cf={field:"value",as:["x","y","r"],sort:function(t,e){return e.value-t.value}};function Pf(t){var e=t.data,n=t.hierarchyConfig,r=t.rawFields,o=void 0===r?[]:r,a=t.enableDrillDown,l=function(t,e){var n,r=(e=E({},Cf,e)).as;if(!d(r)||3!==r.length)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');try{n=As(e)}catch(u){}var i,o=(i=t,ou().size(e.size).padding(e.padding)(Ts(i).sum((function(t){return t[n]})).sort(e.sort))),a=r[0],l=r[1],s=r[2];return o.each((function(t){t[a]=t.x,t[l]=t.y,t[s]=t.r})),Ms(o)}(e,i(i({},n),{field:"value",as:["x","y","r"]})),s=[];return l.forEach((function(t){for(var e,r=t.data.name,l=i({},t);l.depth>1;)r=(null===(e=l.parent.data)||void 0===e?void 0:e.name)+" / "+r,l=l.parent;if(a&&t.depth>2)return null;var u=Rt({},t.data,i(i(i({},yt(t.data,o)),{path:r}),t));u.ext=n,u["hierarchy-data-transform-params"]={hierarchyConfig:n,rawFields:o,enableDrillDown:a},s.push(u)})),s}function If(t,e,n){var r=Zt([t,e]),i=r[0],o=r[1],a=r[2],l=r[3],s=n.width-(l+o),u=n.height-(i+a),c=Math.min(s,u),f=(s-c)/2,d=(u-c)/2;return{finalPadding:[i+d,o+f,a+d,l+f],finalSize:c<0?0:c}}var Tf=["x","y","r","name","value","path","depth"],Rf={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}};function _f(t){var e=t.chart,n=Math.min(e.viewBBox.width,e.viewBBox.height);return Rt({options:{size:function(t){return t.r*n}}},t)}function Lf(t){var e=t.options,r=t.chart,i=r.viewBBox,o=e.padding,a=e.appendPadding,l=e.drilldown,s=a;(null==l?void 0:l.enabled)&&(s=Zt([Xt(r.appendPadding,n(l,["breadCrumb","position"])),a]));var u=If(o,s,i).finalPadding;return r.padding=u,r.appendPadding=0,t}function Bf(t){var n=t.chart,r=t.options,i=n.padding,o=n.appendPadding,a=r.color,l=r.colorField,s=r.pointStyle,u=r.hierarchyConfig,c=r.sizeField,f=r.rawFields,d=void 0===f?[]:f,p=r.drilldown,h=Pf({data:r.data,hierarchyConfig:u,enableDrillDown:null==p?void 0:p.enabled,rawFields:d});n.data(h);var g=If(i,o,n.viewBBox).finalSize,v=function(t){return t.r*g};return c&&(v=function(t){return t[c]*g}),en(Rt({},t,{options:{xField:"x",yField:"y",seriesField:l,sizeField:c,rawFields:e(Tf,d),point:{color:a,style:s,shape:"circle",size:v}}})),t}function Wf(t){return vt(Ve({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(t)}function Nf(t){var e=t.chart,r=t.options.tooltip;if(!1===r)e.tooltip(!1);else{var o=r;n(r,"fields")||(o=Rt({},{customItems:function(t){return t.map((function(t){var r=n(e.getOptions(),"scales"),o=n(r,["name","formatter"],(function(t){return t})),a=n(r,["value","formatter"],(function(t){return t}));return i(i({},t),{name:o(t.data.name),value:a(t.data.value)})}))}},o)),e.tooltip(o)}return t}function jf(t){return t.chart.axis(!1),t}function qf(t){var n=t.drilldown,r=t.interactions,i=void 0===r?[]:r;return(null==n?void 0:n.enabled)?Rt({},t,{interactions:e(i,[{type:"drill-down",cfg:{drillDownConfig:n,transformData:Pf,enableDrillDown:!0}}])}):t}function Gf(t){return Be({chart:t.chart,options:qf(t.options)}),t}function Vf(t){return vt(Re("pointStyle"),_f,Lf,Ne,Wf,Bf,jf,_e,Nf,Gf,We,He())(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="circle-packing",e}p(e,t),e.getDefaultOptions=function(){return Rf},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Vf},e.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))}}(we),function(t){function e(e,n,r,i){var o=t.call(this,e,Rt({},i,n))||this;return o.type="g2-plot",o.defaultOptions=i,o.adaptor=r,o}p(e,t),e.prototype.getDefaultOptions=function(){return this.defaultOptions},e.prototype.getSchemaAdaptor=function(){return this.adaptor}}(we);var Hf={line:hn,pie:gr,column:qn,bar:Kn,area:Fn,gauge:tc,"tiny-line":vo,"tiny-column":xo,"tiny-area":ho,"ring-progress":jo,progress:Lo,scatter:Si,histogram:zo,funnel:is,stock:Pl},Yf={line:vn,pie:vr,column:Vn,bar:Qn,area:Sn,gauge:ec,"tiny-line":yo,"tiny-column":wo,"tiny-area":ko,"ring-progress":Go,progress:Bo,scatter:$i,histogram:Co,funnel:os,stock:Tl},Xf={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function Zf(t,e,r){var i=Yf[t];i&&(0,Hf[t])({chart:e,options:Rt({},i.getDefaultOptions(),n(Xf,t,{}),r)})}function Uf(t){var e=t.chart,n=t.options,r=n.views,o=n.legend;return l(r,(function(t){var n=t.region,r=t.data,o=t.meta,a=t.axes,s=t.coordinate,u=t.interactions,c=t.annotations,f=t.tooltip,d=t.geometries,p=e.createView({region:n});p.data(r);var h={};a&&l(a,(function(t,e){h[e]=yt(t,Fe)})),h=Rt({},o,h),p.scale(h),a?l(a,(function(t,e){p.axis(e,t)})):p.axis(!1),p.coordinate(s),l(d,(function(t){var e=Je({chart:p,options:t}).ext,n=t.adjust;n&&e.geometry.adjust(n)})),l(u,(function(t){!1===t.enable?p.removeInteraction(t.type):p.interaction(t.type,t.cfg)})),l(c,(function(t){p.annotation()[t.type](i({},t))})),"boolean"==typeof t.animation?p.animate(!1):(p.animate(!0),l(p.geometries,(function(e){e.animate(t.animation)}))),f&&(p.interaction("tooltip"),p.tooltip(f))})),o?l(o,(function(t,n){e.legend(n,t)})):e.legend(!1),e.tooltip(n.tooltip),t}function Kf(t){var e=t.chart,n=t.options,r=n.plots,o=n.data,a=void 0===o?[]:o;return l(r,(function(t){var n=t.type,r=t.region,o=t.options,l=void 0===o?{}:o,s=t.top,u=l.tooltip;if(s)Zf(n,e,i(i({},l),{data:a}));else{var c=e.createView(i({region:r},yt(l,be)));u&&c.interaction("tooltip"),Zf(n,c,i({data:a},l))}})),t}function Jf(t){var e=t.chart,n=t.options;return e.option("slider",n.slider),t}function Qf(t){return vt(We,Uf,Kf,Be,We,Ne,Le,Jf,He())(t)}function td(t){var e=t.chart,n=t.options,r=n.type,o=n.data,a=n.fields,s=n.eachView,u=F(n,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return e.data(o),e.facet(r,i(i({},u),{fields:a,eachView:function(t,e){var n=s(t,e);if(n.geometries)!function(t,e){var n=e.data,r=e.coordinate,o=e.interactions,a=e.annotations,s=e.animation,u=e.tooltip,c=e.axes,f=e.meta,d=e.geometries;n&&t.data(n);var p={};c&&l(c,(function(t,e){p[e]=yt(t,Fe)})),p=Rt({},f,p),t.scale(p),r&&t.coordinate(r),!1===c?t.axis(!1):l(c,(function(e,n){t.axis(n,e)})),l(d,(function(e){var n=Je({chart:t,options:e}).ext,r=e.adjust;r&&n.geometry.adjust(r)})),l(o,(function(e){!1===e.enable?t.removeInteraction(e.type):t.interaction(e.type,e.cfg)})),l(a,(function(e){t.annotation()[e.type](i({},e))})),"boolean"==typeof s?t.animate(!1):(t.animate(!0),l(t.geometries,(function(t){t.animate(s)}))),u?(t.interaction("tooltip"),t.tooltip(u)):!1===u&&t.removeInteraction("tooltip")}(t,n);else{var r=n,o=r.options;o.tooltip&&t.interaction("tooltip"),Zf(r.type,t,o)}}})),t}function ed(t){var e=t.chart,n=t.options,r=n.axes,o=n.meta,a=n.tooltip,s=n.coordinate,u=n.theme,c=n.legend,f=n.interactions,d=n.annotations,p={};return r&&l(r,(function(t,e){p[e]=yt(t,Fe)})),p=Rt({},o,p),e.scale(p),e.coordinate(s),r?l(r,(function(t,n){e.axis(n,t)})):e.axis(!1),a?(e.interaction("tooltip"),e.tooltip(a)):!1===a&&e.removeInteraction("tooltip"),e.legend(c),u&&e.theme(u),l(f,(function(t){!1===t.enable?e.removeInteraction(t.type):e.interaction(t.type,t.cfg)})),l(d,(function(t){e.annotation()[t.type](i({},t))})),t}function nd(t){return vt(Ne,td,ed)(t)}it("association",function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.getAssociationItems=function(t,e){var r,i=this.context.event,o=e||{},a=o.linkField,s=o.dim,u=[];if(null===(r=i.data)||void 0===r?void 0:r.data){var c=i.data.data;l(t,(function(t){var e,r,i=a;if("x"===s?i=t.getXScale().field:"y"===s?i=null===(e=t.getYScales().find((function(t){return t.field===i})))||void 0===e?void 0:e.field:i||(i=null===(r=t.getGroupScales()[0])||void 0===r?void 0:r.field),i){var o=w(St(t),(function(e){var r=!1,o=!1,a=d(c)?n(c[0],i):n(c,i);return function(t,e){var n=t.getModel().data;return d(n)?n[0][e]:n[e]}(e,i)===a?r=!0:o=!0,{element:e,view:t,active:r,inactive:o}}));u.push.apply(u,o)}}))}return u},e.prototype.showTooltip=function(t){var e=Et(this.context.view),n=this.getAssociationItems(e,t);l(n,(function(t){if(t.active){var e=t.element.shape.getCanvasBBox();t.view.showTooltip({x:e.minX+e.width/2,y:e.minY+e.height/2})}}))},e.prototype.hideTooltip=function(){var t=Et(this.context.view);l(t,(function(t){t.hideTooltip()}))},e.prototype.active=function(t){var e=Dt(this.context.view),n=this.getAssociationItems(e,t);l(n,(function(t){var e=t.active,n=t.element;e&&n.setState("active",!0)}))},e.prototype.selected=function(t){var e=Dt(this.context.view),n=this.getAssociationItems(e,t);l(n,(function(t){var e=t.active,n=t.element;e&&n.setState("selected",!0)}))},e.prototype.highlight=function(t){var e=Dt(this.context.view),n=this.getAssociationItems(e,t);l(n,(function(t){var e=t.inactive,n=t.element;e&&n.setState("inactive",!0)}))},e.prototype.reset=function(){var t=Dt(this.context.view);l(t,(function(t){var e;e=St(t),l(e,(function(t){t.hasState("active")&&t.setState("active",!1),t.hasState("selected")&&t.setState("selected",!1),t.hasState("inactive")&&t.setState("inactive",!1)}))}))},e}(nt)),rt("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),rt("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),rt("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),rt("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="mix",e}p(e,t),e.prototype.getSchemaAdaptor=function(){return Qf}}(we);var rd,id,od={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}};!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="area",e}p(e,t),e.getDefaultOptions=function(){return od},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return nd}}(we),(id=rd||(rd={})).DEV="DEV",id.BETA="BETA",id.STABLE="STABLE",Jt("en-US",{locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}}),Jt("zh-CN",{locale:"zh-CN",general:{increase:"增加",decrease:"减少",root:"初始"},statistic:{total:"总计"},conversionTag:{label:"转化率"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"总计"}});export{gs as L,jt as m};
